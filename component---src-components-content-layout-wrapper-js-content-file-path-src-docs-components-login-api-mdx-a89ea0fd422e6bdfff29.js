"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[17451],{24776:function(e,t,l){var n=l(96540),r=l(89319),a=l(78226);const c={core:{label:"Core",theme:{"--background-color":"var(--color-copper-medium-light)"}},react:{label:"React",theme:{"--background-color":"var(--color-fog-medium-light)"}},js:{label:"Vanilla JS",theme:{"--background-color":"var(--color-engel)"}}};t.A=e=>{var t;let{componentName:l,withoutHeading:o}=e;const i=null===(t=a.find(e=>e.name===l))||void 0===t?void 0:t.tags;return n.createElement(n.Fragment,null,!o&&n.createElement("h4",{className:"heading-s"},"Available technologies"),i&&n.createElement("div",{style:{display:"flex",gap:"var(--spacing-2-xs)"}},i.map(e=>{var t,l;return(null==c?void 0:c[e])&&n.createElement(r.T,{key:e,theme:null===(t=c[e])||void 0===t?void 0:t.theme},null===(l=c[e])||void 0===l?void 0:l.label)})))}},27758:function(e,t,l){var n=l(96540),r=l(99372);t.A=()=>{const e={Draft:"The component is work in progress",Beta:"The component is being tested",Stable:"The component has been tested and defects have been fixed",Accessible:"The component has been reviewed for accessibility",Deprecated:"The component will be removed"};return n.createElement(r.T,{placement:"right-end",className:"status-label-tooltip",boxShadow:!0},n.createElement("ul",{className:"status-label-definitions"},Object.keys(e).map(t=>n.createElement("li",{key:t},n.createElement("span",{className:"status-name"},t),n.createElement("span",null,e[t])))))}},28237:function(e,t,l){l.r(t),l.d(t,{default:function(){return f}});var n=l(28453),r=l(96540),a=l(27290),c=l(98018),o=l(84648),i=l(29191);const u=e=>{let{children:t,pageContext:l}=e;return r.createElement(i.A,{pageContext:l},t)},m=e=>{let{path:t,children:l}=e;return r.createElement(c.A,{href:"https://github.com/City-of-Helsinki/helsinki-design-system/tree/development/packages/react/src/components/"+t},l)},s=e=>{let{path:t,children:l}=e;return r.createElement(c.A,{openInExternalDomainAriaLabel:"Opens in a new domain",openInNewTab:!0,openInNewTabAriaLabel:"Opens in a new tab",href:"https://authts.github.io/oidc-client-ts/"+t},l)},d=e=>{let{children:t}=e;return r.createElement(o.A,{anchor:"object-types-from-oidc-client-ts"},t)},E=e=>{let{anchor:t,children:l}=e;return r.createElement(o.A,{path:"/components/login/usage",anchor:t},l)},h=e=>{let{anchor:t,children:l}=e;return r.createElement(o.A,{path:"/components/login/customisation",anchor:t},l)};function p(e){const t=Object.assign({h2:"h2",h3:"h3",ul:"ul",li:"li",h4:"h4",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",code:"code",strong:"strong",p:"p",h5:"h5",pre:"pre",h6:"h6"},(0,n.RP)(),e.components),{InternalLink:l}=t;return l||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("InternalLink",!0),r.createElement(r.Fragment,null,r.createElement(t.h2,{id:"api"},"API"),"\n",r.createElement(t.h3,{id:"table-of-contents"},"Table of contents"),"\n",r.createElement(t.ul,null,"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"Components"),"\n",r.createElement(t.ul,null,"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"LoginButton"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"LoginCallbackHandler"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"LoginProvider"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"SessionEndedHandler"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"WithAuthentication"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"WithAuthenticatedUser"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"WithoutAuthenticatedUser"),"\n"),"\n"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"Modules"),"\n",r.createElement(t.ul,null,"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"Oidc Client"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"Api tokens client"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"Session poller"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"GraphQL module"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"ApolloClient module"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"TokenizedFetch module"),"\n"),"\n"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"Oidc client hooks"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"Api tokens client hooks"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"Session poller hooks"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"GraphQL module hooks"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"ApolloClient module hooks"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"TokenizedFetch module hooks"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"Generic signal hooks"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"Beacon"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(o.A,null,"Signals"),"\n"),"\n"),"\n",r.createElement(t.h3,{id:"components"},"Components"),"\n",r.createElement(t.h4,{id:"loginbutton"},"LoginButton"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Default"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"errorText")),r.createElement(t.td,null,r.createElement(t.strong,null,"Required"),". An error text is shown if the OIDC server rejects the connection."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"loggingInText")),r.createElement(t.td,null,r.createElement(t.strong,null,"Required"),". Text read by the screen reader when the button is clicked."),r.createElement(t.td,null,'Default of the "loadingText" property of the LoadingSpinner')),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"spinnerColor")),r.createElement(t.td,null,"Optional. Colour of the loading spinner."),r.createElement(t.td,null,r.createElement(t.code,null,"var(--color-white)"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"redirectionProps")),r.createElement(t.td,null,"Properties appended to the url when redirecting. Read more in the ",r.createElement(l,{href:"/components/login/api/#methods"},"documentation of the oidcClient login method"),"."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"onClick")),r.createElement(t.td,null,"Called when the component is clicked and before the oidcClient.login() is called."),r.createElement(t.td,null,"none")))),"\n",r.createElement(t.p,null,"| [Table 1: Properties of the LoginButton component] |"),"\n",r.createElement(t.p,null,"Button text is passed and rendered as a child."),"\n",r.createElement(t.h4,{id:"logincallbackhandler"},"LoginCallbackHandler"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"children")),r.createElement(t.td,null,"Optional. Usually, child elements inform the user that a response is being processed.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"onError")),r.createElement(t.td,null,r.createElement(t.strong,null,"Required"),". The function is called when a login fails. The function is called with an ",r.createElement(o.A,{anchor:"error-signal-types"},"OidcClientError"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"onSuccess")),r.createElement(t.td,null,r.createElement(t.strong,null,"Required"),". The function is called when a response is handled successfully. The function is called with a ",r.createElement(d,null,"User")," object.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 2: Properties of the LoginCallbackHandler component]"),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"In some scenarios, when the component is rendered multiple times, usually in development mode with strict mode enabled, the ",r.createElement(t.code,null,"onError")," callback is called with an error that can usually be ignored. The error indicates a login callback is already being handled. The error can be checked with the exported function ",r.createElement(t.code,null,"isHandlingLoginCallbackError(error)"),"."),"\n",r.createElement(t.h4,{id:"loginprovider"},"LoginProvider"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"apiTokensClientSettings")),r.createElement(t.td,null,"Optional. ",r.createElement(o.A,{anchor:"settings-1"},"Settings for the Api tokens client"),". If omitted, the ",r.createElement(t.code,null,"Api tokens client")," is not created.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"debug")),r.createElement(t.td,null,"Optional. If true, debugging is enabled. See ",r.createElement(o.A,{anchor:"settings"},"Oidc client settings"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"modules")),r.createElement(t.td,null,"Optional. An array of ",r.createElement(h,null,"custom modules"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"sessionPollerSettings")),r.createElement(t.td,null,"Optional. ",r.createElement(o.A,{anchor:"settings-2"},"Settings for the Session poller"),". If omitted, the ",r.createElement(t.code,null,"Session poller")," is not created. If default values are acceptable, an empty object is required to create the poller.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"userManagerSettings")),r.createElement(t.td,null,r.createElement(t.strong,null,"Required"),". The ",r.createElement(o.A,{anchor:"oidc-client"},"HDS Oidc client")," uses ",r.createElement(c.A,{href:"https://github.com/authts/oidc-client-ts"},"oidc-client-ts")," to handle redirect URLs, token parsing and expiration. Both use the same ",r.createElement(t.code,null,"userManagerSettings"),", but ",r.createElement(o.A,{anchor:"default-usermanager-settings"},"different defaults"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 3: Properties of the LoginProvider component]"),r.createElement(t.td)))),"\n",r.createElement(t.h4,{id:"sessionendedhandler"},"SessionEndedHandler"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"content")),r.createElement(t.td,null,r.createElement(t.strong,null,"Required"),". Textual content with properties ",r.createElement(t.code,null,"title"),", ",r.createElement(t.code,null,"text"),", ",r.createElement(t.code,null,"buttonText")," and ",r.createElement(t.code,null,"closeButtonLabelText"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"dialogProps")),r.createElement(t.td,null,"Optional. Additional ",r.createElement(m,{path:"dialog/Dialog.tsx"},"DialogProps")," passed to the Dialog.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"ids")),r.createElement(t.td,null,"Optional. Ids for the dialog elements with properties ",r.createElement(t.code,null,"dialog"),", ",r.createElement(t.code,null,"title"),", and ",r.createElement(t.code,null,"text"),". If omitted, ids are created.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 4: Properties of the SessionEndedHandler component]"),r.createElement(t.td)))),"\n",r.createElement(t.h4,{id:"withauthentication"},"WithAuthentication"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"AuthorisedComponent")),r.createElement(t.td,null,"Optional. Component to render if the user is authenticated. The ",r.createElement(d,null,"user")," object is passed to the component.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"UnauthorisedComponent")),r.createElement(t.td,null,"Optional. Component to render if the user is not authenticated.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 5: Properties of the WithAuthentication component]"),r.createElement(t.td)))),"\n",r.createElement(t.h4,{id:"withauthenticateduser"},"WithAuthenticatedUser"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"children")),r.createElement(t.td,null,"React children. A ",r.createElement(d,null,"user")," object is passed to each child.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 6: Properties of the WithAuthenticatedUser component]"),r.createElement(t.td)))),"\n",r.createElement(t.h4,{id:"withoutauthenticateduser"},"WithoutAuthenticatedUser"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"children")),r.createElement(t.td,null,"React children.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 7: Properties of the WithAuthenticatedUser component]"),r.createElement(t.td)))),"\n",r.createElement(t.h3,{id:"modules"},"Modules"),"\n",r.createElement(t.p,null,"Usually, just logging in is not enough. The user must be able to fetch data from backend servers. That cannot be done unless the user's access token is exchanged for API tokens. Api tokens are sent in the headers of backend requests to authenticate the user.\nHDS Login modules include also API token handling. It is an independent module, but it communicates with the ",r.createElement(t.code,null,"Oidc client")," and updates automatically when the user logs in or is updated. The modules emit signals that can be listened to and reacted to."),"\n",r.createElement(t.p,null,"There are four modules to handle the user's needs:"),"\n",r.createElement(t.ul,null,"\n",r.createElement(t.li,null,r.createElement(o.A,null,"Oidc client")," for user data."),"\n",r.createElement(t.li,null,r.createElement(o.A,null,"Api tokens client")," for acquiring backend tokens."),"\n",r.createElement(t.li,null,r.createElement(E,null,"ApolloClient module")," to provide the client and auto-append api tokens to queries."),"\n",r.createElement(t.li,null,r.createElement(o.A,null,"GraphQL module")," for fetching data from a graphQL server. Fetching can be automatically linked to"),"\n",r.createElement(t.li,null,r.createElement(o.A,null,"TokenizedFetch module")," for fetching data from a server. Requests are automatically linked to the\nApi Tokens client."),"\n"),"\n",r.createElement(t.p,null,"All modules can be used without React and without each other. But a ",r.createElement(d,null,">user")," object is required to get API tokens and poll the session."),"\n",r.createElement(t.h4,{id:"oidc-client"},"Oidc client"),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"Oidc client")," uses the ",r.createElement(c.A,{href:"https://github.com/authts/oidc-client-ts"},"oidc-client-ts")," and has the same ",r.createElement(c.A,{href:"https://authts.github.io/oidc-client-ts/"},"settings")," but ",r.createElement(o.A,{anchor:"default-usermanager-settings"},"different defaults"),"."),"\n",r.createElement(t.h5,{id:"settings"},"Settings"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Default value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"debug")),r.createElement(t.td,null,"Optional. If true, debugging is enabled in the oidc-client-ts instance with ",r.createElement(t.code,null,"Log.setLevel(Log.Debug)")," and ",r.createElement(t.code,null,"Log.setLogger(console)"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"userManagerSettings")),r.createElement(t.td,null,r.createElement(t.strong,null,"Required"),", but not all options. At least ",r.createElement(t.code,null,"authority"),", ",r.createElement(t.code,null,"client_id")," and ",r.createElement(t.code,null,"scope")," must be set.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 8: Settings of the Oidc client]"),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"default-usermanager-settings"},"Default userManager settings"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Default value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"automaticSilentRenew")),r.createElement(t.td,null,"true")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"includeIdTokenInSilentRenew")),r.createElement(t.td,null,"true")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"loadUserInfo")),r.createElement(t.td,null,"true")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"monitorSession")),r.createElement(t.td,null,"false")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"post_logout_redirect_uri")),r.createElement(t.td,null,"window.origin + /")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"redirect_uri")),r.createElement(t.td,null,"window.origin + /callback")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"response_type")),r.createElement(t.td,null,"code")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"silent_redirect_uri")),r.createElement(t.td,null,"window.origin + /silent_renew.html")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"validateSubOnSilentRenew")),r.createElement(t.td,null,"false")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 9: Default userManager settings of the Oidc client ]"),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"These override the default settings of the ",r.createElement(c.A,{href:"https://github.com/authts/oidc-client-ts/blob/main/src/UserManagerSettings.ts"},"oidc-client-ts"),"."),"\n",r.createElement(t.h5,{id:"methods"},"Methods"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getAmr")),r.createElement(t.td,null,"Returns the user's ",r.createElement(t.code,null,"amr")," value(s) as an array. Tunnistamo returns the ",r.createElement(t.code,null,"amr")," as a string, which oidc-client-ts rejects because it violates the OIDC specification. Then the ",r.createElement(t.code,null,"amr")," value is read from the decrypted ",r.createElement(t.code,null,"id_token"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"Amr")," or ",r.createElement(t.code,null,"undefined"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getState")),r.createElement(t.td,null,"State of the client. See ",r.createElement(o.A,{anchor:"state-change-signals"},"Oidc client states"),"."),r.createElement(t.td,null,r.createElement(o.A,{anchor:"state-change-signals"},"State"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getToken")),r.createElement(t.td,null,"Returns a token. The function is async because token renewal might be in progress and the current token might be outdated after that. If renewal was in progress but failed, then the old token is returned. Use ",r.createElement(t.code,null,"isRenewing()")," and the exported function ",r.createElement(t.code,null,"getUserToken(user, tokenType)")," to get the token synchronously and safely. The Promise will never be rejected."),r.createElement(t.td,null,r.createElement(t.code,null,"string")," or ",r.createElement(t.code,null,"undefined"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getUser")),r.createElement(t.td,null,"Returns a ",r.createElement(d,null,"user")," object or ",r.createElement(t.code,null,"null"),"."),r.createElement(t.td,null,r.createElement(d,null,"User")," or ",r.createElement(t.code,null,"null"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getUserManager")),r.createElement(t.td,null,"Returns the ",r.createElement(d,null,"UserManager"),"."),r.createElement(t.td,null,r.createElement(d,null,"UserManager"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"handleCallback")),r.createElement(t.td,null,"Handles the callback data and returns a ",r.createElement(d,null,"user")," object - if the user is valid."),r.createElement(t.td,null,r.createElement(t.code,null,"Promise<User>")," or ",r.createElement(t.code,null,"Promise<OidcClientError>"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isAuthenticated")),r.createElement(t.td,null,"Returns true if the user exists and the ",r.createElement(d,null,"user")," object passes ",r.createElement(t.code,null,"isValidUser()")," check or if the user is currently renewing."),r.createElement(t.td,null,r.createElement(t.code,null,"boolean"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isRenewing")),r.createElement(t.td,null,"Returns true if the user renewal is in progress."),r.createElement(t.td,null,r.createElement(t.code,null,"boolean"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"login")),r.createElement(t.td,null,"Calls the ",r.createElement(t.code,null,"authorization_endpoint")," with given parameters. The browser window is redirected and the returned promise is fulfilled only, if an error occurs when redirecting. Parameters are documented in the ",r.createElement(d,null,"UserManager.signinRedirect")," of the oidc-client-ts. Used language can be set with a custom ",r.createElement(t.code,null,"language")," prop."),r.createElement(t.td,null,r.createElement(t.code,null,"Promise<never>"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"logout")),r.createElement(t.td,null,"Calls the ",r.createElement(t.code,null,"end_session_endpoint")," with given parameters. The browser window is redirected so the returned promise is never fulfilled. Parameters are documented in the ",r.createElement(d,null,"UserManager.signoutRedirect")," of the oidc-client-ts. Used language can be set with a custom ",r.createElement(t.code,null,"language")," prop."),r.createElement(t.td,null,r.createElement(t.code,null,"Promise<never>"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"renewUser")),r.createElement(t.td,null,"For manual user renewal. The Promise will never be rejected."),r.createElement(t.td,null,r.createElement(t.code,null,"Promise<User>"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 10: Methods of the Oidc client]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"other-exported-utility-functions"},"Other exported utility functions"),"\n",r.createElement(t.p,null,"The following functions can be imported and used without the ",r.createElement(t.code,null,"Oidc client")," module:"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Function"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Argument(s)"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"createOidcClient(props)")),r.createElement(t.td,null,"Creates the ",r.createElement(t.code,null,"Oidc client"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"Oidc client")," props."),r.createElement(t.td,null,r.createElement(t.code,null,"OidcClient"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getUserStoreKey(settings)")),r.createElement(t.td,null,"Returns the session storage key for the user data."),r.createElement(t.td,null,r.createElement(d,null,"UserManagerSettings")," object."),r.createElement(t.td,null,r.createElement(t.code,null,"string"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getUserFromStorage(settings, storage)")),r.createElement(t.td,null,"Returns user data from storage."),r.createElement(t.td,null,r.createElement(d,null,"UserManagerSettings")," object, storage to get the user from. (optional, default is session storage)."),r.createElement(t.td,null,r.createElement(d,null,"User")," or ",r.createElement(t.code,null,"null"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isUserExpired(user)")),r.createElement(t.td,null,"Returns true if the user is expired."),r.createElement(t.td,null,r.createElement(d,null,"User")," object."),r.createElement(t.td,null,r.createElement(t.code,null,"boolean"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isValidUser(user)")),r.createElement(t.td,null,"Returns true if the user is not expired and has an access token."),r.createElement(t.td,null,r.createElement(d,null,"User")," object."),r.createElement(t.td,null,r.createElement(t.code,null,"boolean"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"pickUserToken(user, tokenType)")),r.createElement(t.td,null,"Returns one of the user's tokens: ",r.createElement(t.code,null,"access"),", ",r.createElement(t.code,null,"id")," or ",r.createElement(t.code,null,"refresh"),"."),r.createElement(t.td,null,r.createElement(d,null,"User")," object, token type ( ",r.createElement(t.code,null,"access"),", ",r.createElement(t.code,null,"id")," or ",r.createElement(t.code,null,"refresh"),")."),r.createElement(t.td,null,r.createElement(t.code,null,"string")," or ",r.createElement(t.code,null,"undefined"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 11: Other Oidc client and user-related functions]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(a.Ay,null,r.createElement(t.pre,null,r.createElement(t.code,{className:"language-jsx"},"import { isUserExpired } from 'hds-react';\n\nif (isUserExpired(user)) {\n  // Show an error\n}\n"))),"\n",r.createElement(t.h5,{id:"state-change-signals"},"State change signals"),"\n",r.createElement(t.p,null,"When the user does something, the ",r.createElement(t.code,null,"Oidc client's")," state changes and the UI can indicate it by reacting to the state change signals. The simplest way to react to signals is ",r.createElement(E,null,"useOidcClientTracking")," hook.\nThe current state can also be read with ",r.createElement(o.A,{anchor:"methods"},"oidcClient.getState()"),"."),"\n",r.createElement(t.p,null,"There are utility functions for each state change. Use these to check if the emitted signal contains that state."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"State"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Utility function to check the signal"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"HANDLING_LOGIN_CALLBACK")),r.createElement(t.td,null,"The browser has returned from an Oidc provider and data is being parsed."),r.createElement(t.td,null,r.createElement(t.code,null,"isHandlingLoginCallbackSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"LOGGING_IN")),r.createElement(t.td,null,"State changes to this when ",r.createElement(t.code,null,"login()")," is called."),r.createElement(t.td,null,r.createElement(t.code,null,"isLoggingInSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"LOGGING_OUT")),r.createElement(t.td,null,"State changes to this when ",r.createElement(t.code,null,"logout()")," is called."),r.createElement(t.td,null,r.createElement(t.code,null,"isLoggingOutSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"NO_SESSION")),r.createElement(t.td,null,"No valid user exists."),r.createElement(t.td,null,r.createElement(t.code,null,"isNoSessionSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"VALID_SESSION")),r.createElement(t.td,null,"User is found and is valid."),r.createElement(t.td,null,r.createElement(t.code,null,"isValidSessionSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 12: Oidc client states]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"error-signal-types"},"Error signal types"),"\n",r.createElement(t.p,null,"Errors are rarely thrown; they are emitted as error signals where the error object is in the signal payload. Errors are instances of the ",r.createElement(m,{path:"login/client/oidcClientError.ts"},"OidcClientError"),". It is an extended Error object with a ",r.createElement(t.code,null,"type")," property and multiple ",r.createElement(t.code,null,".is...")," getters for checking error types.\nThe error object also contains the thrown error in ",r.createElement(t.code,null,"error.originalError")," property."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Error type"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Error object property to check"),r.createElement(t.th,null,"Utility function to check the signal"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"INVALID_OR_EXPIRED_USER")),r.createElement(t.td,null,"The returned ",r.createElement(d,null,"user")," object is expired or invalid."),r.createElement(t.td,null,r.createElement(t.code,null,"error.isInvalidUserError")),r.createElement(t.td,null,r.createElement(t.code,null,"isInvalidUserErrorSignal(signal) "))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"RENEWAL_FAILED")),r.createElement(t.td,null,"User renewal failed."),r.createElement(t.td,null,r.createElement(t.code,null,"error.isRenewalError")),r.createElement(t.td,null,r.createElement(t.code,null,"isRenewalErrorSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"SIGNIN_ERROR")),r.createElement(t.td,null,"Emitted when ",r.createElement(t.code,null,"handleCallback()")," or ",r.createElement(t.code,null,"login()")," failed."),r.createElement(t.td,null,r.createElement(t.code,null,"error.isSignInError")),r.createElement(t.td,null,r.createElement(t.code,null,"isSigninErroSignal(signal) "))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 13: Oidc client errors]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"event-signals"},"Event signals"),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"Oidc client")," also emits event signals when an action is complete or starting. The difference between state changes and events is the UI does not usually need to react to events."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Event type"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Utility function to check the signal"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"USER_UPDATED")),r.createElement(t.td,null,"User data has changed. Includes also changes to ",r.createElement(t.code,null,"null"),", if login or renewal fail."),r.createElement(t.td,null,r.createElement(t.code,null,"isUserUpdatedSignal(signal) "))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"USER_REMOVED")),r.createElement(t.td,null,"User data was removed. Happens when the user logs out or tokens expire."),r.createElement(t.td,null,r.createElement(t.code,null,"isUserRemovedSignal(signal) "))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"USER_RENEWAL_STARTED")),r.createElement(t.td,null,"User is being renewed. Current access_token and API tokens may be invalid until the renewal is complete."),r.createElement(t.td,null,r.createElement(t.code,null,"isUserRenewalStartedSignal(signal) "))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 14: Oidc client events]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"dedicated-signal-triggers"},"Dedicated signal triggers"),"\n",r.createElement(t.p,null,"Generic triggers for ",r.createElement(t.code,null,"Oidc client")," signals. These trigger only if the signal originated from the ",r.createElement(t.code,null,"Oidc client"),"."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Generic triggers"),r.createElement(t.th,null,"Required signal props to trigger the listener"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllOidcClientErrors")),r.createElement(t.td,null,r.createElement(t.code,null,"Oidc client")," namespace and type ",r.createElement(t.code,null,"error"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllOidcClientEvents")),r.createElement(t.td,null,r.createElement(t.code,null,"Oidc client")," namespace and type ",r.createElement(t.code,null,"event"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllOidcClientSignals")),r.createElement(t.td,null,r.createElement(t.code,null,"Oidc client")," namespace.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllOidcClientStateChanges")),r.createElement(t.td,null,r.createElement(t.code,null,"Oidc client")," namespace and type ",r.createElement(t.code,null,"stateChange"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 15: Oidc client triggers]"),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"State change triggers require the signal to have the ",r.createElement(t.code,null,"Oidc client")," namespace and type ",r.createElement(t.code,null,"stateChange"),".\n",r.createElement(t.code,null,"Signal.payload.type")," must contain one of the ",r.createElement(o.A,{anchor:"state-change-signals"},"states"),"."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"State change triggers"),r.createElement(t.th,null,"Required signal props to trigger the listener"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"loggingInTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching state.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"loggingOutTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching state.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"noSessionTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching state.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"validSessionTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching state.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 16: Oidc client state change triggers]"),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"Event triggers require the signal to have the ",r.createElement(t.code,null,"Oidc client")," namespace and type ",r.createElement(t.code,null,"event"),".\n",r.createElement(t.code,null,"Signal.payload.type")," contains one of the ",r.createElement(o.A,{anchor:"event-signals"},"events"),"."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Event triggers"),r.createElement(t.th,null,"Required signal props to trigger the listener"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"userRemovedTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching event.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"userRenewalStartedTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching event.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"userUpdatedTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching event.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 17: Oidc client event triggers]"),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"Error triggers require the signal to have the ",r.createElement(t.code,null,"Oidc client")," namespace and type ",r.createElement(t.code,null,"error"),".\n",r.createElement(t.code,null,"Signal.payload.type")," contains one of the ",r.createElement(o.A,{anchor:"error-signal-types"},"errors"),"."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Error triggers"),r.createElement(t.th,null,"Required signal props to trigger the listener"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"invalidUserErrorTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching error.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"renewalErrorTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching error.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"signInErrorTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching error.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 18: Oidc client error triggers]"),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"getting-signal-payloads"},"Getting signal payloads"),"\n",r.createElement(t.p,null,"Sometimes the most significant part of a signal is the payload. There are predefined payload getters for the ",r.createElement(t.code,null,"Oidc client"),".\nIf the given signal is not from ",r.createElement(t.code,null,"Oidc client")," or is not of the given type, the function returns null. So there is no need to pre-check the signal namespace or type."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Payload getter"),r.createElement(t.th,null,"Returns"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getOidcClientEventPayload")),r.createElement(t.td,null,r.createElement(t.code,null,"null")," or ",r.createElement(t.code,null,"{type, data}"),". The data is usually a ",r.createElement(d,null,"user")," object.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getOidcClientErrorPayload")),r.createElement(t.td,null,r.createElement(t.code,null,"null")," or ",r.createElement(o.A,{anchor:"error-signal-types"},"OidcClientError")," object.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getOidcClientStateChangePayload")),r.createElement(t.td,null,r.createElement(t.code,null,"null")," or ",r.createElement(t.code,null,"{state, previousState}"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 19: Oidc client signal payload getters]"),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"hooks"},"Hooks"),"\n",r.createElement(t.p,null,"Oidc client hooks are listed in the ",r.createElement(o.A,{anchor:"oidc-client-hooks"},"hooks")," section."),"\n",r.createElement(t.h4,{id:"api-tokens-client"},"Api tokens client"),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"Api tokens client")," listens to the ",r.createElement(t.code,null,"Oidc client")," signals and waits until the user is authenticated and then fetches the API tokens. It retries if fetch fails and terminates when the maximum number of retries is reached.\nWhen the user is about to expire and renews, API tokens are also renewed automatically."),"\n",r.createElement(t.p,null,"When user renewal starts, API tokens are also removed to prevent usage of API tokens that are not possibly valid anymore. Use ",r.createElement(t.code,null,"isRenewing()")," to check if API tokens are being renewed, and if it returns 'false', then use the API tokens returned by ",r.createElement(t.code,null,"getTokens()"),"."),"\n",r.createElement(t.h5,{id:"requirements"},"Requirements"),"\n",r.createElement(t.p,null,"URL where to get the tokens from. A user's access token is also required, so the user must be authenticated to fetch API tokens."),"\n",r.createElement(t.h5,{id:"settings-1"},"Settings"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Default value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"audiences")),r.createElement(t.td,null,"Optional. An array of strings. Used with Helsinki Profile api token requests. One token is fetched for each audience."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"maxRetries")),r.createElement(t.td,null,"Optional. The number of max retries until fetching is stopped."),r.createElement(t.td,null,"4")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"queryProps")),r.createElement(t.td,null,"Optional. An object. Used with Helsinki Profile api token requests. Contains properties ",r.createElement(t.code,null,"grantType")," and ",r.createElement(t.code,null,"permission"),"."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"retryInterval")),r.createElement(t.td,null,"Optional. Waiting time in milliseconds between failed requests."),r.createElement(t.td,null,"500")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"url")),r.createElement(t.td,null,r.createElement(t.strong,null,"Required"),". URL to the API tokens endpoint."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 20: Api tokens client settings]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"methods-1"},"Methods"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"clear")),r.createElement(t.td,null,"Cancels fetch and removes all data."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"fetch")),r.createElement(t.td,null,"Fetches the tokens from the given URI."),r.createElement(t.td,null,r.createElement(t.code,null,"Promise<Tokens>"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getTokens")),r.createElement(t.td,null,"Gets locally stored tokens."),r.createElement(t.td,null,r.createElement(t.code,null,"Tokens"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isRenewing")),r.createElement(t.td,null,"Returns true if tokens are currently fetched."),r.createElement(t.td,null,r.createElement(t.code,null,"boolean"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 21: Api tokens client methods]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"api-token-client-tracker-utility"},"Api Token Client Tracker utility"),"\n",r.createElement(t.p,null,"Multiple modules need to track api tokens and their renewal process. This util listens to changes and also times out when the renewal is taking too long."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Name"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Default value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"keepTokensAfterRenewalError")),r.createElement(t.td,null,"If renewal fails, should old tokens be kept of not."),r.createElement(t.td,null,r.createElement(t.code,null,"false"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"keepTokensWhileRenewing")),r.createElement(t.td,null,"If true, the stored api tokens are not cleared when renewal starts."),r.createElement(t.td,null,r.createElement(t.code,null,"true"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"onChange(tokens: TokenData, changeTrigger: Signal)")),r.createElement(t.td,null,"Called when api tokens change. Not called when dispose() is called. Second argument is the signal that caused the change."),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"rejectionSignalTrigger")),r.createElement(t.td,null,"Type of the signal that should end the pending api token renewal promise. Usually it is a clear/dispose signal from the module using this util, so the promise is fulfilled when the module is not used anymore."),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"timeout")),r.createElement(t.td,null,"How long to wait for apitoken renewal to fulfill."),r.createElement(t.td,null,r.createElement(t.code,null,"15000"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 22: createApiTokenClientTracker settings]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"The function returns an object with following properties"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Arguments"),r.createElement(t.th,null,"Return values"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"connect(connectedBeacon: Beacon)")),r.createElement(t.td,null,"Connect the utility to a beacon."),r.createElement(t.td,null,r.createElement(t.code,null,"void"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"dispose()")),r.createElement(t.td,null,"Dispose listeners, references and data."),r.createElement(t.td,null,r.createElement(t.code,null,"void"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getTokens()")),r.createElement(t.td,null,"Get current tokens."),r.createElement(t.td,null,r.createElement(t.code,null,"TokenData")," (empty object, if no existing tokens)")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isRenewing()")),r.createElement(t.td,null,"Returns true, if renewal process is on-going."),r.createElement(t.td,null,r.createElement(t.code,null,"boolean"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"stopWaitingForTokens()")),r.createElement(t.td,null,"Discards pending promise for api token renewal. Emits signal to abort it. Same signal is used in all instance of this utility, so the signal stops them all."),r.createElement(t.td,null,r.createElement(t.code,null,"void"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"waitForApiTokens()")),r.createElement(t.td,null,"Returns the pending renewal promise or immediately resolved promise. Never rejects, the returned boolean indicates was the promise successful."),r.createElement(t.td,null,r.createElement(t.code,null,"Promise<boolean>"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 23: ApiTokenClientTracker properties]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"other-exported-utility-functions-1"},"Other exported utility functions"),"\n",r.createElement(t.p,null,"The following functions can be imported and used without the ",r.createElement(t.code,null,"Api tokens client")," module:"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Function"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Argument(s)"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"createApiTokenClient(props)")),r.createElement(t.td,null,"Creates the client."),r.createElement(t.td,null,"ApiTokenClientProps."),r.createElement(t.td,null,r.createElement(t.code,null,"ApiTokensClient"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getApiTokensFromStorage(storage)")),r.createElement(t.td,null,"Gets the API tokens from session storage."),r.createElement(t.td,null,"Storage to get the tokens from. (optional, default is session storage)."),r.createElement(t.td,null,r.createElement(m,{path:"login/apiTokensClient/index.ts"},"TokenData")," or ",r.createElement(t.code,null,"null"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getUserReferenceFromStorage(storage)")),r.createElement(t.td,null,"Gets the user's access token used as reference."),r.createElement(t.td,null,"Storage to get the reference from. (optional, default is session storage)."),r.createElement(t.td,null,r.createElement(t.code,null,"string"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"removeApiTokensFromStorage(storage)")),r.createElement(t.td,null,"Removes the API tokens from session storage."),r.createElement(t.td,null,"Storage to remove the tokens from. (optional, default is session storage)."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"removeUserReferenceFromStorage(storage)")),r.createElement(t.td,null,"Removes the user's access token used as reference."),r.createElement(t.td,null,"Storage to remove the reference from. (optional, default is session storage)."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"setApiTokensToStorage(tokens, storage)")),r.createElement(t.td,null,"Sets the API tokens to storage."),r.createElement(t.td,null,"Tokens, storage to set the tokens to. (optional, default is session storage)."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"setUserReferenceToStorage(reference,storage)")),r.createElement(t.td,null,"Sets the user's access token used as reference."),r.createElement(t.td,null,"Reference as string, tokens, storage to set the tokens to. (optional, default is session storage)."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 24: Other Api tokens client-related functions]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(a.Ay,null,r.createElement(t.pre,null,r.createElement(t.code,{className:"language-jsx"},"import { getApiTokensFromStorage } from 'hds-react';\n\nconst apiTokens = getApiTokensFromStorage();\nif (apiTokens) {\n  // Use tokens\n}\n"))),"\n",r.createElement(t.h5,{id:"state-change-signals-1"},"State change signals"),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"Api tokens client")," has no state changes."),"\n",r.createElement(t.h5,{id:"error-signal-types-1"},"Error signal types"),"\n",r.createElement(t.p,null,"Returned errors are instances of the ",r.createElement(t.code,null,"ApiTokensClientError"),". It is an extended Error object with type property and multiple ",r.createElement(t.code,null,".is...")," getters for checking error types. The error object also contains the thrown error in ",r.createElement(t.code,null,"error.originalError")," property."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Error type"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Error object property to check"),r.createElement(t.th,null,"Utility function to check the signal"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"API_TOKEN_FETCH_FAILED")),r.createElement(t.td,null,"Fetch failed."),r.createElement(t.td,null,r.createElement(t.code,null,"error.isFetchError")),r.createElement(t.td,null,r.createElement(t.code,null,"isApiTokensFetchFailedErrorSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"INVALID_API_TOKENS")),r.createElement(t.td,null,"The returned object is an invalid json."),r.createElement(t.td,null,r.createElement(t.code,null,"error.isInvalidTokensError")),r.createElement(t.td,null,r.createElement(t.code,null,"isInvalidApiTokensErrorSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"INVALID_USER_FOR_API_TOKENS")),r.createElement(t.td,null,"User is not valid."),r.createElement(t.td,null,r.createElement(t.code,null,"error.isInvalidApiTokensUserError")),r.createElement(t.td,null,r.createElement(t.code,null,"isInvalidApiTokensUserErrorSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 25: Api tokens client errors]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"event-signals-1"},"Event signals"),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"Api tokens client")," also emits events when an action is complete or starting."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Event type"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Utility function to check the signal"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"API_TOKENS_UPDATED")),r.createElement(t.td,null,"Tokens have changed. Includes also changes to ",r.createElement(t.code,null,"null"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"isApiTokensUpdatedSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"API_TOKENS_REMOVED")),r.createElement(t.td,null,"Tokens have been removed. Happens usually when the user object has been removed or is renewed."),r.createElement(t.td,null,r.createElement(t.code,null,"isApiTokensRemovedSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"API_TOKENS_RENEWAL_STARTED")),r.createElement(t.td,null,"Api tokens are renewed. Happens usually right after user renewal."),r.createElement(t.td,null,r.createElement(t.code,null,"isApiTokensRenewalStartedSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 26: Api tokens client events]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"dedicated-signal-triggers-1"},"Dedicated signal triggers"),"\n",r.createElement(t.p,null,"Triggers for ",r.createElement(t.code,null,"Api tokens client")," signals. These trigger signals only originated from the ",r.createElement(t.code,null,"Api tokens client"),"."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Generic triggers"),r.createElement(t.th,null,"Required signal props to trigger the listener"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllApiTokensClientErrors")),r.createElement(t.td,null,r.createElement(t.code,null,"Api tokens client")," namespace and type ",r.createElement(t.code,null,"error"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllApiTokensClientEvents")),r.createElement(t.td,null,r.createElement(t.code,null,"Api tokens client")," namespace and type ",r.createElement(t.code,null,"event"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllApiTokensClientSignals")),r.createElement(t.td,null,r.createElement(t.code,null,"Api tokens client")," namespace.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 27: Api tokens client triggers]"),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"Event triggers require the signal to have ",r.createElement(t.code,null,"Api tokens client")," namespace and type ",r.createElement(t.code,null,"event"),".\n",r.createElement(t.code,null,"Signal.payload.type")," contains one of the ",r.createElement(o.A,{anchor:"event-signals-1"},"events"),"."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Event triggers"),r.createElement(t.th,null,"Required signal props to trigger the listener"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"apiTokensRemovedTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching event.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"apiTokensRenewalStartedTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching event.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"apiTokensUpdatedTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching event.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 28: Api tokens client event triggers]"),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"Error triggers require the signal to have ",r.createElement(t.code,null,"Api tokens client")," namespace and type ",r.createElement(t.code,null,"error"),".\n",r.createElement(t.code,null,"Signal.payload.type")," contains one of the ",r.createElement(o.A,{anchor:"error-signal-types-1"},"errors"),"."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Error triggers"),r.createElement(t.th,null,"Required signal props to trigger the listener"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"apiTokensFetchFailedErrorTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching error.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"invalidApiTokensErrorTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching error.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"invalidApiTokensUserErrorTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching error.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 29: Api tokens client error triggers]"),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"getting-signal-payloads-1"},"Getting signal payloads"),"\n",r.createElement(t.p,null,"Sometimes the most significant part of a signal is the payload. There are predefined payload getters for the ",r.createElement(t.code,null,"Api tokens client"),".\nIf the given signal is not from ",r.createElement(t.code,null,"Api tokens client")," or is not given type, the function returns null. So there is no need to pre-check the signal namespace or type."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Payload getter"),r.createElement(t.th,null,"Returns"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getApiTokensClientErrorPayload")),r.createElement(t.td,null,r.createElement(t.code,null,"null")," or ",r.createElement(o.A,{anchor:"error-signal-types-1"},"ApiTokensClientError")," object.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getApiTokensClientEventPayload")),r.createElement(t.td,null,r.createElement(t.code,null,"null")," or ",r.createElement(t.code,null,"{type, data}"),". The data is usually tokens.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 30: Api tokens client signal payload getters]"),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"hooks-1"},"Hooks"),"\n",r.createElement(t.p,null,"Api tokens client hooks are listed in the ",r.createElement(o.A,{anchor:"api-tokens-client-hooks"},"hooks section"),"."),"\n",r.createElement(t.h4,{id:"session-poller"},"Session poller"),"\n",r.createElement(t.p,null,"The user's session could end outside of the current browser window. The ",r.createElement(t.code,null,"Session poller")," calls the userinfo endpoint and notifies when it receives an unauthorized or forbidden response.\nSuccesses and other errors are ignored."),"\n",r.createElement(t.h5,{id:"requirements-1"},"Requirements"),"\n",r.createElement(t.p,null,"Polling requires a user and the ",r.createElement(t.code,null,"userManager")," from the ",r.createElement(t.code,null,"Oidc client"),". The polling endpoint is fetched from ",r.createElement(t.code,null,"userManager"),"'s metadata."),"\n",r.createElement(t.h5,{id:"settings-2"},"Settings"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Default value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"pollIntervalInMs")),r.createElement(t.td,null,"Optional. Waiting time between polls in milliseconds. The default is one minute."),r.createElement(t.td,null,"60000")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 31: Session poller settings]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"methods-2"},"Methods"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"start")),r.createElement(t.td,null,"Starts the polling. The first check is done after pollIntervalInMs is expired. Not immediately."),r.createElement(t.td)),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"stop")),r.createElement(t.td,null,"Stops the polling and aborts current requests, if any."),r.createElement(t.td,null,r.createElement(t.code,null,"Tokens"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 32: Session poller methods]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"other-exported-utility-functions-2"},"Other exported utility functions"),"\n",r.createElement(t.p,null,"The following function can be imported and used without the ",r.createElement(t.code,null,"Session poller")," module:"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Argument(s)"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"createSessionPoller(options)")),r.createElement(t.td,null,"Creates the poller."),r.createElement(t.td,null,"SessionPollerOptions."),r.createElement(t.td,null,r.createElement(t.code,null,"SessionPoller"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 33: Other Session poller functions]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(a.Ay,null,r.createElement(t.pre,null,r.createElement(t.code,{className:"language-jsx"},"import { createSessionPoller } from 'hds-react';\n\nconst sessionPoller = createSessionPoller();\n"))),"\n",r.createElement(t.h5,{id:"state-change-signals-2"},"State change signals"),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"Session poller")," has no state changes."),"\n",r.createElement(t.h5,{id:"error-signal-types-2"},"Error signal types"),"\n",r.createElement(t.p,null,"Returned errors are instances of the ",r.createElement(t.code,null,"SessionPollerError"),". It is an extended Error object with type property and multiple ",r.createElement(t.code,null,".is...")," getters for checking error types. The error object also contains the thrown error in ",r.createElement(t.code,null,"error.originalError")," property."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Error type"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Error object property to check"),r.createElement(t.th,null,"Utility function to check the signal"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"SESSION_ENDED")),r.createElement(t.td,null,"The server returned a forbidden or unauthorized status code."),r.createElement(t.td,null,r.createElement(t.code,null,"error.isSessionEnded")),r.createElement(t.td,null,r.createElement(t.code,null,"isSessionEndedSignal(signal) "))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"SESSION_POLLING_FAILED")),r.createElement(t.td,null,"Polling has failed and max retries have been reached."),r.createElement(t.td,null,r.createElement(t.code,null,"error.isSessionPollingFailure")),r.createElement(t.td,null,r.createElement(t.code,null,"isSessionPollingFailureSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 34: Other Session poller error types]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"event-signals-2"},"Event signals"),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"Session poller")," also emits events when an action is complete or starting."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Event type"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Utility function to check the signal"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"SESSION_POLLING_STARTED")),r.createElement(t.td,null,"Polling has started."),r.createElement(t.td,null,r.createElement(t.code,null,"isSessionPollerStartedSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"SESSION_POLLING_STOPPED")),r.createElement(t.td,null,"Polling has stopped."),r.createElement(t.td,null,r.createElement(t.code,null,"isSessionPollerStoppedSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 35: Other Session poller event types]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"dedicated-signal-triggers-2"},"Dedicated signal triggers"),"\n",r.createElement(t.p,null,"Triggers for ",r.createElement(t.code,null,"Session poller"),"signals. These trigger signals only originated from the ",r.createElement(t.code,null,"Session poller"),"."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Generic triggers"),r.createElement(t.th,null,"Required signal props to trigger the listener"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllSessionPollerErrors")),r.createElement(t.td,null,r.createElement(t.code,null,"Session poller")," namespace and type ",r.createElement(t.code,null,"error"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllSessionPollerEvents")),r.createElement(t.td,null,r.createElement(t.code,null,"Session poller")," namespace and type ",r.createElement(t.code,null,"event"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllSessionPollerSignals")),r.createElement(t.td,null,r.createElement(t.code,null,"Session poller")," namespace.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 36: Session poller triggers]"),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"Event triggers require the signal to have a ",r.createElement(t.code,null,"Session poller")," namespace and type ",r.createElement(t.code,null,"event"),".\n",r.createElement(t.code,null,"Signal.payload.type")," contains one of the ",r.createElement(o.A,{anchor:"event-signals-2"},"events"),"."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Event triggers"),r.createElement(t.th,null,"Required signal props to trigger the listener"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"sessionPollingStartedTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching event.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"sessionPollingStoppedTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching event.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 37: Session poller event triggers]"),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"Error triggers require the signal to have a ",r.createElement(t.code,null,"Session poller"),"namespace and type ",r.createElement(t.code,null,"error"),".\n",r.createElement(t.code,null,"Signal.payload.type")," contains one of the ",r.createElement(o.A,{anchor:"error-signal-types-2"},"errors"),"."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Error triggers"),r.createElement(t.th,null,"Required signal props to trigger the listener"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"sessionEndedTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching error.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"sessionPollingFailedTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching error.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 38: Session poller error triggers]"),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"getting-signal-payloads-2"},"Getting signal payloads"),"\n",r.createElement(t.p,null,"Sometimes the most significant part of a signal is the payload. There are predefined payload getters for the ",r.createElement(t.code,null,"Session poller"),".\nIf the given signal is not from the ",r.createElement(t.code,null,"Session poller")," or is not given type, the function returns null. So there is no need to pre-check the signal namespace or type."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Payload getter"),r.createElement(t.th,null,"Returns"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getSessionPollerErrorPayload")),r.createElement(t.td,null,r.createElement(t.code,null,"null")," or ",r.createElement(o.A,{anchor:"error-signal-types-2"},"SessionPollerError")," object.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getSessionPollerEventPayload")),r.createElement(t.td,null,r.createElement(t.code,null,"null")," or ",r.createElement(t.code,null,"{type, data}"),". The data is usually tokens.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 39: Session poller signal payload getters]"),r.createElement(t.td)))),"\n",r.createElement(t.h4,{id:"graphql-module"},"GraphQL Module"),"\n",r.createElement(t.p,null,"Loading data from a graphQL server may require user authentication and api tokens. The GraphQL module can be set to listen to the Api token client and start querying when api tokens are ready. It can pick the correct api token and set it to the query headers."),"\n",r.createElement(t.p,null,"The module can also be used without api tokens and can be controlled manually."),"\n",r.createElement(t.p,null,"Unlike the ",r.createElement(t.code,null,"Api token client")," and ",r.createElement(t.code,null,"Session Poller"),", the ",r.createElement(t.code,null,"GraphQL Module")," must be manually added to the ",r.createElement(t.code,null,"<LoginProvider>"),"."),"\n",r.createElement(a.Ay,null,r.createElement(t.pre,null,r.createElement(t.code,{className:"language-jsx"},"import { ApolloClient } from '@apollo/client';\nimport { createGraphQLModule } from 'hds-react';\nimport { queryDocument } from './<path to queries>';\n\nconst graphQLClient = new ApolloClient({\n  uri: 'https://graphql.endpoint.com/graphql/',\n  cache: new InMemoryCache(),\n});\n\nconst options = {\n  graphQLClient,\n  query: queryDocument,\n  queryOptions: {\n    errorPolicy: 'all',\n  },\n};\nconst graphQLModule = createGraphQLModule(options);\n\n<LoginProvider {...loginProps} modules={[graphQLModule]}></LoginProvider>;\n"))),"\n",r.createElement(t.h5,{id:"requirements-2"},"Requirements"),"\n",r.createElement(t.p,null,"To execute a query, the following requirements must be met:"),"\n",r.createElement(t.ul,null,"\n",r.createElement(t.li,null,"A graphQLClient (ApolloClient) must be configured and passed to the ",r.createElement(t.code,null,"GraphQL module"),"."),"\n",r.createElement(t.li,null,"A query document must be provided."),"\n"),"\n",r.createElement(t.p,null,"If the graphQL end-point requires an authentication, then the authentication headers must be set by"),"\n",r.createElement(t.ul,null,"\n",r.createElement(t.li,null,"Providing them in ",r.createElement(t.code,null,"queryOptions.header"),"."),"\n",r.createElement(t.li,null,"Setting them in ",r.createElement(t.code,null,"queryHelper()"),"."),"\n",r.createElement(t.li,null,"Requiring api tokens with ",r.createElement(t.code,null,"options.requireApiTokens")," and setting ",r.createElement(t.code,null,"options.apiTokenKey"),"."),"\n"),"\n",r.createElement(t.h5,{id:"important"},"Important"),"\n",r.createElement(t.p,null,"The module props do not require aquerydocument or agraphQLClient, but a query cannot be executed without them. Both can also be passed as arguments to the",r.createElement(t.code,null,"query(options)"),". The client can also be set by calling",r.createElement(t.code,null,"setClient(client)"),"."),"\n",r.createElement(t.p,null,"Once set, the client is stored, and there is no need to pass it again. The query document is not stored, so different queries can be used every time."),"\n",r.createElement(t.p,null,"When used with Helsinki City Profile, the",r.createElement(t.code,null,"queryOptions.errorPolicy"),'should be set to"all". Otherwise, queries will fail when a weakly authenticated user tries to get the profile. The resulting data will include (dismissable) errors, and an ApolloClient query will fail when the data has an errorproperty.'),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"createGraphQLModule")," function is a Generic Typescript function with two types: ",r.createElement(t.code,null,"createGraphQLModule<Q = GraphQLQueryResult, T = NormalizedCacheObject>"),". The first type, ",r.createElement(t.code,null,"Q"),", defines what kind of results the query returns. The latter, ",r.createElement(t.code,null,"T"),", only describes the cache type of the ApolloClient and is not usually changed."),"\n",r.createElement(t.h5,{id:"settings-3"},"Settings"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Type"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Default value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"graphQLClient")),r.createElement(t.td,null,r.createElement(c.A,{href:"https://www.apollographql.com/docs/react/get-started"},"ApolloClient")),r.createElement(t.td,null,"Optional property, but must be set before the query is executed. Can be set with ",r.createElement(t.code,null,"setApolloClient")," or when calling a ",r.createElement(t.code,null,"query(options)"),". The ",r.createElement(o.A,{anchor:"apolloclient-module"},"ApolloClient Module")," can also be used."),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"query")),r.createElement(t.td,null,r.createElement(t.code,null,"TypedDocumentNode or DocumentNode")),r.createElement(t.td,null,"A graphQL query document."),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"queryHelper")),r.createElement(t.td,null,r.createElement(t.code,null,"(currentOptions:QueryOptions, apiTokenClient?: ApiTokenClient, beacon?:Beacon) => QueryOptions")),r.createElement(t.td,null,"This function is called before a query is executed. The options object returned by the function is used as query options."),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"options")),r.createElement(t.td,null,r.createElement(t.code,null,"object")),r.createElement(t.td,null,"GraphQL module options."),r.createElement(t.td)),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"options.autoFetch")),r.createElement(t.td,null,r.createElement(t.code,null,"boolean")),r.createElement(t.td,null,"Should query be executed automatically on initialization."),r.createElement(t.td,null,r.createElement(t.code,null,"true"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"options.requireApiTokens")),r.createElement(t.td,null,r.createElement(t.code,null,"boolean")),r.createElement(t.td,null,"Are api tokens required for queries."),r.createElement(t.td,null,r.createElement(t.code,null,"true"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"options.abortIfLoading")),r.createElement(t.td,null,r.createElement(t.code,null,"boolean")),r.createElement(t.td,null,"Should an on-going query be aborted when ",r.createElement(t.code,null,"query()")," is called again. If false, the ",r.createElement(t.code,null,"query()")," will return a pending promise, and a new query is not started."),r.createElement(t.td,null,r.createElement(t.code,null,"true"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"options.keepOldResultOnError")),r.createElement(t.td,null,r.createElement(t.code,null,"boolean")),r.createElement(t.td,null,"Should old result be kept, if a newer query fails."),r.createElement(t.td,null,r.createElement(t.code,null,"false"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"options.apiTokensWaitTime")),r.createElement(t.td,null,r.createElement(t.code,null,"number")),r.createElement(t.td,null,"How long in milliseconds should api tokens be awaited before rejecting a query."),r.createElement(t.td,null,"15 000")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"options.apiTokenKey")),r.createElement(t.td,null,r.createElement(t.code,null,"string")),r.createElement(t.td,null,"An object key for the api token to use in a query. The token is picked with ",r.createElement(t.code,null,"apiTokens[key]"),"."),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"queryOptions")),r.createElement(t.td,null,r.createElement(t.code,null,"QueryOptions")," excluding the ",r.createElement(t.code,null,"query")," property"),r.createElement(t.td,null,"Other ",r.createElement(c.A,{href:"https://www.apollographql.com/docs/react/api/core/ApolloClient#query"},"ApolloClient queryOptions")," except ",r.createElement(t.code,null,"query")," document."),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useApolloClientModule")),r.createElement(t.td,null,r.createElement(t.code,null,"boolean")),r.createElement(t.td,null,"If true, ApolloClient is picked from modules. The ",r.createElement(o.A,{anchor:"apolloclient-module"},"ApolloClient Module")," must be created manually."),r.createElement(t.td,null,r.createElement(t.code,null,"false"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 40: GraphQL module settings]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"methods-3"},"Methods"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Argument(s)"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"cancel")),r.createElement(t.td,null,"Cancels current query. The pending query is aborted."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"clear")),r.createElement(t.td,null,"Calls ",r.createElement(t.code,null,"cancel()")," and also clears errors and results. Emits a GRAPHQL_MODULE_CLEARED event."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getClientErrors")),r.createElement(t.td,null,"Returns array of query errors and/or errors in the result data."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,r.createElement(t.code,null,"ApolloError[]"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getData")),r.createElement(t.td,null,"Returns the ",r.createElement(t.code,null,"data")," property of last successful query result."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,"The ",r.createElement(t.code,null,"result.data")," of latest query or ",r.createElement(t.code,null,"undefined"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getError")),r.createElement(t.td,null,"Returns a query error."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,r.createElement(t.code,null,"ApolloError")," or ",r.createElement(t.code,null,"undefined"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getQueryPromise")),r.createElement(t.td,null,"Returns the current pending query promise or an immediately rejected promise."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,r.createElement(t.code,null,"Promise<ApolloQueryResult>"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getResult")),r.createElement(t.td,null,"Returns the latest query result."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,r.createElement(t.code,null,"ApolloQueryResult")," or ",r.createElement(t.code,null,"undefined"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isLoading")),r.createElement(t.td,null,"Returns true if a query fetch is currently active."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,r.createElement(t.code,null,"boolean"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isPending")),r.createElement(t.td,null,"Returns true if the module is waiting for api tokens or query results."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,r.createElement(t.code,null,"boolean"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"query")),r.createElement(t.td,null,"Executes a query."),r.createElement(t.td,null,r.createElement(t.code,null,"Partial<GraphQLModuleModuleProps>")),r.createElement(t.td,null,r.createElement(t.code,null,"Promise<QueryResult>"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"queryCache")),r.createElement(t.td,null,"Calls ",r.createElement(t.code,null,"query(options)")," with ",r.createElement(t.code,null,"fetchPolicy: 'cache-only'")," in options."),r.createElement(t.td,null,r.createElement(t.code,null,"Partial<GraphQLModuleModuleProps>")),r.createElement(t.td,null,r.createElement(t.code,null,"Promise<QueryResult>"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"queryServer")),r.createElement(t.td,null,"Calls ",r.createElement(t.code,null,"query(options)")," with ",r.createElement(t.code,null,"fetchPolicy: 'network-only'")," in options."),r.createElement(t.td,null,r.createElement(t.code,null,"Partial<GraphQLModuleModuleProps>")),r.createElement(t.td,null,r.createElement(t.code,null,"Promise<QueryResult>"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"setClient")),r.createElement(t.td,null,"Sets the graphQLClient."),r.createElement(t.td,null,r.createElement(c.A,{href:"https://www.apollographql.com/docs/react/get-started"},"ApolloClient")),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"waitForApiTokens")),r.createElement(t.td,null,"Returns a promise that is resolved when api tokens are found."),r.createElement(t.td,null,r.createElement(t.code,null,"timeout?: number"),". Time in milliseconds when the Promise is rejected. If omitted, the promise will not timeout."),r.createElement(t.td,null,r.createElement(t.code,null,"Promise<void>"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 41: GraphQL module methods]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"other-exported-utility-functions-3"},"Other exported utility functions"),"\n",r.createElement(t.p,null,"The following functions can be imported and used without the ",r.createElement(t.code,null,"GraphQL module")," module:"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Function"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Argument(s)"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"createGraphQLModule(options)")),r.createElement(t.td,null,"Creates the module."),r.createElement(t.td,null,r.createElement(t.code,null,"GraphQLModuleModuleProps"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"GraphQLModule"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"mergeQueryOptionContexts(options, context)")),r.createElement(t.td,null,"Deep merges given context to ",r.createElement(t.code,null,"queryOptions"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"QueryOptions, QueryOptions['context']")),r.createElement(t.td,null,"QueryOptions")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"mergeHeadersToQueryOptions")),r.createElement(t.td,null,"Deep merges given headers to ",r.createElement(t.code,null,"queryOptions.context"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"QueryOptions, Record")),r.createElement(t.td,null,"QueryOptions")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"mergeAuthorizationHeaderToQueryOptions")),r.createElement(t.td,null,"Sets ",r.createElement(t.code,null,"authorization: <given header>")," to ",r.createElement(t.code,null,"queryOptions.context.headers"),". Typically the value is ",r.createElement(t.code,null,"Bearer: <token>"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"QueryOptions, string")),r.createElement(t.td,null,"QueryOptions")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"mergeQueryOptions")),r.createElement(t.td,null,"Deep merges given queryOptions to another queryOptions object"),r.createElement(t.td,null,r.createElement(t.code,null,"QueryOptions, QueryOptions")),r.createElement(t.td,null,"QueryOptions")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"setBearerToQueryOptions")),r.createElement(t.td,null,"Shortcut for calling ",r.createElement(t.code,null,"mergeAuthorizationHeaderToQueryOptions(options, 'Bearer: <token>')"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"QueryOptions, string")),r.createElement(t.td,null,"QueryOptions")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"appendFetchOptions")),r.createElement(t.td,null,"Appends fetchOptions to ",r.createElement(t.code,null,"queryOptions.context"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"QueryOptions, Partial<RequestInit>")),r.createElement(t.td,null,"QueryOptions")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 42: Other GraphQL module functions]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"state-change-signals-3"},"State change signals"),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"GraphQL module")," has no state changes."),"\n",r.createElement(t.h5,{id:"error-signal-types-3"},"Error signal types"),"\n",r.createElement(t.p,null,"Returned errors are instances of the ",r.createElement(t.code,null,"GraphQLModuleError"),". It is an extended Error object with type property and multiple ",r.createElement(t.code,null,".is...")," getters for checking error types. The error object also contains the thrown error in ",r.createElement(t.code,null,"error.originalError")," property."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Error type"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Error object property to check"),r.createElement(t.th,null,"Utility function to check the signal"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"GRAPHQL_LOAD_FAILED")),r.createElement(t.td,null,"Query failed."),r.createElement(t.td,null,r.createElement(t.code,null,"error.isLoadError")),r.createElement(t.td,null,r.createElement(t.code,null,"isGraphQLModuleLoadFailedSignal(signal) "))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"GRAPHQL_NO_CLIENT")),r.createElement(t.td,null,"Query failed, because client is not provided."),r.createElement(t.td,null,r.createElement(t.code,null,"error.isNoClientError")),r.createElement(t.td,null,r.createElement(t.code,null,"isGraphQLModuleNoClientErrorSignal(signal) "))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"GRAPHQL_NO_API_TOKENS")),r.createElement(t.td,null,"Api tokens are required, but not found or fetching them timed out."),r.createElement(t.td,null,r.createElement(t.code,null,"error.isNoApiTokensError")),r.createElement(t.td,null,r.createElement(t.code,null,"isGraphQLModuleNoApiTokensErrorSignal(signal) "))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 43: GraphQL module error signal types]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"event-signals-3"},"Event signals"),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"GraphQL module")," also emits events when an action is complete or starting."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Event type"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Utility function to check the signal"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"GRAPHQL_MODULE_LOADING")),r.createElement(t.td,null,"Query has started."),r.createElement(t.td,null,r.createElement(t.code,null,"isGraphQLModuleLoadingSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"GRAPHQL_MODULE_LOAD_SUCCESS")),r.createElement(t.td,null,"Query was successful."),r.createElement(t.td,null,r.createElement(t.code,null,"isGraphQLModuleLoadSuccessSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"GRAPHQL_MODULE_LOAD_ABORTED")),r.createElement(t.td,null,"Query was aborted."),r.createElement(t.td,null,r.createElement(t.code,null,"isGraphQLModuleLoadAbortedSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"GRAPHQL_MODULE_CLEARED")),r.createElement(t.td,null,"The module was cleared."),r.createElement(t.td,null,r.createElement(t.code,null,"isGraphQLModuleClearedSignal(signal)"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 44: Other GraphQL module event types]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"dedicated-signal-triggers-3"},"Dedicated signal triggers"),"\n",r.createElement(t.p,null,"Triggers for ",r.createElement(t.code,null,"GraphQL module"),"signals. These trigger signals only originated from the ",r.createElement(t.code,null,"GraphQL module"),"."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Generic triggers"),r.createElement(t.th,null,"Required signal props to trigger the listener"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllGraphQLModuleErrors")),r.createElement(t.td,null,r.createElement(t.code,null,"GraphQL module")," namespace and type ",r.createElement(t.code,null,"error"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllGraphQLModuleEvents")),r.createElement(t.td,null,r.createElement(t.code,null,"GraphQL module")," namespace and type ",r.createElement(t.code,null,"event"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllGraphQLModuleSignals")),r.createElement(t.td,null,r.createElement(t.code,null,"GraphQL module")," namespace.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 45: GraphQL module triggers]"),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"Event triggers require the signal to have a ",r.createElement(t.code,null,"GraphQL module")," namespace and type ",r.createElement(t.code,null,"event"),".\n",r.createElement(t.code,null,"Signal.payload.type")," contains one of the ",r.createElement(o.A,{anchor:"event-signals-3"},"events"),"."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Event triggers"),r.createElement(t.th,null,"Required signal props to trigger the listener"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"graphQLModuleClearedTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching event.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"graphQLModuleLoadAbortedTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching event.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"graphQLModuleLoadingTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching event.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"graphQLModuleLoadSuccessTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching event.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 46: GraphQL module event triggers]"),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"Error triggers require the signal to have a ",r.createElement(t.code,null,"GraphQL module"),"namespace and type ",r.createElement(t.code,null,"error"),".\n",r.createElement(t.code,null,"Signal.payload.type")," contains one of the ",r.createElement(o.A,{anchor:"error-signal-types-3"},"errors"),"."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Error triggers"),r.createElement(t.th,null,"Required signal props to trigger the listener"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"loadFailedErrorTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching error.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"noApiTokensErrorTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching error.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"noClientErrorTrigger")),r.createElement(t.td,null,r.createElement(t.code,null,"payload.type")," has a matching error.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 47: GraphQL module error triggers]"),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"getting-signal-payloads-3"},"Getting signal payloads"),"\n",r.createElement(t.p,null,"Sometimes the most significant part of a signal is the payload. There are predefined payload getters for the ",r.createElement(t.code,null,"GraphQL module"),".\nIf the given signal is not from the ",r.createElement(t.code,null,"GraphQL module")," or is not given type, the function returns null. So there is no need to pre-check the signal namespace or type."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Payload getter"),r.createElement(t.th,null,"Returns"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getGraphQLModuleErrorPayload")),r.createElement(t.td,null,r.createElement(t.code,null,"null")," or ",r.createElement(o.A,{anchor:"error-signal-types-3"},"GraphQLModuleError")," object.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getGraphQLModuleEventPayload")),r.createElement(t.td,null,r.createElement(t.code,null,"null")," or ",r.createElement(t.code,null,"{type, data}"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 48: GraphQL module signal payload getters]"),r.createElement(t.td)))),"\n",r.createElement(t.h4,{id:"apolloclient-module"},"ApolloClient Module"),"\n",r.createElement(t.p,null,"Appending api tokens to every query and manually waiting for api token renewal is a complicated task. The ApolloClient module links itself to the Api token client and automatically appends tokens and also awaits for token renewals."),"\n",r.createElement(t.p,null,"The module can also be used without api tokens. This module does not emit signals."),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"ApolloClient Module")," must be manually added to the ",r.createElement(t.code,null,"<LoginProvider>"),". Preferably use the ",r.createElement(E,null,"LoginProviderWithApolloContext")," which also creates the ",r.createElement(t.code,null,"ApolloContext"),"."),"\n",r.createElement(a.Ay,null,r.createElement(t.pre,null,r.createElement(t.code,{className:"language-jsx"},"import { createApolloClientModule } from 'hds-react';\n\nconst options = {\n  clientOptions:{\n    // apollo client option.\n  },\n  tokenSetter: (headers, apiTokens) => {\n    return {\n      Authentication: apiTokens['tokenToAppend'],\n    };\n  },\n};\nconst apolloClientModule = createApolloClientModule(options);\n\n<LoginProviderWithApolloContext {...loginProps} modules={[apolloClientModule]}></LoginProviderWithApolloContextx  >;\n"))),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"createApolloClientModule")," function is a Generic Typescript function: ",r.createElement(t.code,null,"createApolloClientModule<T = InMemoryCache>"),". The generic describes the cache type of the ApolloClient and is not usually changed."),"\n",r.createElement(t.h5,{id:"settings-4"},"Settings"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Type"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Default value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"apiTokensWaitTime")),r.createElement(t.td,null,r.createElement(t.code,null,"number")),r.createElement(t.td,null,"How long in milliseconds should api tokens be awaited before stopping the wait time. This will never reject any queries even if timeout is reached."),r.createElement(t.td,null,r.createElement(t.code,null,"15000"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"clientOptions")),r.createElement(t.td,null,r.createElement(t.code,null,"Partial<ApolloClientOptions>")),r.createElement(t.td,null,'Options for the ApolloClient. If "uri" option is given, a HttpLink is automatically created from it. The module adds its own AplloLink(s) before other links.'),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"keepTokensWhileRenewing")),r.createElement(t.td,null,r.createElement(t.code,null,"boolean")),r.createElement(t.td,null,"If true, the stored api tokens are not cleared when renewal starts."),r.createElement(t.td,null,r.createElement(t.code,null,"true"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"preventQueriesWhileRenewing")),r.createElement(t.td,null,r.createElement(t.code,null,"boolean")),r.createElement(t.td,null,"If true, a ApolloLink is added to wait for possible api token renewal to end. If false, there might be times when queries are made with old api tokens. Unlikely, but possible."),r.createElement(t.td,null,r.createElement(t.code,null,"true"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"tokenSetter")),r.createElement(t.td,null,r.createElement(t.code,null,"(headers:unknown,tokens:TokenData)=> Record<string,string>")),r.createElement(t.td,null,"The returned object is appended to the headers. First argument type depends on the request. Can be an object or Headers."),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 49: ApolloClient module settings]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"methods-4"},"Methods"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Argument(s)"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getClient")),r.createElement(t.td,null,"Returns the ApolloClient."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,r.createElement(t.code,null,"ApolloClient"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getTracker")),r.createElement(t.td,null,"Returns the apiTokenClient tracker."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,r.createElement(t.code,null,"ApiTokenTracker"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"reset")),r.createElement(t.td,null,"Resets the client and apiTokenTracker"),r.createElement(t.td,null,"-"),r.createElement(t.td,null,r.createElement(t.code,null,"Promise<void>"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 50: ApolloClient module methods]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"The ApolloClient does not emit any signals. Therefore there are no hooks or triggers related to signals."),"\n",r.createElement(t.h4,{id:"tokenizedfetch-module"},"TokenizedFetch Module"),"\n",r.createElement(t.p,null,"Loading data from a server may require user authentication and api tokens. The TokenizedFetch module listens to the Api token client and appends api tokens to the request headers."),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"TokenizedFetch Module")," must be manually added to the ",r.createElement(t.code,null,"<LoginProvider>"),"."),"\n",r.createElement(a.Ay,null,r.createElement(t.pre,null,r.createElement(t.code,{className:"language-jsx"},"import { createTokenizedFetchModule } from 'hds-react';\n\nconst options = {\n  tokenSetter: (headers, apiTokens) => {\n    return {\n      Authentication: apiTokens['tokenToAppend'],\n    };\n  },\n};\nconst tokenizedFetchModule = createTokenizedFetchModule(options);\n\n<LoginProvider {...loginProps} modules={[tokenizedFetchModule]}></LoginProvider>;\n"))),"\n",r.createElement(t.h5,{id:"settings-5"},"Settings"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Type"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Default value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"preventQueriesWhileRenewing")),r.createElement(t.td,null,r.createElement(t.code,null,"string")),r.createElement(t.td,null,"If true, a ApolloLink is added to wait for possible api token renewal to end. If false, there might be times when queries are made with old api tokens. Unlikely, but possible."),r.createElement(t.td,null,r.createElement(t.code,null,"true"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"tokenSetter")),r.createElement(t.td,null,r.createElement(t.code,null,"(headers:unknown, tokens:TokenData) => Record<string,string>")),r.createElement(t.td,null,"The returned object is appended to the headers. First argument type depends on the request. Can be an object or Headers."),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 51: TokenizedFetch module settings]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"methods-5"},"Methods"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Argument(s)"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"tokenizedFetch")),r.createElement(t.td,null,"Proxy to the native ",r.createElement(t.code,null,"fetch")," function. Headers returned from the optional ",r.createElement(t.code,null,"tokenSetter")," are appended to the Headers passed as args."),r.createElement(t.td,null,"Same as native ",r.createElement(t.code,null,"fetch"),"."),r.createElement(t.td,null,"Same as native ",r.createElement(t.code,null,"fetch"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"tokenizedFetchWithSignals")),r.createElement(t.td,null,"Calls the tokenizedFetch, but also emits start and end signals. If fetch fails, an error signal is emitted. Aborted requests are emitted as event signals. Abort and start signals can be distinguished from actual responses with ",r.createElement(t.code,null,"isTokenizedFetchStartedSignal(signal)")," and ",r.createElement(t.code,null,"isTokenizedFetchAbortedSignal(signal)"),". Automatic response handling uses the ",r.createElement(t.code,null,"response.json()")," to parse response from data. If the data is not json, do not use automation and this function. Use ",r.createElement(t.code,null,"emitResponse(promise.then(<your parse function>))"),"."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getTracker")),r.createElement(t.td,null,"Returns the apiTokenClient tracker."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"reset")),r.createElement(t.td,null,"Emits reset signal and resets the apiTokenTracker."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isAbortError")),r.createElement(t.td,null,"Utility to test was the returned error an AbortError."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"emitResponse")),r.createElement(t.td,null,"The promise returned from tokenizedFetch can be passed to this function which will emit the results as event signals or error signals."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"emitFetchStart")),r.createElement(t.td,null,"Emits a signal where ",r.createElement(t.code,null,"payload.type = ${responseSignalType}\\_STARTED"),"."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"addAbortSignal")),r.createElement(t.td,null,"Adds abort signal to FetchInit props and returns a function that will abort the request."),r.createElement(t.td,null,"-"),r.createElement(t.td,null,"-")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 52: TokenizedFetch module methods]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"other-exported-utility-functions-4"},"Other exported utility functions"),"\n",r.createElement(t.p,null,"The following functions can be imported and used without the ",r.createElement(t.code,null,"TokenizedFetch module")," module:"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Function"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Argument(s)"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"createTokenizedFetchModule(options)")),r.createElement(t.td,null,"Creates the module."),r.createElement(t.td,null,r.createElement(t.code,null,"TokenizedFetchModuleProps")),r.createElement(t.td,null,r.createElement(t.code,null,"TokenizedFetchModule"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isTokenizedFetchStartedSignal(signal)")),r.createElement(t.td,null,"Returns true if the signal was emitted to indicate fetch start."),r.createElement(t.td,null,r.createElement(t.code,null,"Signal")),r.createElement(t.td,null,r.createElement(t.code,null,"boolean"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isTokenizedFetchAbortedSignal(signal)")),r.createElement(t.td,null,"Returns true if the signal was emitted to indicate fetch abort."),r.createElement(t.td,null,r.createElement(t.code,null,"Signal")),r.createElement(t.td,null,r.createElement(t.code,null,"boolean"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 53: Other TokenizedFetch module functions]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"state-change-signals-4"},"State change signals"),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"TokenizedFetch module")," has no state changes."),"\n",r.createElement(t.h5,{id:"error-signal"},"Error signal"),"\n",r.createElement(t.p,null,"The module emits only one kind of error. They are instances of the ",r.createElement(t.code,null,"TokenizedFetchModuleError"),". It is an extended Error object with type property and a ",r.createElement(t.code,null,"hasResponseIdentifierMatch")," helper function to identify fetch calls. The error object also contains the thrown error in ",r.createElement(t.code,null,"error.originalError")," property."),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"hasResponseIdentifierMatch(type:string)=>boolean")," returns true if the error originated from a fetch with given id. Ids are used only when using ",r.createElement(t.code,null,"tokenizedFetchWithSignals")," or ",r.createElement(t.code,null,"emitResponse"),"."),"\n",r.createElement(t.h5,{id:"event-signals-4"},"Event signals"),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"TokenizedFetch module")," also emits events only when the ",r.createElement(t.code,null,"tokenizedFetchWithSignals")," is used. Events can also be manually emitted with ",r.createElement(t.code,null,"emitFetchStart")," or ",r.createElement(t.code,null,"emitResponse")),"\n",r.createElement(t.p,null,"The simplest way to track signals is ",r.createElement(E,{anchor:"useTokenizedFetchTracking"},"with hooks"),"."),"\n",r.createElement(t.h5,{id:"dedicated-signal-triggers-4"},"Dedicated signal triggers"),"\n",r.createElement(t.p,null,"Triggers for ",r.createElement(t.code,null,"TokenizedFetch module")," signals. These trigger signals only originated from the ",r.createElement(t.code,null,"TokenizedFetch module"),"."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Generic triggers"),r.createElement(t.th,null,"Required signal props to trigger the listener"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllTokenizedFetchErrors")),r.createElement(t.td,null,r.createElement(t.code,null,"TokenizedFetch module")," namespace and type ",r.createElement(t.code,null,"error"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllTokenizedFetchEvents")),r.createElement(t.td,null,r.createElement(t.code,null,"TokenizedFetch module")," namespace and type ",r.createElement(t.code,null,"event"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"triggerForAllTokenizedFetchSignals")),r.createElement(t.td,null,r.createElement(t.code,null,"TokenizedFetch module")," namespace.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 54: TokenizedFetch module triggers]"),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"createTriggerPropsForTokenizedFetchResponseSignals(identifier: string): SignalTrigger")," creates a ",r.createElement(t.code,null,"SignalTrigger")," that returns true if the signal is an event signal from the ",r.createElement(t.code,null,"TokenizedFetch Module")," and its payload has given identifier."),"\n",r.createElement(t.h5,{id:"getting-signal-payloads-4"},"Getting signal payloads"),"\n",r.createElement(t.p,null,"Sometimes the most significant part of a signal is the payload. There are predefined payload getters for the ",r.createElement(t.code,null,"TokenizedFetch module"),".\nIf the given signal is not from the ",r.createElement(t.code,null,"TokenizedFetch module")," or is not given type, the function returns null. So there is no need to pre-check the signal namespace or type."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Payload getter"),r.createElement(t.th,null,"Returns"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getTokenizedFetchModuleEventPayload")),r.createElement(t.td,null,r.createElement(t.code,null,"null")," or ",r.createElement(t.code,null,"EventPayload"),". The payload may be a ",r.createElement(t.code,null,"Response")," or information about ",r.createElement(t.code,null,"start")," or ",r.createElement(t.code,null,"abort")," signals.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getTokenizedFetchModuleErrorPayload")),r.createElement(t.td,null,r.createElement(t.code,null,"null")," or ",r.createElement(t.code,null,"Error"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getTokenizedFetchPayloadData")),r.createElement(t.td,null,r.createElement(t.code,null,"null")," or the actual server ",r.createElement(t.code,null,"Response"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 55: TokenizedFetch module signal payload getters]"),r.createElement(t.td)))),"\n",r.createElement(t.h4,{id:"oidc-client-hooks"},"Oidc client hooks"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Hook"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useAuthenticatedUser")),r.createElement(t.td,null,"Returns a ",r.createElement(d,null,"user")," object, if it is valid and authenticated and passes ",r.createElement(d,null,"isValidUser()")," check or if the user is currently renewing."),r.createElement(t.td,null,r.createElement(d,null,"User")," or ",r.createElement(t.code,null,"null"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useCachedAmr")),r.createElement(t.td,null,"Returns the user's ",r.createElement(t.code,null,"amr")," value. It is cached because in some cases it must be decrypted from ",r.createElement(t.code,null,"id_token"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"string[]"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useOidcClient")),r.createElement(t.td,null,"Returns the ",r.createElement(t.code,null,"Oidc client"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"OidcClient"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useOidcClientTracking")),r.createElement(t.td,null,"Returns an array of ",r.createElement(t.code,null,"[Signal, resetFunction, oidcClient instance]"),". The hook forces the component using it to re-render each time the listener is triggered."),r.createElement(t.td,null,r.createElement(t.code,null,"[Signal or undefined, ()=>void, OidcClient]"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 56: Oidc client hooks]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"The usage of the ",r.createElement(t.code,null,"Oidc client")," hooks is described in the ",r.createElement(E,{anchor:"useoidcclient"},"usage")," section."),"\n",r.createElement(t.h4,{id:"api-tokens-client-hooks"},"Api tokens client hooks"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Hook"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useApiTokens")),r.createElement(t.td,null,"Returns functions for checking tokens and the status of renewal."),r.createElement(t.td,null,r.createElement(t.code,null,"{getStoredApiTokens(), isRenewing()}"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useApiTokensClient")),r.createElement(t.td,null,"Returns the ",r.createElement(t.code,null,"Api tokens client"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"ApiTokensClient"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useApiTokensClientTracking")),r.createElement(t.td,null,"Returns an array of ",r.createElement(t.code,null,"[Signal, resetFunction, apiTokensClient instance]"),". The hook forces the component using it to re-render each time the listener is triggered."),r.createElement(t.td,null,r.createElement(t.code,null,"[Signal or undefined, ()=>void, ApiTokensClient]"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 57: Api tokens client hooks]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"The usage of the ",r.createElement(t.code,null,"Api tokens client")," hooks is described in the ",r.createElement(E,{anchor:"useapitokensclient"},"usage")," section."),"\n",r.createElement(t.h4,{id:"session-poller-hooks"},"Session poller hooks"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Hook"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useSessionPoller")),r.createElement(t.td,null,"Returns the ",r.createElement(t.code,null,"Session poller"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"SessionPoller"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useSessionPollerTracking")),r.createElement(t.td,null,"Returns an array of ",r.createElement(t.code,null,"[Signal, resetFunction, sessionPoller instance]"),". The hook forces the component using it to re-render each time the listener is triggered."),r.createElement(t.td,null,r.createElement(t.code,null,"[Signal or undefined, ()=>void, SessionPoller]"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 58: Session poller hooks]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"The usage of the ",r.createElement(t.code,null,"Session poller")," hooks is described in the ",r.createElement(E,{anchor:"usesessionpoller"},"usage")," section."),"\n",r.createElement(t.h4,{id:"graphql-module-hooks"},"GraphQL module hooks"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Hook"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useGraphQLModule")),r.createElement(t.td,null,"Returns the ",r.createElement(t.code,null,"GraphQL module"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"GraphQLModule"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useGraphQLModuleTracking")),r.createElement(t.td,null,"Returns ",r.createElement(t.code,null,"[Signal, resetFunction, GraphQL module instance]"),". The hook forces the component using it to re-render each time the listener is triggered."),r.createElement(t.td,null,r.createElement(t.code,null,"[signal, reset function, GraphQL module instance]"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useGraphQL")),r.createElement(t.td,null,"Mimics the ",r.createElement(c.A,{href:"https://www.apollographql.com/docs/react/data/queries#manual-execution-with-uselazyquery"},"useLazyQuery")," hook of the Apollo GraphQL library. The hook forces the component using it to re-render each time the module emits a signal."),r.createElement(t.td,null,r.createElement(t.code,null,"[query, {data, error, loading, refetch}]"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 59: GraphQL module hooks]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"The usage of the ",r.createElement(t.code,null,"GraphQL module")," hooks is described in the ",r.createElement(E,{anchor:"usegraphql"},"usage")," section."),"\n",r.createElement(t.h4,{id:"apolloclient-module-hooks"},"ApolloClient module hooks"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Hook"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useApolloClientModule")),r.createElement(t.td,null,"Returns the ",r.createElement(t.code,null,"ApolloClient module"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"ApolloClientModule"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useApolloClient")),r.createElement(t.td,null,"Returns the created ",r.createElement(t.code,null,"ApolloClient"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"ApolloClient"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 60: ApolloClient module hooks]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"The usage of the ",r.createElement(t.code,null,"ApolloClient module")," hooks is described in the ",r.createElement(E,{anchor:"useapolloclient"},"usage")," section."),"\n",r.createElement(t.h4,{id:"tokenizedfetch-module-hooks"},"TokenizedFetch module hooks"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Hook"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useTokenizedFetchModule")),r.createElement(t.td,null,"Returns the ",r.createElement(t.code,null,"TokenizedFetch module"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"TokenizedFetch"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useTokenizedFetch")),r.createElement(t.td,null,"Returns a function identical to the native ",r.createElement(t.code,null,"fetch")," function.."),r.createElement(t.td,null,"The native ",r.createElement(t.code,null,"fetch")," function")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useTokenizedFetchModuleTracking")),r.createElement(t.td,null,"Returns ",r.createElement(t.code,null,"[Signal, resetFunction, TokenizedFetch module instance]"),". The hook forces the component using it to re-render each time the listener is triggered."),r.createElement(t.td,null,r.createElement(t.code,null,"[signal, reset function, TokenizedFetch module instance]"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useTokenizedFetchWithSignals")),r.createElement(t.td,null,"This hook works just like the ",r.createElement(t.code,null,"useTokenizedFetch")," except it emits signals so individual fetches can be tracked."),r.createElement(t.td,null,r.createElement(t.code,null,"Promise<Response>"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useTokenizedFetchResponseTracking")),r.createElement(t.td,null,"This hook works just like the ",r.createElement(t.code,null,"useTokenizedFetchModuleTracking")," except it tracks only signals emitted by the module ",r.createElement(t.strong,null,"and")," with given identifier."),r.createElement(t.td,null,r.createElement(t.code,null,"Signal"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 61: TokenizedFetch module hooks]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h4,{id:"generic-signal-hooks"},"Generic signal hooks"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Hook"),r.createElement(t.th,null,"Arguments"),r.createElement(t.th,null,"Return value"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useSignalListener(listener)")),r.createElement(t.td,null,"The listener function. There are no trigger props. The listener is always called when any signal is emitted in any namespace. The listener should return ",r.createElement(t.code,null,"true")," if the component should re-render."),r.createElement(t.td,null,"An array of ",r.createElement(t.code,null,"[Signal or undefined, ()=>void]"),". Latter is a reset function that clears the signal and re-renders the component.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useSignalTrackingWithCallback(triggerProps, callback)")),r.createElement(t.td,null,"Signal props need to match the incoming signal to trigger the callback function. The hook never causes a re-render. The callback must do it."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"useSignalTrackingWithReturnValue(triggerProps)")),r.createElement(t.td,null,"Signal props need to match the incoming signal to trigger re-rendering. The hook creates a trigger from the props and re-renders if the trigger returns ",r.createElement(t.code,null,"true"),"."),r.createElement(t.td,null,"Same as above.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 62: Generic signal listener hooks]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Important!")," The listener passed to ",r.createElement(t.code,null,"useSignalListener")," must be memoized or the hook will attach a new listener on each render because the props changed. The old one is disposed of but to avoid unnecessary listeners, use memoization with ",r.createElement(t.code,null,"useMemo")," or ",r.createElement(t.code,null,"useCallback"),". Note that all ",r.createElement(t.code,null,"triggerFor...")," functions are constants and do not need memoization."),"\n",r.createElement(t.p,null,r.createElement(t.code,null,"useSignalTrackingWithReturnValue")," and ",r.createElement(t.code,null,"useSignalListener")," store their arguments in React refs, so memoization is not needed."),"\n",r.createElement(t.p,null,"The usage of the signal hooks is described in the ",r.createElement(E,{anchor:"generic-signal-hooks"},"usage")," section."),"\n",r.createElement(t.h4,{id:"beacon"},"Beacon"),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"beacon")," is the controller of all signals and listeners. It emits all signals and connects all modules. It also stores all modules.\nModules are added and connected by calling ",r.createElement(t.code,null,"beacon.addContext(module)"),". The beacon then calls ",r.createElement(t.code,null,"module.connect()")," with the beacon as the only argument. After that, the module can listen to and emit signals."),"\n",r.createElement(t.h5,{id:"beacon-methods"},"Beacon methods"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Name"),r.createElement(t.th,null,"Arguments"),r.createElement(t.th,null,"Return values"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"addListener(signalProps, trigger)")),r.createElement(t.td,null,"Signal props that trigger the listener or ready-made trigger function."),r.createElement(t.td,null,"Disposer function that removes the listener.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"addSignalContext(module)")),r.createElement(t.td,null,"Adds a module and its context. The ",r.createElement(t.code,null,"connect")," method of the added module is called immediately."),r.createElement(t.td,null,"Disposer function to remove context.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"clear()")),r.createElement(t.td,null,"Removes all data."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"emit(signal)")),r.createElement(t.td,null,"A signal to emit."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getAllSignalContextsAsObject()")),r.createElement(t.td,null,"Returns all stored contexts as on object of ",r.createElement(t.code,null,"{[context.namespace]:context}"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"Object"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getSignalContext(module)")),r.createElement(t.td,null,"Returns context for the given namespace."),r.createElement(t.td,null,"Context module or ",r.createElement(t.code,null,"undefined"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 63: Beacon methods]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"important-1"},"Important"),"\n",r.createElement(t.p,null,"Like in React, once a signal (an event in React) is emitted, it is destroyed after all listeners have been called. Copy the object if it is needed for later use."),"\n",r.createElement(t.h4,{id:"signals"},"Signals"),"\n",r.createElement(t.p,null,"Signals have a ",r.createElement(t.code,null,"type")," property to separate, for example errors, from other signals. Signals are easier to create with ",r.createElement(o.A,{anchor:"create"},"utility functions")," than by manually setting all properties."),"\n",r.createElement(t.h5,{id:"the-signal-object"},"The signal object"),"\n",r.createElement(t.p,null,"A signal is an object with the following properties:"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Property"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Value type"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"context")),r.createElement(t.td,null,"Optional. The emitting module instance. For example an ",r.createElement(t.code,null,"Oidc client")," instance. This is not required, but if missing, the beacon will set it by finding the context with ",r.createElement(t.code,null,"signal.namespace"),"."),r.createElement(t.td,null,r.createElement(t.code,null,"object"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"namespace")),r.createElement(t.td,null,r.createElement(t.strong,null,"Required"),". The namespace is the name of the module that emitted the signal."),r.createElement(t.td,null,r.createElement(t.code,null,"string"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"payload")),r.createElement(t.td,null,"Optional. The payload contains metadata. For example type of the event. A payload can also be an Error object."),r.createElement(t.td,null,"unknown")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"type")),r.createElement(t.td,null,r.createElement(t.strong,null,"Required"),". Type of the signal. Can be any string, but HDS emits ",r.createElement(t.code,null,"init"),", ",r.createElement(t.code,null,"error"),", ",r.createElement(t.code,null,"event")," and ",r.createElement(t.code,null,"stateChange")," signals."),r.createElement(t.td,null,r.createElement(t.code,null,"string"))),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 64: Signal object properties]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"signal-types-and-payloads"},"Signal types and payloads"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Signal type"),r.createElement(t.th,null,"Importable variable"),r.createElement(t.th,null,"Payload"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"error")),r.createElement(t.td,null,r.createElement(t.code,null,"errorSignalType")),r.createElement(t.td,null,"Payload is an error object. This way ",r.createElement(t.code,null,"payload.type")," matches ",r.createElement(t.code,null,"error.type"),".")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"event")),r.createElement(t.td,null,r.createElement(t.code,null,"eventSignalType")),r.createElement(t.td,null,"Usually ",r.createElement(t.code,null,"{type:event type}")," indicating what kind of event is emitted. May also have ",r.createElement(t.code,null,"data")," property containing for example User or Tokens.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"init")),r.createElement(t.td,null,r.createElement(t.code,null,"initSignalType")),r.createElement(t.td,null,"Emitted when all modules are connected and everything is ready. Emitted only once. Note that modules may emit other signals before this.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"stateChange")),r.createElement(t.td,null,r.createElement(t.code,null,"stateChangeSignalType")),r.createElement(t.td,null,r.createElement(t.code,null,"{state, previousState}")," New state and the previous state, if any.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 65: Signal types and payloads]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"Custom modules may emit any other kind of signal with different payloads."),"\n",r.createElement(t.h5,{id:"emitting-signals"},"Emitting signals"),"\n",r.createElement(t.p,null,"Only custom modules can emit signals. See the ",r.createElement(h,{anchor:"emitting-signals"},"custom module documentation"),"."),"\n",r.createElement(t.p,null,"See also ",r.createElement(h,{anchor:"custom-namespaced-beacons-for-modules"},"custom namespaced beacons"),"."),"\n",r.createElement(t.h5,{id:"important-2"},"Important"),"\n",r.createElement(t.p,null,"If a listener is added while signaling and it is triggered by the currently emitted signal, a loop could be created. This could occur when using hooks and not memoizing listeners. Avoid emitting signals inside listeners."),"\n",r.createElement(t.h5,{id:"listening-to-signals"},"Listening to signals"),"\n",r.createElement(t.p,null,"A signal listener is a function that receives one argument: the signal. A listener can listen to all signals or just one type of signal with a certain namespace.\nListeners can be even more specific and listen to signals with certain payloads. In short, a listener can listen to any properties of the signal and is triggered when all properties match."),"\n",r.createElement(t.p,null,"The listener is called only if the emitted signal matches the given props."),"\n",r.createElement(t.p,null,"For example, if the trigger props (the first argument) passed to ",r.createElement(t.code,null,"beacon.addListener(trigger, listener)")," is ",r.createElement(t.code,null,"{ type:'error' }"),", the listener (second argument) is called when the emitted signal has a matching type. It does not matter what other props the signal has."),"\n",r.createElement(t.p,null,"If the trigger props are ",r.createElement(t.code,null,"{ namespace:'myModule', payload:{ type: 'click' } }"),", the emitted signal must have those properties with the same, exact values. Other properties are not checked."),"\n",r.createElement(t.p,null,"The trigger can also be a function. Internally all triggers are converted to functions."),"\n",r.createElement(t.p,null,"Instead of writing signal types as strings, it is better to use predefined triggers:"),"\n",r.createElement(t.ul,null,"\n",r.createElement(t.li,null,r.createElement(o.A,{anchor:"dedicated-signal-triggers"},"Oidc client triggers"),"."),"\n",r.createElement(t.li,null,r.createElement(o.A,{anchor:"dedicated-signal-triggers-1"},"Api tokens client triggers"),"."),"\n",r.createElement(t.li,null,r.createElement(o.A,{anchor:"dedicated-signal-triggers-2"},"Session poller triggers"),"."),"\n",r.createElement(t.li,null,r.createElement(o.A,{anchor:"dedicated-signal-triggers-3"},"GraphQL module triggers"),"."),"\n",r.createElement(t.li,null,r.createElement(o.A,{anchor:"dedicated-signal-triggers-4"},"TokenizedFetch module triggers"),"."),"\n",r.createElement(t.li,null,r.createElement(o.A,{anchor:"dedicated-signal-triggers"},"Generic triggers"),"."),"\n"),"\n",r.createElement(t.h5,{id:"generic-triggers"},"Generic triggers"),"\n",r.createElement(t.p,null,"Generic ",r.createElement(t.code,null,"create...")," functions create trigger functions from given props. Creator functions are not objects, so they can be used to create triggers for multiple namespaces, payloads and so on."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Trigger creator"),r.createElement(t.th,null,"Arguments"),r.createElement(t.th,null,"Default"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"createInitTriggerProps(namespace)")),r.createElement(t.td,null,"Namespace to listen to. Listens only to ",r.createElement(t.code,null,"init")," signals."),r.createElement(t.td,null,"all namespaces")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"createErrorTriggerProps(namespace,type)")),r.createElement(t.td,null,"Namespace and payload.type to listen to. Listens only to ",r.createElement(t.code,null,"error")," signals."),r.createElement(t.td,null,"all namespaces")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"createEventTriggerProps(namespace,type)")),r.createElement(t.td,null,"Namespace and payload.type to listen to. Listens only to ",r.createElement(t.code,null,"event")," signals."),r.createElement(t.td,null,"all namespaces")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"createStateChangeTriggerProps(namespace, state, previousState)")),r.createElement(t.td,null,"Namespace to listen to. Given state and previousState must also match. Both are optional."),r.createElement(t.td,null,"all namespaces")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"createTriggerForAllNamespaces()")),r.createElement(t.td,null,"Listens to all signals in any namespace."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"createTriggerPropsForAllSignals(namespace)")),r.createElement(t.td,null,"Namespace to listen to. If omitted listens to all signals."),r.createElement(t.td,null,"all namespaces")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 66: Generic trigger creators]"),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"See also ",r.createElement(o.A,{anchor:"hooks"},"hooks"),"."),"\n",r.createElement(t.h5,{id:"generic-signal-utility-functions"},"Generic signal utility functions"),"\n",r.createElement(t.h6,{id:"create"},"Create"),"\n",r.createElement(t.p,null,"Signals are easier to create with functions than by manually setting all properties."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Function"),r.createElement(t.th,null,"Description"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"createErrorSignal(namespace, payload)")),r.createElement(t.td,null,"Creates an error signal with the given namespace and error payload.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"createEventSignal(namespace, payload)")),r.createElement(t.td,null,"Creates an event signal with the given namespace and event payload.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"createStateChangeSignal(namespace, state, previousState)")),r.createElement(t.td,null,"Creates a ",r.createElement(t.code,null,"stateChange")," signal with the given namespace and ",r.createElement(t.code,null,"stateChange")," payload.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 67: Generic signal creators]"),r.createElement(t.td)))),"\n",r.createElement(t.h6,{id:"check"},"Check"),"\n",r.createElement(t.p,null,"Check the signal type or namespace with these utilities."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Function"),r.createElement(t.th,null,"Description"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isInitSignal(signal)")),r.createElement(t.td,null,"Returns true if the given signal is an init signal.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isErrorSignal(signal)")),r.createElement(t.td,null,"Returns true if the given signal is an error signal.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isEventSignal(signal)")),r.createElement(t.td,null,"Returns true if the given signal is an event signal.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isNamespacedSignal(signal, namespace)")),r.createElement(t.td,null,"Returns true if the given signal has given namespace.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"isStateChangeSignal(signal)")),r.createElement(t.td,null,"Returns true if the given signal is a ",r.createElement(t.code,null,"stateChange")," signal.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 68: Generic signal checks]"),r.createElement(t.td)))),"\n",r.createElement(t.h6,{id:"get-payloads"},"Get payloads"),"\n",r.createElement(t.p,null,"Returns signal payload if the signal type is a match."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Function"),r.createElement(t.th,null,"Description"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getErrorSignalPayload(signal)")),r.createElement(t.td,null,"Returns the payload if the given signal is an error signal.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getEventSignalPayload(signal)")),r.createElement(t.td,null,"Returns true if the given signal is an event signal.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"getStateChangeSignalPayload(signal)")),r.createElement(t.td,null,"Returns true if the given signal is a ",r.createElement(t.code,null,"stateChange")," signal.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 69: Generic payloads getters]"),r.createElement(t.td)))),"\n",r.createElement(t.h6,{id:"convert-and-filter"},"Convert and filter"),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Function"),r.createElement(t.th,null,"Description"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"convertSignalToTrigger(signal)")),r.createElement(t.td,null,"Removes the ",r.createElement(t.code,null,"context")," from the signal if the property exists. The given signal is not mutated.")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"filterSignals(arrayOfSignals, matchingProps)")),r.createElement(t.td,null,"Filters signals from the array. Returns signals which match given props.")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 70: Convert and filter signals]"),r.createElement(t.td)))),"\n",r.createElement(t.h5,{id:"waitforsignals"},"waitForSignals"),"\n",r.createElement(t.p,null,"The function returns a promise, which is resolved when the given signal(s) have been detected. Or it rejects the promise when a signal from an optional rejection list is given."),"\n",r.createElement(t.p,null,"The function can be used for racing conditions, for example waiting for a user renewal success or error, whichever comes first."),"\n",r.createElement(t.p,null,"Or wait for a longer set of emitted signals from the start of user renewal to the end of API token renewal."),"\n",r.createElement(t.p,null,"The promise is created with ",r.createElement(t.code,null,"waitForSignals(beaconInstance, arrayOfTriggers, options)"),"."),"\n",r.createElement(t.p,null,"When the promise is resolved, it returns an array of received signals. If it is rejected, an error is returned."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"Argument"),r.createElement(t.th,null,"Type"),r.createElement(t.th,null,"Description"),r.createElement(t.th,null,"Default"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"arrayOfTriggers")),r.createElement(t.td,null,r.createElement(t.code,null,"Object[]")),r.createElement(t.td,null,"Array of signals/signal props to match. Each array signal is checked once and removed when it matches."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"beaconInstance")),r.createElement(t.td,null,r.createElement(t.code,null,"Beacon")),r.createElement(t.td,null,"Beacon instance where listeners are added."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"options")),r.createElement(t.td,null,r.createElement(t.code,null,"Object ")),r.createElement(t.td,null,"Optional."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"options.allowSkipping")),r.createElement(t.td,null,r.createElement(t.code,null,"boolean")),r.createElement(t.td,null,'If true, and triggers are in order A, B, C, D and signal "C" is received. "A", "B", "C" are all removed from the array and are not checked again.'),r.createElement(t.td,null,r.createElement(t.code,null,"true"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"options.strictOrder")),r.createElement(t.td,null,r.createElement(t.code,null,"boolean")),r.createElement(t.td,null,"If true, signals are not tracked in strict order. If true and signals are received in the wrong order, the promise is rejected."),r.createElement(t.td,null,r.createElement(t.code,null,"false"))),r.createElement(t.tr,null,r.createElement(t.td,null,r.createElement(t.code,null,"options.rejectOn")),r.createElement(t.td,null,r.createElement(t.code,null,"Object[]")),r.createElement(t.td,null,"Array of signals/signal props, which cause promise rejection, if a match is found."),r.createElement(t.td,null,"none")),r.createElement(t.tr,null,r.createElement(t.td,null,"[Table 71: waitForSignals utility]"),r.createElement(t.td),r.createElement(t.td),r.createElement(t.td)))),"\n",r.createElement(t.p,null,"There is no timeout. The promise can be rejected by setting a custom signal type to ",r.createElement(t.code,null,"options.rejectOn")," and emit a matching signal."),"\n",r.createElement(a.Ay,null,r.createElement(t.pre,null,r.createElement(t.code,{className:"language-jsx"},"import { waitForSignals, userRenewalStartedTrigger } from 'hds-react';\nconst createMyCustomModule = (): ConnectedModule => {\n  let beacon: Beacon | undefined;\n  const myCustomRejectSignal = { type: 'reject', namespace: 'myNamespace' };\n  const listener = (signal) => {\n    setTimeout(() => {\n      beacon.emit(myCustomRejectSignal);\n    }, 20000);\n    waitForSignals(beacon, [isUserUpdatedSignal], {\n      rejectOn: [isUserRemovedSignal, isRenewalErrorSignal, myCustomRejectSignal],\n    })\n      .then((signals) => {\n        //\n      })\n      .catch((error) => {\n        //\n      });\n  };\n  return {\n    namespace: helperNamespace,\n    connect: (targetBeacon) => {\n      beacon = targetBeacon;\n      beacon.addListener(userRenewalStartedTrigger, listener);\n    },\n  };\n};\n"))),"\n",r.createElement(t.h5,{id:"object-types-from-oidc-client-ts"},"Object types from oidc-client-ts"),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"Oidc client")," module uses the ",r.createElement(s,{path:""},"oidc-client-ts"),". Some of its objects are returned from the module. Their documentation can be found in its repository:"),"\n",r.createElement(t.ul,null,"\n",r.createElement(t.li,null,"\n",r.createElement(s,{path:"classes/User.html"},"User"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(s,{path:"classes/UserManager.html"},"UserManager"),"\n"),"\n",r.createElement(t.li,null,"\n",r.createElement(s,{path:"interfaces/UserManagerSettings.html"},"UserManagerSettings"),"\n"),"\n"))}var g=function(e){return void 0===e&&(e={}),r.createElement(u,e,r.createElement(p,e))};function b(e){let{children:t}=e;return r.createElement(r.Fragment,null,t)}function f(e){return r.createElement(b,e,r.createElement(g,e))}},29191:function(e,t,l){var n=l(28453),r=l(96540),a=l(27758),c=l(85837),o=l(36633),i=(l(86974),l(46465)),u=l(24776);function m(e){const t=Object.assign({h1:"h1",p:"p"},(0,n.RP)(),e.components);return o.A||s("PageTabs",!1),o.A.Tab||s("PageTabs.Tab",!0),o.A.TabList||s("PageTabs.TabList",!0),o.A.TabPanel||s("PageTabs.TabPanel",!0),r.createElement(r.Fragment,null,r.createElement(t.h1,{id:"login"},"Login"),"\n",r.createElement("div",{className:"status-label-description"},r.createElement(i.A,{type:"error"},"Draft"),r.createElement(i.A,{type:"success",style:{marginLeft:"var(--spacing-xs)"}},r.createElement(t.p,null,"Accessible")),r.createElement(a.A)),"\n",r.createElement(c.A,null,r.createElement(t.p,null,"Login components include React components, context and hooks for handling user authorisation, api tokens and\nauthorized requests.")),"\n",r.createElement(u.A,{componentName:"Login"}),"\n",r.createElement(o.A,{pageContext:e.pageContext},r.createElement(o.A.TabList,null,r.createElement(o.A.Tab,{href:"/"},"Intro"),r.createElement(o.A.Tab,{href:"/usage"},"Usage"),r.createElement(o.A.Tab,{href:"/api"},"API"),r.createElement(o.A.Tab,{href:"/accessibility"},"Accessibility"),r.createElement(o.A.Tab,{href:"/customisation"},"Customisation")),r.createElement(o.A.TabPanel,null,e.children)))}function s(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}t.A=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,n.RP)(),e.components);return t?r.createElement(t,e,r.createElement(m,e)):m(e)}},36633:function(e,t,l){var n=l(96540),r=l(64810),a=l(74469),c=l(82041);const o="PageTabList",i="PageTabPanel",u="PageTab",m=e=>{var t;let{pageContext:l,children:m}=e;const s=l.frontmatter.slug,d=Array.isArray(m)?m:[m],E=d.find(e=>(0,n.isValidElement)(e)&&e.type.componentName===o),h=d.find(e=>(0,n.isValidElement)(e)&&e.type.componentName===i),p=null===(t=E.props)||void 0===t?void 0:t.children.filter(e=>e.type.componentName===u),g=p.findIndex(e=>s.endsWith(e.props.href)),b=-1===g?0:g,f=0===b?s:(e=>"/"+e.trim().split("/").filter(e=>!!e).slice(0,-1).join("/"))(s);return n.createElement(a.a,{initiallyActiveTab:b},n.createElement(a.a.TabList,{className:"page-tabs-list"},p.map(e=>n.createElement(a.a.Tab,{key:e.props.href,onClick:()=>(0,r.navigate)(""+("/"===e.props.href?f:f+e.props.href))},(0,c.l)(e.props.children)))),p.map((e,t)=>n.createElement(a.a.TabPanel,{key:e.props.href},b===t?h.props.children:n.createElement("div",null))))},s=e=>{let{children:t}=e;return n.createElement(a.a.TabList,null,t)};s.componentName=o;const d=e=>{let{href:t,slug:l,children:r}=e;return n.createElement(a.a.Tab,null," ",r)};d.componentName=u;const E=e=>{let{children:t}=e;return n.createElement(a.a.TabPanel,null,t)};E.componentName=i,m.TabList=s,m.Tab=d,m.TabPanel=E,t.A=m},46465:function(e,t,l){var n=l(24063),r=l(96540),a=l(57189),c=l(82041);const o=["children"];t.A=e=>{let{children:t}=e,l=(0,n.A)(e,o);return r.createElement(a.S,l,(0,c.l)(t))}},57189:function(e,t,l){l.d(t,{S:function(){return u}});var n=l(93943),r=l(96540),a=(l(71068),l(30934)),c=l(27445),o={statusLabel:"StatusLabel-module_statusLabel__1iSa6",statusLabelWithIcon:"StatusLabel-module_statusLabelWithIcon__3nZbg",statusLabelIcon:"StatusLabel-module_statusLabelIcon__2wChn",info:"StatusLabel-module_info__1lFA9",success:"StatusLabel-module_success__1mEVZ",alert:"StatusLabel-module_alert__1Fnb3",error:"StatusLabel-module_error__1-2nz"};(0,a.s)(".StatusLabel-module_statusLabel__1iSa6{--status-label-background:var(--color-black-10);--status-label-color:var(--color-black-90);--status-label-height:32px;background-color:var(--status-label-background);border-radius:20px;color:var(--status-label-color);display:inline-block;font-size:var(--fontsize-body-s);line-height:var(--status-label-height);min-height:var(--status-label-height);padding:0 var(--spacing-2-xs);vertical-align:middle}.StatusLabel-module_statusLabelWithIcon__3nZbg{align-items:center;display:inline-flex;padding-left:var(--spacing-3-xs)}.StatusLabel-module_statusLabelIcon__2wChn{height:var(--spacing-m);margin-right:var(--spacing-3-xs);width:var(--spacing-m)}.StatusLabel-module_info__1lFA9{--status-label-background:var(--color-info);--status-label-color:var(--color-white)}.StatusLabel-module_success__1mEVZ{--status-label-background:var(--color-success);--status-label-color:var(--color-white)}.StatusLabel-module_alert__1Fnb3{--status-label-background:var(--color-alert)}.StatusLabel-module_error__1-2nz{--status-label-background:var(--color-error);--status-label-color:var(--color-white)}");const i=e=>{let{icon:t}=e;return r.createElement("span",{className:o.statusLabelIcon,"aria-hidden":"true"},t)},u=e=>{var{children:t,className:l,type:a="neutral",iconStart:u}=e,m=(0,n._)(e,["children","className","type","iconStart"]);return r.createElement("span",Object.assign({className:(0,c.c)(o.statusLabel,o[a],u&&o.statusLabelWithIcon,l)},m),u&&r.createElement(i,{icon:u}),t)}},78226:function(e){e.exports=JSON.parse('[{"name":"Accordion","text":"Accordions can be used to hide and reveal information.","linkboxAriaLabel":"Accordion component","linkAriaLabel":"Go to the Accordion component page","href":"/components/accordion","imgProps":{"src":"/images/components/overview/accordion@2x.png","alt":"An illustration of the Accordion component.","height":180,"width":280},"tags":["react"]},{"name":"Breadcrumb","text":"Breadcrumb provides links back to each previous page and shows the user\'s current location on a website.","linkboxAriaLabel":"Breadcrumb component","linkAriaLabel":"Go to the Breadcrumb component page","href":"/components/breadcrumb","imgProps":{"src":"/images/components/overview/breadcrumbs@2x.png","alt":"An illustration of the Breadcrumb component.","height":180,"width":280},"tags":["core","react"]},{"name":"Button","text":"Buttons are meant to make actions easily visible and understandable to the user.","linkboxAriaLabel":"Button component","linkAriaLabel":"Go to the Button component page","href":"/components/button","imgProps":{"src":"/images/components/overview/button@2x.png","alt":"An illustration of the Button component.","height":180,"width":280},"tags":["core","react"]},{"name":"Card","text":"Cards can be used to divide and organise interface content.","linkboxAriaLabel":"Card component","linkAriaLabel":"Go to the Card component page","href":"/components/card","imgProps":{"src":"/images/components/overview/card@2x.png","alt":"An illustration of the Card component.","height":180,"width":280},"tags":["core","react"]},{"name":"Checkbox","text":"Checkboxes are used to select from one of more options.","linkboxAriaLabel":"Checkbox component","linkAriaLabel":"Go to the Checkbox component page","href":"/components/checkbox","imgProps":{"src":"/images/components/overview/checkbox@2x.png","alt":"An illustration of the Checkbox component.","height":180,"width":280},"tags":["core","react"]},{"name":"CookieConsent","text":"The cookie compliance components informs users about cookie usage.","linkboxAriaLabel":"CookieConsent components","linkAriaLabel":"Go to the CookieConsent components page","href":"/components/cookie-consent","imgProps":{"src":"/images/components/overview/cookieconsent@2x.png","alt":"An illustration of the CookieConsent component.","height":180,"width":280},"tags":["core","react","js"]},{"name":"DateInput","text":"Date input allows the user to easily input a specific date or a date range. ","linkboxAriaLabel":"DateInput component","linkAriaLabel":"Go to the DateInput component page","href":"/components/date-input","imgProps":{"src":"/images/components/overview/dateinput@2x.png","alt":"An illustration of the DateInput component.","height":180,"width":280},"tags":["react"]},{"name":"Dialog","text":"Dialogs initiate a conversation between the service and the user.","linkboxAriaLabel":"Dialog component","linkAriaLabel":"Go to the Dialog component page","href":"/components/dialog","imgProps":{"src":"/images/components/overview/dialog@2x.png","alt":"An illustration of the Dialog component.","height":180,"width":280},"tags":["react"]},{"name":"Dropdown","text":"A dropdown offers a user a list of options, of which one or multiple can be selected.","linkboxAriaLabel":"Dropdown component","linkAriaLabel":"Go to the Dropdown component page","href":"/components/dropdown","imgProps":{"src":"/images/components/overview/dropdown@2x.png","alt":"An illustration of the Dropdown component.","height":180,"width":280},"tags":["react"]},{"name":"ErrorSummary","text":"Error summary is a notification-like element which lists all errors in a form or other inputs.","linkboxAriaLabel":"Error summary component","linkAriaLabel":"Go to the Error summary component page","href":"/components/error-summary","imgProps":{"src":"/images/components/overview/errorsummary@2x.png","alt":"An illustration of the Error Summary component.","height":180,"width":280},"tags":["core","react"]},{"name":"Fieldset","text":"Fieldset groups multiple related form input fields together.","linkboxAriaLabel":"Fieldset component","linkAriaLabel":"Go to the Fieldset component page","href":"/components/fieldset","imgProps":{"src":"/images/components/overview/fieldset@2x.png","alt":"An illustration of the Fieldset component.","height":180,"width":280},"tags":["core","react"]},{"name":"FileInput","text":"A file input helps to browse and select files to be uploaded to the service.","linkboxAriaLabel":"FileInput component","linkAriaLabel":"Go to the FileInput component page","href":"/components/file-input","imgProps":{"src":"/images/components/overview/fileinput@2x.png","alt":"An illustration of the FileInput component.","height":180,"width":280},"tags":["react"]},{"name":"Footer","text":"The footer is located at the bottom of the page below the main body content.","linkboxAriaLabel":"Footer component","linkAriaLabel":"Go to the Footer component page","href":"/components/footer","imgProps":{"src":"/images/components/overview/footer@2x.png","alt":"An illustration of the Footer component.","height":180,"width":280},"tags":["react"]},{"name":"Header","text":"Header is a wrapper component for all navigation elements.","linkboxAriaLabel":"Header component","linkAriaLabel":"Go to the Header component page","href":"/components/header","imgProps":{"src":"/images/components/overview/header@2x.png","alt":"An illustration of the Header component.","height":180,"width":280},"tags":["react"]},{"name":"Hero","text":"Hero is used below the main navigation as the first content element.","linkboxAriaLabel":"Hero component","linkAriaLabel":"Go to the Hero component page","href":"/components/hero","imgProps":{"src":"/images/components/overview/hero@2x.png","alt":"An illustration of the Hero component.","height":180,"width":280},"tags":["core","react"]},{"name":"Highlight","text":"Quote and highlight allow lifting an excerpt from a longer text to emphasize.","linkboxAriaLabel":"Highlight component","linkAriaLabel":"Go to the Highlight component page","href":"/components/highlight","imgProps":{"src":"/images/components/overview/highlight@2x.png","alt":"An illustration of the Highlight component.","height":180,"width":280},"tags":["core","react"]},{"name":"Icon","text":"Icons are used for providing visual cues and highlighting actions.","linkboxAriaLabel":"Icon component","linkAriaLabel":"Go to the Icon component page","href":"/components/icon","imgProps":{"src":"/images/components/overview/icon@2x.png","alt":"An illustration of the Icon component.","height":180,"width":280},"tags":["core","react"]},{"name":"Koros","text":"Koros, also known as Wave motifs, are part of the visual identity of City of Helsinki.","linkboxAriaLabel":"Koros component","linkAriaLabel":"Go to the Koros component page","href":"/components/koros","imgProps":{"src":"/images/components/overview/koros@2x.png","alt":"An illustration of the Koros component.","height":180,"width":280},"tags":["core","react"]},{"name":"Link","text":"Links are used as navigational elements and can be standalone or inline.","linkboxAriaLabel":"Link component","linkAriaLabel":"Go to the Link component page","href":"/components/link","imgProps":{"src":"/images/components/overview/link@2x.png","alt":"An illustration of the Link component.","height":180,"width":280},"tags":["core","react"]},{"name":"Linkbox","text":"Linkboxes are used to combine elements into a single interactable element.","linkboxAriaLabel":"Linkbox component","linkAriaLabel":"Go to the Linkbox component page","href":"/components/linkbox","imgProps":{"src":"/images/components/overview/linkbox@2x.png","alt":"An illustration of the Linkbox component.","height":180,"width":280},"tags":["react"]},{"name":"LoadingSpinner","text":"Loading spinner is used for notifying users that their action is being processed.","linkboxAriaLabel":"LoadingSpinner component","linkAriaLabel":"Go to the LoadingSpinner component page","href":"/components/loading-spinner","imgProps":{"src":"/images/components/overview/loadingspinner@2x.png","alt":"An illustration of the LoadingSpinner component.","height":180,"width":280},"tags":["core","react"]},{"name":"Login","text":"Login related hooks and modules","linkboxAriaLabel":"Login component","linkAriaLabel":"Go to the Login component page","href":"/components/login","imgProps":{"src":"/images/components/overview/headerlogin@2x.jpg","alt":"An illustration of the Login component.","height":180,"width":280},"tags":["react","js"]},{"name":"Logo","text":"The logo is used to identify the service as an official City of Helsinki service.","linkboxAriaLabel":"Logo component","linkAriaLabel":"Go to the Logo component page","href":"/components/logo","imgProps":{"src":"/images/components/overview/logo@2x.png","alt":"An illustration of the Logo component.","height":180,"width":280},"tags":["react"]},{"name":"Notification","text":"Notifications are used to present timely information to the user.","linkboxAriaLabel":"Notification component","linkAriaLabel":"Go to the Notification component page","href":"/components/notification","imgProps":{"src":"/images/components/overview/notification@2x.png","alt":"An illustration of the Notification component.","height":180,"width":280},"tags":["core","react"]},{"name":"NumberInput","text":"A number input allows the user to enter numeric values.","linkboxAriaLabel":"NumberInput component","linkAriaLabel":"Go to the NumberInput component page","href":"/components/number-input","imgProps":{"src":"/images/components/overview/numberinput@2x.png","alt":"An illustration of the NumberInput component.","height":180,"width":280},"tags":["core","react"]},{"name":"Pagination","text":"The pagination component allows the user to navigate between pages.","linkboxAriaLabel":"Pagination component","linkAriaLabel":"Go to the Pagination component page","href":"/components/pagination","imgProps":{"src":"/images/components/overview/pagination@2x.png","alt":"An illustration of the Pagination component.","height":180,"width":280},"tags":["core","react"]},{"name":"PasswordInput","text":"A password field is an input field component that is used to input password data.","linkboxAriaLabel":"PasswordInput component","linkAriaLabel":"Go to the PasswordInput component page","href":"/components/password-input","imgProps":{"src":"/images/components/overview/passwordinput@2x.png","alt":"An illustration of the PasswordInput component.","height":180,"width":280},"tags":["core","react"]},{"name":"PhoneInput","text":"A phone input allows the user to enter phone number values.","linkboxAriaLabel":"PhoneInput component","linkAriaLabel":"Go to the PhoneInput component page","href":"/components/phone-input","imgProps":{"src":"/images/components/overview/phoneinput@2x.png","alt":"An illustration of the PhoneInput component.","height":180,"width":280},"tags":["core","react"]},{"name":"RadioButton","text":"Radio buttons are used to pick an option when only one option can be chosen.","linkboxAriaLabel":"RadioButton component","linkAriaLabel":"Go to the RadioButton component page","href":"/components/radio-button","imgProps":{"src":"/images/components/overview/radiobutton@2x.png","alt":"An illustration of the RadioButton component.","height":180,"width":280},"tags":["core","react"]},{"name":"SearchInput","text":"A search input allows the user to find relevant content.","linkboxAriaLabel":"SearchInput component","linkAriaLabel":"Go to the SearchInput component page","href":"/components/search-input","imgProps":{"src":"/images/components/overview/searchinput@2x.png","alt":"An illustration of the SearchInput component.","height":180,"width":280},"tags":["core","react"]},{"name":"Select","text":"Select offers a user a list of options, of which one or multiple can be selected.","linkboxAriaLabel":"Select component","linkAriaLabel":"Go to the Select component page","href":"/components/select","imgProps":{"src":"/images/components/overview/select@2x.png","alt":"An illustration of the Select component.","height":180,"width":280},"tags":["react"]},{"name":"SelectionGroup","text":"Selection group allows grouping form selection elements to each other.","linkboxAriaLabel":"SelectionGroup component","linkAriaLabel":"Go to the SelectionGroup component page","href":"/components/selection-group","imgProps":{"src":"/images/components/overview/selectiongroup@2x.png","alt":"An illustration of the SelectionGroup component.","height":180,"width":280},"tags":["core","react"]},{"name":"SideNavigation","text":"A side navigation is an additional navigation located on the left of the viewport.","linkboxAriaLabel":"SideNavigation component","linkAriaLabel":"Go to the SideNavigation component page","href":"/components/side-navigation","imgProps":{"src":"/images/components/overview/sidenavigation@2x.png","alt":"An illustration of the SideNavigation component.","height":180,"width":280},"tags":["react"]},{"name":"StatusLabel","text":"Status labels can be used to highlight different statuses or items to the user.","linkboxAriaLabel":"StatusLabel component","linkAriaLabel":"Go to the StatusLabel component page","href":"/components/status-label","imgProps":{"src":"/images/components/overview/statuslabel@2x.png","alt":"An illustration of the StatusLabel component.","height":180,"width":280},"tags":["core","react"]},{"name":"StepByStep","text":"StepByStep component is useful for visualising a process in steps.","linkboxAriaLabel":"StepByStep component","linkAriaLabel":"Go to the StepByStep component page","href":"/components/step-by-step","imgProps":{"src":"/images/components/overview/stepbystep@2x.png","alt":"An illustration of the StepByStep component.","height":180,"width":280},"tags":["core","react"]},{"name":"Stepper","text":"The stepper helps to see the progression and to navigate between form steps.","linkboxAriaLabel":"Stepper component","linkAriaLabel":"Go to the Stepper component page","href":"/components/stepper","imgProps":{"src":"/images/components/overview/stepper@2x.png","alt":"An illustration of the Stepper component.","height":180,"width":280},"tags":["react"]},{"name":"Table","text":"Tables are used to present tabulated data to the user in a consistent manner.","linkboxAriaLabel":"Table component","linkAriaLabel":"Go to the Table component page","href":"/components/table","imgProps":{"src":"/images/components/overview/table@2x.png","alt":"An illustration of the Table component.","height":180,"width":280},"tags":["core","react"]},{"name":"Tabs","text":"Tabs are used to navigate between contents that have a relation.","linkboxAriaLabel":"Tabs component","linkAriaLabel":"Go to the Tabs component page","href":"/components/tabs","imgProps":{"src":"/images/components/overview/tabs@2x.png","alt":"An illustration of the Tabs component.","height":180,"width":280},"tags":["react"]},{"name":"Tag","text":"Tags are used to show attributes of an object or element such as categories.","linkboxAriaLabel":"Tag component","linkAriaLabel":"Go to the Tag component page","href":"/components/tag","imgProps":{"src":"/images/components/overview/tag@2x.png","alt":"An illustration of the Tag component.","height":180,"width":280},"tags":["core","react"]},{"name":"TextArea","text":"A text area is an input used for multiline answers.","linkboxAriaLabel":"TextArea component","linkAriaLabel":"Go to the TextArea component page","href":"/components/text-area","imgProps":{"src":"/images/components/overview/textarea@2x.png","alt":"An illustration of the TextArea component.","height":180,"width":280},"tags":["react"]},{"name":"TextInput","text":"A text field is an input field that the user can use to input content and data.","linkboxAriaLabel":"TextInput component","linkAriaLabel":"Go to the TextInput component page","href":"/components/text-input","imgProps":{"src":"/images/components/overview/textinput@2x.png","alt":"An illustration of the TextInput component.","height":180,"width":280},"tags":["core","react"]},{"name":"TimeInput","text":"A time input helps the user select a specific time.","linkboxAriaLabel":"TimeInput component","linkAriaLabel":"Go to the TimeInput component page","href":"/components/time-input","imgProps":{"src":"/images/components/overview/timeinput@2x.png","alt":"An illustration of the TimeInput component.","height":180,"width":280},"tags":["react"]},{"name":"ToggleButton","text":"Toggle button allows to switch between two states such as \\"On\\" and \\"Off\\".","linkboxAriaLabel":"ToggleButton component","linkAriaLabel":"Go to the ToggleButton component page","href":"/components/toggle-button","imgProps":{"src":"/images/components/overview/togglebutton@2x.png","alt":"An illustration of the ToggleButton component.","height":180,"width":280},"tags":["react"]},{"name":"Tooltip","text":"Tooltips are used to present context or background information to the user.","linkboxAriaLabel":"Tooltip component","linkAriaLabel":"Go to the Tooltip component page","href":"/components/tooltip","imgProps":{"src":"/images/components/overview/tooltip@2x.png","alt":"An illustration of the Tooltip component.","height":180,"width":280},"tags":["react"]}]')},85837:function(e,t,l){var n=l(96540),r=l(82041);t.A=e=>{let{color:t="var(--color-black-90)",size:l="var(--fontsize-body-xl)",style:a={},children:c}=e;return n.createElement("p",{style:Object.assign({fontSize:l,color:t,maxWidth:600},a)},(0,r.l)(c))}},86974:function(e,t,l){var n=l(24063),r=l(96540),a=l(182),c=l(82041);const o=["children"];t.A=e=>{let{children:t}=e,l=(0,n.A)(e,o);return r.createElement(a.N,l,(0,c.l)(t))}},89319:function(e,t,l){l.d(t,{T:function(){return E},a:function(){return n},b:function(){return r},t:function(){return d}});var n,r,a,c=l(93943),o=l(96540),i=(l(71068),l(30934)),u=l(27445),m=l(54597),s=l(78287),d={tag:"Tag-module_tag__3bo5S tag_hds-tag__3MKf3",large:"Tag-module_large__1ZNIX tag_hds-tag--large__1bVs5",action:"Tag-module_action__4ky2K tag_hds-tag--action__Az-Fm",link:"Tag-module_link__3f99r tag_hds-tag--link__1470y",icon:"Tag-module_icon__or2kN tag_hds-tag__icon__2_xWY",multiline:"Tag-module_multiline__24sap tag_hds-tag--multiline__yHIcb"};(0,i.s)(".tag_hds-icon__2LFMT{background-color:currentcolor;display:inline-block;height:var(--icon-size);-webkit-mask-image:var(--mask-image);mask-image:var(--mask-image);-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:auto;mask-size:auto;width:var(--icon-size)}.tag_hds-icon--size-xs__L1nV_{--icon-size:var(--spacing-layout-2-xs)}.tag_hds-icon--size-s__23CMA{--icon-size:var(--spacing-layout-xs)}.tag_hds-icon--size-m__2zCBY{--icon-size:var(--spacing-layout-s)}.tag_hds-icon--size-l__UuAMZ{--icon-size:var(--spacing-layout-m)}.tag_hds-icon--size-xl__2f_bT{--icon-size:var(--spacing-layout-l)}[class*=hds-icon-start--]:before{-webkit-mask-image:var(--mask-image-before);mask-image:var(--mask-image-before)}[class*=hds-icon-end--]:after,[class*=hds-icon-start--]:before{background-color:currentcolor;content:\"\";display:inline-flex;height:var(--icon-size,24px);-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:contain;mask-size:contain;width:var(--icon-size,24px)}[class*=hds-icon-end--]:after{-webkit-mask-image:var(--mask-image-after);mask-image:var(--mask-image-after)}.tag_hds-icon--cross__2tq88{--mask-image-cross:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M18 7.5L13.5 12l4.5 4.5-1.5 1.5-4.5-4.5L7.5 18 6 16.5l4.5-4.5L6 7.5 7.5 6l4.5 4.5L16.5 6 18 7.5z' fill='currentColor'/%3E%3C/svg%3E\");--mask-image:var(--mask-image-cross)}.tag_hds-icon-start--cross__Efj_S{--mask-image-before:var(--mask-image-cross)}.tag_hds-icon-end--cross__3_S2q{--mask-image-after:var(--mask-image-cross)}.tag_hds-tag__3MKf3{--computed-background-color:var(--background-color,var(--color-black-10));--computed-background-color-focus:var(--background-color-focus,var(--computed-background-color,transparent));--computed-background-color-hover:var(--background-color-hover,var(--computed-background-color-focus,transparent));--computed-background-color-active:var(--background-color-active,var(--computed-background-color-hover,transparent));--computed-border-color:var(--border-color,var(--computed-background-color));--computed-border-color-focus:var(--border-color-focus,var(--computed-border-color,transparent));--computed-border-color-hover:var(--border-color-hover,var(--computed-border-color-focus,transparent));--computed-border-color-active:var(--border-color-active,var(--computed-border-color-hover,transparent));--computed-color:var(--color,--color-black-90);--computed-color-focus:var(--color-focus,var(--computed-color,inherit));--computed-color-hover:var(--color-hover,var(--computed-color-focus,inherit));--computed-color-active:var(--color-active,var(--computed-color-hover,inherit));--computed-outline-color:var(--outline-color,transparent);--font-size:var(--fontsize-body-s);--gap:var(--spacing-3-xs);--height:32px;--icon-reposition:-4px;--icon-size:24px;--outline-width:2px;--padding-horizontal:12px;--padding-vertical:3px;align-items:center;background-color:var(--computed-background-color);border-radius:calc(var(--height) / 2);box-sizing:border-box;color:var(--computed-color,inherit);display:inline-flex;flex-direction:row;font-size:var(--font-size);font-weight:500;grid-gap:var(--gap);gap:var(--gap);justify-content:center;line-height:var(--lineheight-l);max-width:100%;min-height:var(--height);outline:none;outline-offset:2px;overflow:hidden;padding:var(--padding-vertical) var(--padding-horizontal)}.tag_hds-tag__3MKf3:after{flex-shrink:0;margin-right:var(--icon-reposition)}.tag_hds-tag__3MKf3:before{flex-shrink:0;margin-left:var(--icon-reposition)}.tag_hds-tag__3MKf3>span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tag_hds-tag--large__1bVs5{--font-size:var(--fontsize-body-m);--gap:var(--spacing-2-xs);--height:48px;--icon-reposition:-8px;--outline-width:3px;--padding-horizontal:20px;--padding-vertical:10px}.tag_hds-tag--action__Az-Fm{--border-color:var(--color-black-90);border:1px solid var(--computed-border-color);padding:calc(var(--padding-vertical) - 1px) calc(var(--padding-horizontal) - 1px)}.tag_hds-tag--multiline__yHIcb>span{hyphens:auto;white-space:normal}.tag_hds-tag--link__1470y{text-decoration:underline}.tag_hds-tag--action__Az-Fm,.tag_hds-tag--link__1470y{--background-color-hover:var(--color-black-20);--outline-color:var(--color-focus-outline);cursor:pointer}.tag_hds-tag--action__Az-Fm:focus-visible,.tag_hds-tag--link__1470y:focus-visible{background-color:var(--computed-background-color-focus);border-color:var(--computed-border-color-focus);color:var(--computed-color-focus)}.tag_hds-tag--action__Az-Fm:hover,.tag_hds-tag--link__1470y:hover{background-color:var(--computed-background-color-hover);border-color:var(--computed-border-color-hover);color:var(--computed-color-hover)}.tag_hds-tag--action__Az-Fm:active,.tag_hds-tag--link__1470y:active{background-color:var(--computed-background-color-active);border-color:var(--computed-border-color-active);color:var(--computed-color-active)}.tag_hds-tag--action__Az-Fm:active:hover,.tag_hds-tag--action__Az-Fm:focus-visible,.tag_hds-tag--link__1470y:active:hover,.tag_hds-tag--link__1470y:focus-visible{box-shadow:none;outline:var(--outline-width) solid var(--computed-outline-color)}.tag_hds-icon__2LFMT.tag_hds-tag__icon__2_xWY,.tag_hds-tag__icon__2_xWY{flex-shrink:0;height:var(--icon-size);width:var(--icon-size)}.tag_hds-tag__icon__2_xWY:first-child{margin-left:var(--icon-reposition)}.tag_hds-tag__icon__2_xWY:last-child{margin-right:var(--icon-reposition)}"),(a=n||(n={})).Action="action",a.Informative="informative",a.Link="link",function(e){e.Small="small",e.Large="large"}(r||(r={}));const E=(0,o.forwardRef)((e,t)=>{var{children:l,className:a,onClick:i,onDelete:E,size:h=r.Small,theme:p,href:g,iconStart:b,iconEnd:f,multiline:y=!1}=e,k=(0,c._)(e,["children","className","onClick","onDelete","size","theme","href","iconStart","iconEnd","multiline"]);const v=!!E,T=E||i,A=!!T;let w=n.Informative,S=null;T?(w=n.Action,S="button"):g&&(w=n.Link);const L=(0,m.u)(d.tag,p),x=d.large,_=(0,u.c)(d.tag,h===r.Large&&x,L,a,d[w],y&&d.multiline),P=b?o.createElement("div",{className:(0,u.c)(d.icon),"aria-hidden":"true"},b):null,C=f?o.createElement("div",{className:(0,u.c)(d.icon),"aria-hidden":"true"},f):null,R=e=>{"Enter"!==e.key&&" "!==e.key||T(e)},O=e=>o.createElement("a",Object.assign({ref:t,className:(0,u.c)(_,d.link),href:g},k),e.children),I=e=>o.createElement("div",Object.assign({className:_,ref:t},A&&{tabIndex:0,role:S,onClick:T,onKeyDown:R},k),e.children),F=o.createElement(o.Fragment,null,P,o.createElement("span",null,l),C,v&&!C?o.createElement(s.I,{className:d.icon}):null);return g?o.createElement(O,null,F):o.createElement(I,null,F)})}}]);