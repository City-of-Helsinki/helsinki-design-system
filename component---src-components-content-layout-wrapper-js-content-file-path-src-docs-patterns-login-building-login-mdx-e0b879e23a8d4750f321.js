"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[93366],{95287:function(e,t,n){n.d(t,{S:function(){return c}});var a=n(72918),r=n(96540),o=(n(71068),n(30934)),l=n(10393),s={statusLabel:"StatusLabel-module_statusLabel__1iSa6",statusLabelWithIcon:"StatusLabel-module_statusLabelWithIcon__3nZbg",statusLabelIcon:"StatusLabel-module_statusLabelIcon__2wChn",info:"StatusLabel-module_info__1lFA9",success:"StatusLabel-module_success__1mEVZ",alert:"StatusLabel-module_alert__1Fnb3",error:"StatusLabel-module_error__1-2nz"};(0,o.s)(".StatusLabel-module_statusLabel__1iSa6{--status-label-background:var(--color-black-10);--status-label-color:var(--color-black-90);--status-label-height:32px;background-color:var(--status-label-background);border-radius:20px;color:var(--status-label-color);display:inline-block;font-size:var(--fontsize-body-s);line-height:var(--status-label-height);min-height:var(--status-label-height);padding:0 var(--spacing-2-xs);vertical-align:middle}.StatusLabel-module_statusLabelWithIcon__3nZbg{align-items:center;display:inline-flex;padding-left:var(--spacing-3-xs)}.StatusLabel-module_statusLabelIcon__2wChn{height:var(--spacing-m);margin-right:var(--spacing-3-xs);width:var(--spacing-m)}.StatusLabel-module_info__1lFA9{--status-label-background:var(--color-info);--status-label-color:var(--color-white)}.StatusLabel-module_success__1mEVZ{--status-label-background:var(--color-success);--status-label-color:var(--color-white)}.StatusLabel-module_alert__1Fnb3{--status-label-background:var(--color-alert)}.StatusLabel-module_error__1-2nz{--status-label-background:var(--color-error);--status-label-color:var(--color-white)}");const i=e=>{let{icon:t}=e;return r.createElement("span",{className:s.statusLabelIcon,"aria-hidden":"true"},t)},c=e=>{var{children:t,className:n,type:o="neutral",iconStart:c}=e,u=(0,a._)(e,["children","className","type","iconStart"]);return r.createElement("span",Object.assign({className:(0,l.c)(s.statusLabel,s[o],c&&s.statusLabelWithIcon,n)},u),c&&r.createElement(i,{icon:c}),t)}},60448:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var a=n(28453),r=n(96540),o=n(85837),l=(n(28840),n(46465));function s(e){const t=Object.assign({h1:"h1",p:"p",h2:"h2",h3:"h3",h4:"h4",ul:"ul",li:"li",code:"code",strong:"strong"},(0,a.RP)(),e.components),{InternalLink:n,ExternalLink:s}=t;return s||c("ExternalLink",!0),n||c("InternalLink",!0),r.createElement(r.Fragment,null,r.createElement(t.h1,{id:"building-login"},"Building login"),"\n",r.createElement(l.A,{type:"error"},"Draft"),"\n",r.createElement(o.A,null,r.createElement(t.p,null,"The Login pattern describes how HDS Login components and HDS Header login functionalities are meant to work together.")),"\n",r.createElement(t.h2,{id:"principles"},"Principles"),"\n",r.createElement(t.h3,{id:"login-components"},"Login components"),"\n",r.createElement(t.p,null,r.createElement(n,{href:"/components/login"},"HDS Login")," components include React context, components and hooks for\nhandling user authorisation, API tokens, session polling and GraphQL queries."),"\n",r.createElement(t.h4,{id:"requirements"},"Requirements"),"\n",r.createElement(t.p,null,"The following steps are required for user authentication:"),"\n",r.createElement(t.ul,null,"\n",r.createElement(t.li,null,"The url of the service connecting to the OIDC server ",r.createElement(n,{href:"/components/login/usage/#loginprovider"},"must be registered with a scope and a client ID"),"."),"\n",r.createElement(t.li,null,"The callback from the OIDC server should be handled with the ",r.createElement(n,{href:"/components/login/usage/#logincallbackhandler"},"LoginCallbackHandler")," component."),"\n"),"\n",r.createElement(t.h4,{id:"log-in-process"},"Log in process"),"\n",r.createElement(t.p,null,"Logging in or out of an OIDC server requires browser redirections to the server and back. User interfaces only show login and logout buttons. No other form elements are needed."),"\n",r.createElement(t.p,null,"The ",r.createElement(t.code,null,"login")," call is asyncronous and may fail if the OIDC server is offline or the service URL is not registered. The user interface must indicate loading has started, and possible errors must be handled by the user interface."),"\n",r.createElement(t.p,null,"The ",r.createElement(n,{href:"/patterns/login/building-login/#header-login-button"},"HDS Header Login button")," handles all of these scenarios."),"\n",r.createElement(t.h4,{id:"log-out-process"},"Log out process"),"\n",r.createElement(t.p,null,"Log out is almost identical to the log in process. It is also asyncronous and may fail."),"\n",r.createElement(t.p,null,"The ",r.createElement(n,{href:"/patterns/login/building-login/#header-logout-button"},"HDS Header Logout button")," handles all of these scenarios."),"\n",r.createElement(t.h4,{id:"user-data-from-the-oidc-server"},"User data from the OIDC server"),"\n",r.createElement(t.p,null,"User information is stored in tokens which are decrypted by the Login system and an user object is provided to user interfaces. It holds, for example, user's name and email address."),"\n",r.createElement(t.p,null,"User object can be accessed with the ",r.createElement(n,{href:"/components/login/usage/#useauthenticateduser"},"useAuthenticatedUser")," hook."),"\n",r.createElement(t.p,null,"The ",r.createElement(n,{href:"/patterns/login/building-login/#header-user-menu"},"HDS Header User menu")," automatically shows the user's name and initials."),"\n",r.createElement(t.h4,{id:"user-data-from-the-profile-service"},"User data from the Profile Service"),"\n",r.createElement(t.p,null,r.createElement(s,{href:"https://profiili.hel.fi"},"Profile information")," is not used by the HDS. It can be fetched\nwith the ",r.createElement(n,{href:"/components/login/usage/#graphql-module"},"GraphQL module"),", but it is not used\nin HDS components. The user object returned by the OIDC server has a ",r.createElement(t.code,null,"profile")," property, but that is just an unfortunate\nnaming convention. It is not the Helsinki Profile."),"\n",r.createElement(t.h3,{id:"headerlogin-components"},"Header.Login components"),"\n",r.createElement(t.p,null,r.createElement(n,{href:"/components/header"},"HDS Header")," has built-in functionalities for login button as well as\na dropdown user menu. ",r.createElement(t.strong,null,"The Header Login button")," is a variant of ",r.createElement(n,{href:"/components/header/#actionbaritem"},"\nHeader.ActionBarItem\n")," that uses the ",r.createElement(t.code,null,"fixedRightPosition")," prop to have special functionalities in mobile breakpoints. From breakpoint\nM (â‰¥ 768px) and down, the Login button is hidden, and the contents are moved inside the Header.ActionBar component'sÂ menu\nalongside NavigationMenu. See more documentation on ",r.createElement(n,{href:"/components/header/#with-login"},"\nHeader.Login\n")," on the Header component page."),"\n",r.createElement(t.p,null,"All Header login components require the ",r.createElement(n,{href:"/components/login/"},"LoginProvider")," React Context. Other Header components can be used to build identical functionalities, but user interactions and data must be handled manually."),"\n",r.createElement(t.h4,{id:"header-login-button"},"Header Login button"),"\n",r.createElement(t.p,null,"The ",r.createElement(n,{href:"/components/header/#header-login-button"},"Login button")," is an action item in the header. It indicates loading progress and handles connection errors."),"\n",r.createElement(t.h4,{id:"header-user-menu-button"},"Header User Menu Button"),"\n",r.createElement(t.p,null,"The ",r.createElement(n,{href:"/components/header/#header-user-menu-button"},"User Menu button")," offers placement for user information."),"\n",r.createElement(t.ul,null,"\n",r.createElement(t.li,null,"The user's name and initials."),"\n",r.createElement(t.li,null,"Can host links and icons."),"\n",r.createElement(t.li,null,"Should host a logout button."),"\n"),"\n",r.createElement(t.h4,{id:"header-logout-submenu-button"},"Header Logout Submenu Button"),"\n",r.createElement(t.p,null,"The ",r.createElement(n,{href:"/components/header/#header-logout-submenu-button"},"Logout Submenu button")," is a submenu item in the header dropdown. It indicates loading progress and handles connection errors."),"\n",r.createElement(t.p,null,"To learn more about the ",r.createElement("strong",null,"Header")," component and its subcomponents, please refer to ",r.createElement(n,{href:"/components/header"},"the component page.")))}var i=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.RP)(),e.components);return t?r.createElement(t,e,r.createElement(s,e)):s(e)};function c(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}function u(e){let{children:t}=e;return r.createElement(r.Fragment,null,t)}function d(e){return r.createElement(u,e,r.createElement(i,e))}},28840:function(e,t,n){var a=n(96540),r=n(64810);t.A=e=>{let{src:t,alt:n="Image",style:o={},viewable:l,...s}=e;const i=a.createElement("img",Object.assign({className:"image-container-image",alt:n,src:(0,r.withPrefix)(t),style:o},s));return a.createElement("div",{className:"image-container"},l?a.createElement("a",{className:"image-container-link",href:(0,r.withPrefix)(t),title:n,style:o},i):i)}},85837:function(e,t,n){var a=n(96540),r=n(82041);t.A=e=>{let{color:t="var(--color-black-90)",size:n="var(--fontsize-body-xl)",style:o={},children:l}=e;return a.createElement("p",{style:{fontSize:n,color:t,maxWidth:600,...o}},(0,r.l)(l))}},46465:function(e,t,n){var a=n(96540),r=n(95287),o=n(82041);t.A=e=>{let{children:t,...n}=e;return a.createElement(r.S,n,(0,o.l)(t))}}}]);