"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[27304],{6079:function(e,t,r){var n=r(88538),s=r(54077),i=r(70935),o=r(94546),a=r(14156),l=r(87479),c=r(98449),u=r(57726),d=r(87092),m=r(34667);function h(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=h(s),f=h(i),g=h(o),y=h(a),b=h(l),v=h(c),w=h(u),T=h(m);var E={$schema:"http://json-schema.org/draft-06/schema#",$id:"http://json-schema.org/draft-06/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},title:{type:"string"},description:{type:"string"},default:{},examples:{type:"array",items:{}},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:{},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:{}};class k extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,k),t&&(this.stack+=`\nCaused by: ${t.stack}`)}}class x extends k{}class $ extends x{constructor(e,t,r,n,s){const i=function(e,t,r){const n=f.default(e,t,r,{format:"js"});return n.length>0?n[0].error:"unknown validation error"}(n,r,s);super(`${t}: ${i}`),this.filename=e,this.obj=r,this.schema=n,this.errors=s}prettyError(){const e=this.getRawJSON();return f.default(this.schema,this.obj,this.errors,{format:"cli",indent:2,json:e})}getRawJSON(){return this.filename&&p.default.existsSync(this.filename)?p.default.readFileSync(this.filename,"utf-8"):null}}const A=b.default.resolve("/","../../"),q=b.default.resolve(A,"dist/cjs");function C(e){const t=r(81066).resolve(e),n=r.c[t];if(n&&n.parent){const{parent:e}=n;for(let r=e.children.length-1;r>=0;r--)e.children[r].id===t&&e.children.splice(r,1)}return delete r.c[t],r(81066)(t)}var N,S={$schema:"http://json-schema.org/draft-06/schema#",$id:"https://html-validate.org/schemas/elements.json",type:"object",properties:{$schema:{type:"string"}},patternProperties:{"^[^$].*$":{type:"object",properties:{inherit:{title:"Inherit from another element",description:"Most properties from the parent element will be copied onto this one",type:"string"},embedded:{title:"Mark this element as belonging in the embedded content category",$ref:"#/definitions/contentCategory"},flow:{title:"Mark this element as belonging in the flow content category",$ref:"#/definitions/contentCategory"},heading:{title:"Mark this element as belonging in the heading content category",$ref:"#/definitions/contentCategory"},interactive:{title:"Mark this element as belonging in the interactive content category",$ref:"#/definitions/contentCategory"},metadata:{title:"Mark this element as belonging in the metadata content category",$ref:"#/definitions/contentCategory"},phrasing:{title:"Mark this element as belonging in the phrasing content category",$ref:"#/definitions/contentCategory"},sectioning:{title:"Mark this element as belonging in the sectioning content category",$ref:"#/definitions/contentCategory"},deprecated:{title:"Mark element as deprecated",description:"Deprecated elements should not be used. If a message is provided it will be included in the error",anyOf:[{type:"boolean"},{type:"string"},{$ref:"#/definitions/deprecatedElement"}]},foreign:{title:"Mark element as foreign",description:"Foreign elements are elements which have a start and end tag but is otherwize not parsed",type:"boolean"},void:{title:"Mark element as void",description:"Void elements are elements which cannot have content and thus must not use an end tag",type:"boolean"},transparent:{title:"Mark element as transparent",description:"Transparent elements follows the same content model as its parent, i.e. the content must be allowed in the parent.",anyOf:[{type:"boolean"},{type:"array",items:{type:"string"}}]},implicitClosed:{title:"List of elements which implicitly closes this element",description:"Some elements are automatically closed when another start tag occurs",type:"array",items:{type:"string"}},scriptSupporting:{title:"Mark element as script-supporting",description:"Script-supporting elements are elements which can be inserted where othersise not permitted to assist in templating",type:"boolean"},form:{title:"Mark element as a submittable form element",type:"boolean"},labelable:{title:"Mark this element as labelable",description:"This element may contain an associated label element.",anyOf:[{type:"boolean"},{$ref:"#/definitions/expression"}]},deprecatedAttributes:{title:"List of deprecated attributes",type:"array",items:{type:"string"}},requiredAttributes:{title:"List of required attributes",type:"array",items:{type:"string"}},attributes:{title:"List of known attributes and allowed values",$ref:"#/definitions/PermittedAttribute"},permittedContent:{title:"List of elements or categories allowed as content in this element",$ref:"#/definitions/Permitted"},permittedDescendants:{title:"List of elements or categories allowed as descendants in this element",$ref:"#/definitions/Permitted"},permittedOrder:{title:"Required order of child elements",$ref:"#/definitions/PermittedOrder"},requiredAncestors:{title:"List of required ancestor elements",$ref:"#/definitions/RequiredAncestors"},requiredContent:{title:"List of required content elements",$ref:"#/definitions/RequiredContent"},textContent:{title:"Allow, disallow or require textual content",description:"This property controls whenever an element allows, disallows or requires text. Text from any descendant counts, not only direct children",default:"default",type:"string",enum:["none","default","required","accessible"]}},additionalProperties:!1}},definitions:{contentCategory:{anyOf:[{type:"boolean"},{$ref:"#/definitions/expression"}]},expression:{type:"array",minItems:2,maxItems:2,items:[{type:"string",enum:["isDescendant","hasAttribute","matchAttribute"]},{anyOf:[{type:"string"},{$ref:"#/definitions/operation"}]}]},operation:{type:"array",minItems:3,maxItems:3,items:[{type:"string"},{type:"string",enum:["!=","="]},{type:"string"}]},deprecatedElement:{type:"object",additionalProperties:!1,properties:{message:{type:"string",title:"A short text message shown next to the regular error message."},documentation:{type:"string",title:"An extended markdown formatted message shown with the contextual rule documentation."},source:{type:"string",title:"Element source, e.g. what standard or library deprecated this element.",default:"html5"}}},Permitted:{type:"array",items:{anyOf:[{type:"string"},{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/definitions/PermittedGroup"}]}},{$ref:"#/definitions/PermittedGroup"}]}},PermittedAttribute:{type:"object",patternProperties:{"^.*$":{anyOf:[{type:"object",additionalProperties:!1,properties:{boolean:{type:"boolean",title:"Set to true if this is a boolean attribute"},deprecated:{title:"Set to true or string if this attribute is deprecated",oneOf:[{type:"boolean"},{type:"string"}]},list:{type:"boolean",title:"Set to true if this attribute is a list of space-separated tokens, each which must be valid by itself"},enum:{type:"array",title:"Exhaustive list of values (string or regex) this attribute accepts",uniqueItems:!0,items:{anyOf:[{type:"string"},{regexp:!0}]}},omit:{type:"boolean",title:"Set to true if this attribute can optionally omit its value"},required:{type:"boolean",title:"Set to true if this attribute is required"}}},{type:"array",uniqueItems:!0,items:{type:"string"}}]}}},PermittedGroup:{type:"object",additionalProperties:!1,properties:{exclude:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}]}}},PermittedOrder:{type:"array",items:{type:"string"}},RequiredAncestors:{type:"array",items:{type:"string"}},RequiredContent:{type:"array",items:{type:"string"}}}};!function(e){e.NONE="none",e.DEFAULT="default",e.REQUIRED="required",e.ACCESSIBLE="accessible"}(N||(N={}));const I=["metadata","flow","sectioning","heading","phrasing","embedded","interactive","transparent","form","labelable","attributes","permittedContent","permittedDescendants","permittedOrder","requiredAncestors","requiredContent"];function O(e,t,r){e[t]=r}function L(e){return!!e||void 0}function R(e){const t=Object.entries(e).filter((([,e])=>function(e){return void 0!==e}(e)));return Object.fromEntries(t)}function D(e,t){var r,n;const s={};s.deprecated=L(null===(r=e.deprecatedAttributes)||void 0===r?void 0:r.includes(t)),s.required=L(null===(n=e.requiredAttributes)||void 0===n?void 0:n.includes(t)),s.omit=void 0;const i=e.attributes?e.attributes[t]:void 0;return void 0===i?R(s):null===i?(s.delete=!0,R(s)):Array.isArray(i)?(0===i.length?s.boolean=!0:(s.enum=i.filter((e=>""!==e)),i.includes("")&&(s.omit=!0)),R(s)):R({...s,...i})}function P(e){var t,r,n;const s=[...Object.keys(null!==(t=e.attributes)&&void 0!==t?t:{}),...null!==(r=e.requiredAttributes)&&void 0!==r?r:[],...null!==(n=e.deprecatedAttributes)&&void 0!==n?n:[]].sort().map((t=>[t,D(e,t)]));return Object.fromEntries(s)}function M(e){const t={...e,attributes:P(e)};return delete t.deprecatedAttributes,delete t.requiredAttributes,t}const j=["metadata","flow","sectioning","heading","phrasing","embedded","interactive","labelable"],F={isDescendant:function(e,t){if("string"!=typeof t)throw new Error(`Property expression "isDescendant" must take string argument when evaluating metadata for <${e.tagName}>`);let r=e.parent;for(;r&&!r.isRootElement();){if(r.is(t))return!0;r=r.parent}return!1},hasAttribute:function(e,t){if("string"!=typeof t)throw new Error(`Property expression "hasAttribute" must take string argument when evaluating metadata for <${e.tagName}>`);return e.hasAttribute(t)},matchAttribute:function(e,t){if(!Array.isArray(t)||3!==t.length)throw new Error(`Property expression "matchAttribute" must take [key, op, value] array as argument when evaluating metadata for <${e.tagName}>`);const[r,n,s]=t.map((e=>e.toLowerCase())),i=(e.getAttributeValue(r)||"").toLowerCase();switch(n){case"!=":return i!==s;case"=":return i===s;default:throw new Error(`Property expression "matchAttribute" has invalid operator "${n}" when evaluating metadata for <${e.tagName}>`)}}};function z(e,t){return t}const _=function(e,t){const r=e instanceof RegExp;return r||(_.errors=[{instancePath:null==t?void 0:t.instancePath,schemaPath:void 0,keyword:"type",message:"should be regexp",params:{keyword:"type"}}]),r},B={keyword:"regexp",schema:!1,errors:!0,validate:_};class U{constructor(){var e;this.elements={},this.schema=(e=S,JSON.parse(JSON.stringify(e)))}init(){this.resolveGlobal()}extendValidationSchema(e){e.properties&&(this.schema=y.default(this.schema,{patternProperties:{"^[^$].*$":{properties:e.properties}}})),e.definitions&&(this.schema=y.default(this.schema,{definitions:e.definitions}))}loadFromObject(e,t=null){var r;const n=this.getSchemaValidator();if(!n(e))throw new $(t,"Element metadata is not valid",e,this.schema,null!==(r=n.errors)&&void 0!==r?r:[]);for(const[s,i]of Object.entries(e))"$schema"!==s&&this.addEntry(s,M(i))}loadFromFile(e){try{const t=C(e);this.loadFromObject(t,e)}catch(t){if(t instanceof $)throw t;throw new x(`Failed to load element metadata from "${e}"`,t)}}getMetaFor(e){return e=e.toLowerCase(),this.elements[e]?{...this.elements[e]}:this.elements["*"]?{...this.elements["*"]}:null}getTagsWithProperty(e){return Object.entries(this.elements).filter((([,t])=>t[e])).map((([e])=>e))}getTagsDerivedFrom(e){return Object.entries(this.elements).filter((([t,r])=>t===e||r.inherit===e)).map((([e])=>e))}addEntry(e,t){let r=this.elements[e]||{};if(t.inherit){const n=t.inherit;if(r=this.elements[n],!r)throw new x(`Element <${e}> cannot inherit from <${n}>: no such element`)}const n=this.mergeElement(r,{...t,tagName:e});!function(e){for(const[t,r]of Object.entries(e.attributes))r.enum&&(e.attributes[t].enum=r.enum.map(G))}(n),this.elements[e]=n}getSchemaValidator(){const e=new g.default({strict:!0,strictTuples:!0,strictTypes:!0});return e.addMetaSchema(E),e.addKeyword(B),e.addKeyword({keyword:"copyable"}),e.compile(this.schema)}getJSONSchema(){return this.schema}resolveGlobal(){if(!this.elements["*"])return;const e=this.elements["*"];delete this.elements["*"],delete e.tagName,delete e.void;for(const[t,r]of Object.entries(this.elements))this.elements[t]=this.mergeElement(e,r)}mergeElement(e,t){const r=y.default(e,t,{arrayMerge:z}),n=Object.entries(r.attributes).filter((([,e])=>{const t=!e.delete;return delete e.delete,t}));return r.attributes=Object.fromEntries(n),r}resolve(e){e.meta&&function(e,t){for(const r of j){const n=t[r];n&&"boolean"!=typeof n&&O(t,r,V(e,n))}}(e,e.meta)}}function G(e){if(e instanceof RegExp)return e;const t=e.match(/^\/\^?([^/$]*)\$?\/([i]*)$/);if(t){const[,e,r]=t;return new RegExp(`^${e}$`,r)}return e}function V(e,t){const[r,n]=X(t);return r(e,n)}function X(e){if("string"==typeof e)return X([e,{}]);{const[t,r]=e,n=F[t];if(!n)throw new Error(`Failed to find function "${t}" when evaluating property expression`);return[n,r]}}class H{constructor(e){this.expr=e}toString(){return this.expr}}class Y{constructor(e,t,r,n,s){this.key=e,this.value=t,this.keyLocation=r,this.valueLocation=n,this.originalAttribute=s,void 0===this.value&&(this.value=null)}get isStatic(){return!this.isDynamic}get isDynamic(){return this.value instanceof H}valueMatches(e,t=!0){return null!==this.value&&(this.value instanceof H?t:e instanceof RegExp?null!==this.value.match(e):this.value===e)}}function W(e,t,r,n){if(!e)return null;const s=function(e,t,r){return"number"!=typeof e?e:"number"!=typeof r?e-t:(r<0&&(r=e+r),Math.min(e,r-t))}(e.size,t,r),i={filename:e.filename,offset:e.offset+t,line:e.line,column:e.column+t,size:s};if(n){let e=-1;const r=i.column;for(;;){if(e=n.indexOf("\n",e+1),!(e>=0&&e<t))break;i.column=r-(e+1),i.line++}}return i}var J,Q,K;!function(e){e[e.INITIAL=1]="INITIAL",e[e.DOCTYPE=2]="DOCTYPE",e[e.TEXT=3]="TEXT",e[e.TAG=4]="TAG",e[e.ATTR=5]="ATTR",e[e.CDATA=6]="CDATA",e[e.SCRIPT=7]="SCRIPT",e[e.STYLE=8]="STYLE"}(J||(J={})),function(e){e[e.TEXT=1]="TEXT",e[e.SCRIPT=2]="SCRIPT",e[e.STYLE=3]="STYLE"}(Q||(Q={}));class Z{constructor(e){var t,r,n,s;this.state=J.INITIAL,this.string=e.data,this.filename=null!==(t=e.filename)&&void 0!==t?t:"",this.offset=null!==(r=e.offset)&&void 0!==r?r:0,this.line=null!==(n=e.line)&&void 0!==n?n:1,this.column=null!==(s=e.column)&&void 0!==s?s:1,this.contentModel=Q.TEXT}getTruncatedLine(e=13){return JSON.stringify(this.string.length>e?`${this.string.slice(0,10)}...`:this.string)}consume(e,t){"number"!=typeof e&&(e=e[0].length);let r,n=this.string.slice(0,e);for(;(r=n.indexOf("\n"))>=0;)this.line++,this.column=1,n=n.substr(r+1);this.column+=n.length,this.offset+=e,this.string=this.string.substr(e),this.state=t}getLocation(e){return{filename:this.filename,offset:this.offset,line:this.line,column:this.column,size:e}}}!function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE"}(K||(K={}));const ee=Symbol("textContent");let te=0;class re{constructor(e,t,r){this.nodeType=e,this.nodeName=null!=t?t:"#document",this.location=r,this.disabledRules=new Set,this.childNodes=[],this.unique=te++,this.cache=null}cacheEnable(){this.cache=new Map}cacheGet(e){return this.cache?this.cache.get(e):void 0}cacheSet(e,t){return this.cache&&this.cache.set(e,t),t}cacheRemove(e){return!!this.cache&&this.cache.delete(e)}cacheExists(e){return Boolean(this.cache&&this.cache.has(e))}get textContent(){const e=this.cacheGet(ee);if(e)return e;const t=this.childNodes.map((e=>e.textContent)).join("");return this.cacheSet(ee,t),t}append(e){this.childNodes.push(e)}isRootElement(){return this.nodeType===K.DOCUMENT_NODE}isSameNode(e){return this.unique===e.unique}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}disableRule(e){this.disabledRules.add(e)}disableRules(e){for(const t of e)this.disableRule(t)}enableRule(e){this.disabledRules.delete(e)}enableRules(e){for(const t of e)this.enableRule(t)}ruleEnabled(e){return!this.disabledRules.has(e)}generateSelector(){return null}}class ne extends Array{constructor(e,t){if(e&&"string"==typeof e){const r=e.replace(/[\t\r\n]/g," "),{tokens:n,locations:s}=function(e,t){const r=[],n=t?[]:null;for(let s=0;s<e.length;){let i=e.indexOf(" ",s);-1===i&&(i=e.length);const o=i-s;if(0===o){s++;continue}const a=e.substring(s,i);if(r.push(a),n&&t){const e=W(t,s,i);n.push(e)}s+=o+1}return{tokens:r,locations:n}}(r,t);super(...n),this.locations=s}else super(0),this.locations=null;this.value=e instanceof H?e.expr:e||""}item(e){return this[e]}location(e){if(this.locations)return this.locations[e];throw new Error("Trying to access DOMTokenList location when base location isn't set")}contains(e){return this.includes(e)}*iterator(){for(let e=0;e<this.length;e++){const t=this.item(e),r=this.location(e);yield{index:e,item:t,location:r}}}}var se;!function(e){e[e.DESCENDANT=1]="DESCENDANT",e[e.CHILD=2]="CHILD",e[e.ADJACENT_SIBLING=3]="ADJACENT_SIBLING",e[e.GENERAL_SIBLING=4]="GENERAL_SIBLING",e[e.SCOPE=5]="SCOPE"}(se||(se={}));const ie={};const oe={"first-child":function(e){return null===e.previousSibling},"last-child":function(e){return null===e.nextSibling},"nth-child":function(e,t){if(!t)throw new Error("Missing argument to nth-child");const r=parseInt(t.trim(),10);return function(e){if(!e.parent)return-1;if(!ie[e.unique]){const t=e.parent.childElements.findIndex((t=>t.unique===e.unique));ie[e.unique]=t+1}return ie[e.unique]}(e)===r},scope:function(e){return e.isSameNode(this.scope)}};function ae(e){return e.toString().replace(/([:[\] ])/g,"\\$1")}class le{}class ce extends le{constructor(e){super(),this.classname=e}match(e){return e.classList.contains(this.classname)}}class ue extends le{constructor(e){super(),this.id=e.replace(/\\(.)/g,"$1")}match(e){return e.id===this.id}}class de extends le{constructor(e){super();const[,t,r,n]=e.match(/^(.+?)(?:([~^$*|]?=)"([^"]+?)")?$/);this.key=t,this.op=r,this.value=n}match(e){return(e.getAttribute(this.key,!0)||[]).some((e=>{switch(this.op){case void 0:return!0;case"=":return e.value===this.value;default:throw new Error(`Attribute selector operator ${this.op} is not implemented yet`)}}))}}class me extends le{constructor(e,t){super();const r=e.match(/^([^(]+)(?:\((.*)\))?$/);if(!r)throw new Error(`Missing pseudo-class after colon in selector pattern "${t}"`);const[,n,s]=r;this.name=n,this.args=s}match(e,t){const r=function(e,t){const r=oe[e];if(r)return r.bind(t);throw new Error(`Pseudo-class "${e}" is not implemented`)}(this.name,t);return r(e,this.args)}}class he{constructor(e){const t=e.match(/^([~+\->]?)((?:[*]|[^.#[:]+)?)(.*)$/);t.shift(),this.selector=e,this.combinator=function(e,t){if(":scope"===t)return se.SCOPE;switch(e){case void 0:case null:case"":return se.DESCENDANT;case">":return se.CHILD;case"+":return se.ADJACENT_SIBLING;case"~":return se.GENERAL_SIBLING;default:throw new Error(`Unknown combinator "${e}"`)}}(t.shift(),e),this.tagName=t.shift()||"*";const r=t[0]?t[0].split(/(?=(?<!\\)[.#[:])/):[];this.pattern=r.map((e=>this.createMatcher(e)))}match(e,t){return e.is(this.tagName)&&this.pattern.every((r=>r.match(e,t)))}createMatcher(e){switch(e[0]){case".":return new ce(e.slice(1));case"#":return new ue(e.slice(1));case"[":return new de(e.slice(1,-1));case":":return new me(e.slice(1),this.selector);default:throw new Error(`Failed to create matcher for "${e}"`)}}}class pe{constructor(e){this.pattern=pe.parse(e)}*match(e){const t={scope:e};yield*this.matchInternal(e,0,t)}*matchInternal(e,t,r){if(t>=this.pattern.length)return void(yield e);const n=this.pattern[t],s=pe.findCandidates(e,n);for(const i of s)n.match(i,r)&&(yield*this.matchInternal(i,t+1,r))}static parse(e){return(e=e.replace(/([+~>]) /g,"$1")).split(/(?:(?<!\\) )+/).map((e=>new he(e)))}static findCandidates(e,t){switch(t.combinator){case se.DESCENDANT:return e.getElementsByTagName(t.tagName);case se.CHILD:return e.childElements.filter((e=>e.is(t.tagName)));case se.ADJACENT_SIBLING:return pe.findAdjacentSibling(e);case se.GENERAL_SIBLING:return pe.findGeneralSibling(e);case se.SCOPE:return[e]}return[]}static findAdjacentSibling(e){let t=!1;return e.siblings.filter((r=>t?(t=!1,!0):(r===e&&(t=!0),!1)))}static findGeneralSibling(e){let t=!1;return e.siblings.filter((r=>!!t||(r===e&&(t=!0),!1)))}}class fe extends re{constructor(e,t){super(K.TEXT_NODE,"#text",t),this.text=e}get textContent(){return this.text.toString()}get isStatic(){return!this.isDynamic}get isDynamic(){return this.text instanceof H}}var ge;function ye(e){return e.nodeType===K.ELEMENT_NODE}t.NodeClosed=void 0,(ge=t.NodeClosed||(t.NodeClosed={}))[ge.Open=0]="Open",ge[ge.EndTag=1]="EndTag",ge[ge.VoidOmitted=2]="VoidOmitted",ge[ge.VoidSelfClosed=3]="VoidSelfClosed",ge[ge.ImplicitClosed=4]="ImplicitClosed";class be extends re{constructor(e,t,r,n,s){if(super(e?K.ELEMENT_NODE:K.DOCUMENT_NODE,e,s),!function(e){return Boolean(""!==e&&"*"!==e)}(e))throw new Error(`The tag name provided ('${e||""}') is not a valid name`);if(this.tagName=e||"#document",this.parent=null!=t?t:null,this.attr={},this.metaElement=null!=n?n:null,this.closed=r,this.voidElement=!!n&&Boolean(n.void),this.depth=0,this.annotation=null,t){t.childNodes.push(this);let e=t;for(;e.parent;)this.depth++,e=e.parent}}static rootNode(e){return new be(void 0,null,t.NodeClosed.EndTag,null,e)}static fromTokens(e,r,n,s){const i=e.data[2];if(!i)throw new Error("tagName cannot be empty");const o=s?s.getMetaFor(i):null,a="/"!==e.data[1],l=function(e,r){let n=t.NodeClosed.Open;r&&r.void&&(n=t.NodeClosed.VoidOmitted);"/>"===e.data[0]&&(n=t.NodeClosed.VoidSelfClosed);return n}(r,o),c=W(e.location,1);return new be(i,a?n:null,l,o,c)}get annotatedName(){return this.annotation?this.annotation:`<${this.tagName}>`}get childElements(){return this.childNodes.filter(ye)}closest(e){let t=this;for(;t;){if(t.matches(e))return t;t=t.parent}return null}generateSelector(){if(this.isRootElement())return null;const e=[];let t;for(t=this;t.parent;t=t.parent);for(let r=this;r.parent;r=r.parent){if(r.id){const n=ae(r.id);if(1===t.querySelectorAll(`#${n}`).length){e.push(`#${n}`);break}}const n=r.parent.childElements,s=n.findIndex((e=>e.unique===r.unique));1===n.filter((e=>e.is(r.tagName))).length?e.push(r.tagName.toLowerCase()):e.push(`${r.tagName.toLowerCase()}:nth-child(${s+1})`)}return e.reverse().join(" > ")}is(e){return"*"===e||this.tagName.toLowerCase()===e.toLowerCase()}loadMeta(e){this.metaElement||(this.metaElement={});for(const t of I){const r=e[t];void 0!==r?O(this.metaElement,t,r):delete this.metaElement[t]}}matches(e){let t=this;for(;t.parent;)t=t.parent;for(const r of t.querySelectorAll(e))if(r.unique===this.unique)return!0;return!1}get meta(){return this.metaElement}setAnnotation(e){this.annotation=e}setAttribute(e,t,r,n,s){e=e.toLowerCase(),this.attr[e]||(this.attr[e]=[]),this.attr[e].push(new Y(e,t,r,n,s))}get attributes(){return Object.values(this.attr).reduce(((e,t)=>e.concat(t)),[])}hasAttribute(e){return(e=e.toLowerCase())in this.attr}getAttribute(e,t=!1){if((e=e.toLowerCase())in this.attr){const r=this.attr[e];return t?r:r[0]}return null}getAttributeValue(e){const t=this.getAttribute(e);return t&&null!==t.value?t.value.toString():null}appendText(e,t){this.childNodes.push(new fe(e,t))}get classList(){if(!this.hasAttribute("class"))return new ne(null,null);const e=this.getAttribute("class",!0).filter((e=>e.isStatic)).map((e=>e.value)).join(" ");return new ne(e,null)}get id(){return this.getAttributeValue("id")}get firstElementChild(){const e=this.childElements;return e.length>0?e[0]:null}get lastElementChild(){const e=this.childElements;return e.length>0?e[e.length-1]:null}get siblings(){return this.parent?this.parent.childElements:[this]}get previousSibling(){const e=this.siblings.findIndex((e=>e.unique===this.unique));return e>=1?this.siblings[e-1]:null}get nextSibling(){const e=this.siblings.findIndex((e=>e.unique===this.unique));return e<=this.siblings.length-2?this.siblings[e+1]:null}getElementsByTagName(e){return this.childElements.reduce(((t,r)=>t.concat(r.is(e)?[r]:[],r.getElementsByTagName(e))),[])}querySelector(e){return this.querySelectorImpl(e).next().value||null}querySelectorAll(e){const t=this.querySelectorImpl(e),r=new Set(t);return Array.from(r.values())}*querySelectorImpl(e){if(e)for(const t of e.split(/,\s*/)){const e=new pe(t);yield*e.match(this)}}visitDepthFirst(e){!function t(r){r.childElements.forEach(t),r.isRootElement()||e(r)}(this)}someChildren(e){return this.childElements.some((function t(r){return!!e(r)||r.childElements.some(t)}))}everyChildren(e){return this.childElements.every((function t(r){if(!e(r))return!1;return r.childElements.every(t)}))}find(e){return function(t){if(e(t))return t;for(const r of t.childElements){const t=r.find(e);if(t)return t}return null}(this)}}class ve{constructor(e){this.root=be.rootNode(e),this.active=this.root,this.doctype=null}pushActive(e){this.active=e}popActive(){this.active.isRootElement()||(this.active=this.active.parent||this.root)}getActive(){return this.active}resolveMeta(e){this.visitDepthFirst((t=>e.resolve(t)))}getElementsByTagName(e){return this.root.getElementsByTagName(e)}visitDepthFirst(e){this.root.visitDepthFirst(e)}find(e){return this.root.find(e)}querySelector(e){return this.root.querySelector(e)}querySelectorAll(e){return this.root.querySelectorAll(e)}}const we=["exclude"];class Te{static validatePermitted(e,t){return!t||t.some((t=>Te.validatePermittedRule(e,t)))}static validateOccurrences(e,t,r){if(!t)return!0;const n=function(e){if(!e)return null;const[,t]=e.match(/^.*?([?*]?)$/);switch(t){case"?":return 1;case"":case"*":return null;default:throw new Error(`Invalid amount qualifier "${t}" used`)}}(t.find((t=>{if("string"!=typeof t)return!1;const r=t.match(/^(.*?)[?*]?$/);return r&&r[1]===e.tagName})));return null===n||r<=n}static validateOrder(e,t,r){if(!t)return!0;let n=0,s=null;for(const i of e){const e=n;for(;t[n]&&!Te.validatePermittedCategory(i,t[n],!0);)n++;if(n>=t.length){if(t.find((e=>Te.validatePermittedCategory(i,e,!0))))return r(i,s),!1;n=e}s=i}return!0}static validateAncestors(e,t){return!t||0===t.length||t.some((t=>e.closest(t)))}static validateRequiredContent(e,t){return t&&0!==t.length?t.filter((t=>!e.childElements.some((e=>e.is(t))))):[]}static validateAttribute(e,t){const r=t[e.key];if(!r)return!0;const n=e.value;if(n instanceof H)return!0;const s=null===n||""===n;if(r.boolean)return s||n===e.key;if(r.omit&&s)return!0;if(r.list){return new ne(n,e.valueLocation).every((e=>this.validateAttributeValue(e,r)))}return this.validateAttributeValue(n,r)}static validateAttributeValue(e,t){return!t.enum||null!=e&&t.enum.some((t=>t instanceof RegExp?!!e.match(t):e===t))}static validatePermittedRule(e,t,r=!1){return"string"==typeof t?Te.validatePermittedCategory(e,t,!r):Array.isArray(t)?t.every((t=>Te.validatePermittedRule(e,t,r))):(function(e){for(const t of Object.keys(e))if(!we.includes(t)){const r=JSON.stringify(e);throw new Error(`Permitted rule "${r}" contains unknown property "${t}"`)}}(t),!t.exclude||(Array.isArray(t.exclude)?!t.exclude.some((t=>Te.validatePermittedRule(e,t,!0))):!Te.validatePermittedRule(e,t.exclude,!0)))}static validatePermittedCategory(e,t,r){if("@"!==t[0]){const[,r]=t.match(/^(.*?)[?*]?$/);return e.tagName===r}if(!e.meta)return r;switch(t){case"@meta":return e.meta.metadata;case"@flow":return e.meta.flow;case"@sectioning":return e.meta.sectioning;case"@heading":return e.meta.heading;case"@phrasing":return e.meta.phrasing;case"@embedded":return e.meta.embedded;case"@interactive":return e.meta.interactive;case"@script":return e.meta.scriptSupporting;case"@form":return e.meta.form;default:throw new Error(`Invalid content category "${t}"`)}}}var Ee={$schema:"http://json-schema.org/draft-06/schema#",$id:"https://html-validate.org/schemas/config.json",type:"object",additionalProperties:!1,properties:{$schema:{type:"string"},root:{type:"boolean",title:"Mark as root configuration",description:"If this is set to true no further configurations will be searched.",default:!1},extends:{type:"array",items:{type:"string"},title:"Configurations to extend",description:"Array of shareable or builtin configurations to extend."},elements:{type:"array",items:{anyOf:[{type:"string"},{type:"object"}]},title:"Element metadata to load",description:"Array of modules, plugins or files to load element metadata from. Use <rootDir> to refer to the folder with the package.json file.",examples:[["html-validate:recommended","plugin:recommended","module","./local-file.json"]]},plugins:{type:"array",items:{type:"string"},title:"Plugins to load",description:"Array of plugins load. Use <rootDir> to refer to the folder with the package.json file.",examples:[["my-plugin","./local-plugin"]]},transform:{type:"object",additionalProperties:{type:"string"},title:"File transformations to use.",description:"Object where key is regular expression to match filename and value is name of transformer.",examples:[{"^.*\\.foo$":"my-transformer","^.*\\.bar$":"my-plugin","^.*\\.baz$":"my-plugin:named"}]},rules:{type:"object",patternProperties:{".*":{anyOf:[{enum:[0,1,2,"off","warn","error"]},{type:"array",minItems:1,maxItems:1,items:[{enum:[0,1,2,"off","warn","error"]}]},{type:"array",minItems:2,maxItems:2,items:[{enum:[0,1,2,"off","warn","error"]},{}]}]}},title:"Rule configuration.",description:"Enable/disable rules, set severity. Some rules have additional configuration like style or patterns to use.",examples:[{foo:"error",bar:"off",baz:["error",{style:"camelcase"}]}]}}};const ke=r(20270),xe=r(30876);function $e(e){let t=e[0].start+1,r="";for(const n of e)r+=" ".repeat(n.start+1-t),r+=n.value.raw,t=n.end-2;return r}function Ae(e,t){let r=e.line,n=e.column+1;for(let s=0;s<t.length;s++)if(r>1)"\n"===t[s]&&r--;else{if(!(n>1))return s;n--}throw new Error("Failed to compute location offset from position")}function qe(e,t,r){switch(e.type){case"FunctionExpression":case"Identifier":return null;case"Literal":return"string"!=typeof e.value?null:{data:e.value.toString(),filename:t,line:e.loc.start.line,column:e.loc.start.column+1,offset:Ae(e.loc.start,r)+1};case"TemplateLiteral":return{data:$e(e.quasis),filename:t,line:e.loc.start.line,column:e.loc.start.column+1,offset:Ae(e.loc.start,r)+1};case"TaggedTemplateExpression":return{data:$e(e.quasi.quasis),filename:t,line:e.quasi.loc.start.line,column:e.quasi.loc.start.column+1,offset:Ae(e.quasi.loc.start,r)+1};case"ArrowFunctionExpression":return["Literal","TemplateLiteral"].includes(e.body.type)?qe(e.body,t,r):null;default:{const r=e.loc.start,n=`${t}:${r.line}:${r.column}`;throw new Error(`Unhandled node type "${e.type}" at "${n}" in extractLiteral`)}}}class Ce{constructor(e,t,r){this.ast=e,this.filename=t,this.data=r}static fromFilename(e){const t=p.default.readFileSync(e,"utf-8"),r=ke.parse(t,{ecmaVersion:2017,sourceType:"module",loc:!0});return new Ce(r,e,t)}static fromString(e,t){const r=ke.parse(e,{ecmaVersion:2017,sourceType:"module",loc:!0});return new Ce(r,t||"inline",e)}static createSource(e){return[{column:1,data:p.default.readFileSync(e,"utf-8"),filename:e,line:1,offset:0}]}extractObjectProperty(e){const t=[],{filename:r,data:n}=this;return xe.simple(this.ast,{Property(s){if(function(e,t,r){switch(e.type){case"Identifier":return e.name===t;case"Literal":return e.value===t;default:{const t=e.loc.start,n=`${r}:${t.line}:${t.column}`;throw new Error(`Unhandled node type "${e.type}" at "${n}" in compareKey`)}}}(s.key,e,r)){const e=qe(s.value,r,n);e&&(e.filename=r,t.push(e))}}}),t}}var Ne;!function(e){e[e.VERSION=1]="VERSION"}(Ne||(Ne={}));const Se="6.5.0";var Ie;function Oe(e){switch(e){case 0:case"off":return t.Severity.DISABLED;case"disable":return console.warn('Deprecated alias "disabled" will be removed, replace with severity "off"'),t.Severity.DISABLED;case 1:case"warn":return t.Severity.WARN;case 2:case"error":return t.Severity.ERROR;default:throw new Error(`Invalid severity "${e}"`)}}function Le(e,t=!1){if(null===e)return"null";if("number"==typeof e)return e.toString();if("string"==typeof e)return t?`'${function(e){return e.replace(/'/g,"\\'")}(e)}'`:e;if(Array.isArray(e)){return`[ ${e.map((e=>Le(e,!0))).join(", ")} ]`}if("object"==typeof e){return`{ ${Object.entries(e).map((([e,t])=>`${e}: ${Le(t,!0)}`)).join(", ")} }`}return String(e)}function Re(e,t){return e.replace(/{{\s*([^\s]+)\s*}}/g,((e,r)=>void 0!==t[r]?Le(t[r]):e))}t.Severity=void 0,(Ie=t.Severity||(t.Severity={}))[Ie.DISABLED=0]="DISABLED",Ie[Ie.WARN=1]="WARN",Ie[Ie.ERROR=2]="ERROR";const De={"tag:open":"tag:start","tag:close":"tag:end"},Pe=new g.default({strict:!0,strictTuples:!0,strictTypes:!0});Pe.addMetaSchema(E);class Me{constructor(e){this.reporter=null,this.parser=null,this.meta=null,this.event=null,this.options=e,this.enabled=!0,this.severity=0,this.name=""}getSeverity(){return this.severity}setServerity(e){this.severity=e}setEnabled(e){this.enabled=e}get deprecated(){return!1}isEnabled(){return this.enabled&&this.severity>=t.Severity.WARN}isKeywordIgnored(e){const{include:t,exclude:r}=this.options;return!(!t||t.includes(e))||!(!r||!r.includes(e))}getTagsWithProperty(e){return this.meta.getTagsWithProperty(e)}getTagsDerivedFrom(e){return this.meta.getTagsDerivedFrom(e)}static schema(){return null}report(e,t,r,n){if(this.isEnabled()&&(!e||e.ruleEnabled(this.name))){const s=this.findLocation({node:e,location:r,event:this.event}),i=Re(t,null!=n?n:{});this.reporter.add(this,i,this.severity,e,s,n)}}findLocation(e){return e.location?e.location:e.event&&e.event.location?e.event.location:e.node&&e.node.location?e.node.location:{}}on(e,...t){var r;const n=De[e];n&&(e=n);const s=t.pop(),i=null!==(r=t.pop())&&void 0!==r?r:()=>!0;return this.parser.on(e,((e,t)=>{this.isEnabled()&&i(t)&&(this.event=t,s(t))}))}init(e,t,r,n){this.parser=e,this.reporter=t,this.severity=r,this.meta=n}static validateOptions(e,t,r,n,s,i){var o;if(!e)return;const a=e.schema();if(!a)return;const l=function(e,t){const r=`rule/${e}`,n=Pe.getSchema(r);if(n)return n;const s={$id:r,type:"object",additionalProperties:!1,properties:t};return Pe.compile(s)}(t,a);if(!l(n)){const e=(null!==(o=l.errors)&&void 0!==o?o:[]).map((e=>(e.instancePath=`${r}${e.instancePath}`,e)));throw new $(s,"Rule configuration error",i,a,e)}}documentation(e){return null}}function je(e){e=e.replace("@",q);const t=b.default.parse(e),r=b.default.join(q,"rules");return`https://html-validate.org/rules/${b.default.relative(r,b.default.join(t.dir,t.name)).replace(/\\/g,"/")}.html`}const Fe={allowExternal:!0,allowRelative:!0,allowAbsolute:!0,allowBase:!0},ze={a:"href",img:"src",link:"href",script:"src"},_e={external:"External links are not allowed by current configuration.","relative-base":"Links relative to <base> are not allowed by current configuration.","relative-path":"Relative links are not allowed by current configuration.",absolute:"Absolute links are not allowed by current configuration.",anchor:null};function Be(e){return"boolean"==typeof e?e:{include:e.include?e.include.map((e=>new RegExp(e))):null,exclude:e.exclude?e.exclude.map((e=>new RegExp(e))):null}}function Ue(e,t){return!(t.include&&!t.include.some((t=>t.test(e))))&&(!t.exclude||!t.exclude.some((t=>t.test(e))))}const Ge=["main","nav","table","td","th","aside","header","footer","section","article","form","img","area","fieldset","summary","figure"];class Ve extends x{}class Xe{constructor(e,t){if(Array.isArray(e)||(e=[e]),0===e.length)throw new Ve(`Missing style for ${t} rule`);this.styles=this.parseStyle(e,t)}match(e){return this.styles.some((t=>e.match(t.pattern)))}get name(){const e=this.styles.map((e=>e.name));switch(this.styles.length){case 1:return e[0];case 2:return e.join(" or ");default:{const t=e.slice(-1);return`${e.slice(0,-1).join(", ")} or ${t}`}}}parseStyle(e,t){return e.map((r=>{switch(r.toLowerCase()){case"lowercase":return{pattern:/^[a-z]*$/,name:"lowercase"};case"uppercase":return{pattern:/^[A-Z]*$/,name:"uppercase"};case"pascalcase":return{pattern:/^[A-Z][A-Za-z]*$/,name:"PascalCase"};case"camelcase":return{pattern:/^[a-z][A-Za-z]*$/,name:"camelCase"};default:throw new Ve(`Invalid style "${e}" for ${t} rule`)}}))}}const He={style:"lowercase",ignoreForeign:!0};var Ye;t.TokenType=void 0,(Ye=t.TokenType||(t.TokenType={}))[Ye.UNICODE_BOM=1]="UNICODE_BOM",Ye[Ye.WHITESPACE=2]="WHITESPACE",Ye[Ye.DOCTYPE_OPEN=3]="DOCTYPE_OPEN",Ye[Ye.DOCTYPE_VALUE=4]="DOCTYPE_VALUE",Ye[Ye.DOCTYPE_CLOSE=5]="DOCTYPE_CLOSE",Ye[Ye.TAG_OPEN=6]="TAG_OPEN",Ye[Ye.TAG_CLOSE=7]="TAG_CLOSE",Ye[Ye.ATTR_NAME=8]="ATTR_NAME",Ye[Ye.ATTR_VALUE=9]="ATTR_VALUE",Ye[Ye.TEXT=10]="TEXT",Ye[Ye.TEMPLATING=11]="TEMPLATING",Ye[Ye.SCRIPT=12]="SCRIPT",Ye[Ye.STYLE=13]="STYLE",Ye[Ye.COMMENT=14]="COMMENT",Ye[Ye.CONDITIONAL=15]="CONDITIONAL",Ye[Ye.DIRECTIVE=16]="DIRECTIVE",Ye[Ye.EOF=17]="EOF";const We=/^\uFEFF/,Je=/^(?:\r\n|\r|\n|[ \t]+(?:\r\n|\r|\n)?)/,Qe=/^<!(DOCTYPE)\s/i,Ke=/^[^>]+/,Ze=/^>/,et=/^<\?xml.*?\?>\s+/,tt=/^<(\/?)([a-zA-Z0-9\-:]+)/,rt=/^\/?>/,nt=/^[^]*?(?=(?:[ \t]*(?:\r\n|\r|\n)|<[^ ]|$))/,st=/^(?:<%.*?%>|<\?.*?\?>|<\$.*?\$>)/s,it=/^[^]*?(?=<|$)/,ot=/^([^\t\r\n\f \/><"'=]+)/,at=/^(\s*=\s*)'([^']*?)(')/,lt=/^(\s*=\s*)"([^"]*?)(")/,ct=/^(\s*=\s*)([^\t\r\n\f "'<>][^\t\r\n\f <>]*)/,ut=/^<!\[CDATA\[/,dt=/^[^]*?]]>/,mt=/^[^]*?(?=<\/script)/,ht=/^<(\/)(script)/,pt=/^[^]*?(?=<\/style)/,ft=/^<(\/)(style)/,gt=/^<!--\s*(\[)html-validate-([a-z0-9-]+)\s*(.*?)(]?)\s*-->/,yt=/^<!--([^]*?)-->/,bt=/^<!\[([^\]]*?)\]>/;class vt extends Error{constructor(e,t){super(t),this.location=e}}class wt{*tokenize(e){const r=new Z(e);let n=r.state,s=r.string.length;for(;r.string.length>0;){switch(r.state){case J.INITIAL:yield*this.tokenizeInitial(r);break;case J.DOCTYPE:yield*this.tokenizeDoctype(r);break;case J.TAG:yield*this.tokenizeTag(r);break;case J.ATTR:yield*this.tokenizeAttr(r);break;case J.TEXT:yield*this.tokenizeText(r);break;case J.CDATA:yield*this.tokenizeCDATA(r);break;case J.SCRIPT:yield*this.tokenizeScript(r);break;case J.STYLE:yield*this.tokenizeStyle(r);break;default:this.unhandled(r)}r.state===n&&r.string.length===s&&this.errorStuck(r),n=r.state,s=r.string.length}yield this.token(r,t.TokenType.EOF,[])}token(e,t,r){const n=r.length>0?r[0].length:0;return{type:t,location:e.getLocation(n),data:Array.from(r)}}unhandled(e){const t=`failed to tokenize ${JSON.stringify(e.string.length>13?`${e.string.slice(0,15)}...`:e.string)}, unhandled state ${J[e.state]}.`;throw new vt(e.getLocation(1),t)}errorStuck(e){const t=J[e.state],r=`failed to tokenize ${e.getTruncatedLine()}, state ${t} failed to consume data or change state.`;throw new vt(e.getLocation(1),r)}evalNextState(e,t){return"function"==typeof e?e(t):e}*match(e,t,r){const n=t.length;for(let i=0;i<n;i++){const[r,n,s]=t[i],o=r?e.string.match(r):[""];if(o){let t=null;!1!==s&&(t=this.token(e,s,o),yield t);const r=this.evalNextState(n,t);return e.consume(o,r),void this.enter(e,r,o)}}const s=`failed to tokenize ${e.getTruncatedLine()}, ${r}.`;throw new vt(e.getLocation(1),s)}enter(e,t,r){t===J.TAG&&r&&"<"===r[0][0]&&("<script"===r[0]?e.contentModel=Q.SCRIPT:"<style"===r[0]?e.contentModel=Q.STYLE:e.contentModel=Q.TEXT)}*tokenizeInitial(e){yield*this.match(e,[[We,J.INITIAL,t.TokenType.UNICODE_BOM],[et,J.INITIAL,!1],[Qe,J.DOCTYPE,t.TokenType.DOCTYPE_OPEN],[Je,J.INITIAL,t.TokenType.WHITESPACE],[gt,J.INITIAL,t.TokenType.DIRECTIVE],[bt,J.INITIAL,t.TokenType.CONDITIONAL],[yt,J.INITIAL,t.TokenType.COMMENT],[!1,J.TEXT,!1]],"expected doctype")}*tokenizeDoctype(e){yield*this.match(e,[[Je,J.DOCTYPE,t.TokenType.WHITESPACE],[Ke,J.DOCTYPE,t.TokenType.DOCTYPE_VALUE],[Ze,J.TEXT,t.TokenType.DOCTYPE_CLOSE]],"expected doctype name")}*tokenizeTag(e){yield*this.match(e,[[rt,function(t){const r=t;switch(e.contentModel){case Q.TEXT:return J.TEXT;case Q.SCRIPT:return r&&"/"!==r.data[0][0]?J.SCRIPT:J.TEXT;case Q.STYLE:return r&&"/"!==r.data[0][0]?J.STYLE:J.TEXT}},t.TokenType.TAG_CLOSE],[ot,J.ATTR,t.TokenType.ATTR_NAME],[Je,J.TAG,t.TokenType.WHITESPACE]],'expected attribute, ">" or "/>"')}*tokenizeAttr(e){yield*this.match(e,[[at,J.TAG,t.TokenType.ATTR_VALUE],[lt,J.TAG,t.TokenType.ATTR_VALUE],[ct,J.TAG,t.TokenType.ATTR_VALUE],[!1,J.TAG,!1]],'expected attribute, ">" or "/>"')}*tokenizeText(e){yield*this.match(e,[[Je,J.TEXT,t.TokenType.WHITESPACE],[ut,J.CDATA,!1],[gt,J.TEXT,t.TokenType.DIRECTIVE],[bt,J.TEXT,t.TokenType.CONDITIONAL],[yt,J.TEXT,t.TokenType.COMMENT],[st,J.TEXT,t.TokenType.TEMPLATING],[tt,J.TAG,t.TokenType.TAG_OPEN],[nt,J.TEXT,t.TokenType.TEXT],[it,J.TEXT,t.TokenType.TEXT]],'expected text or "<"')}*tokenizeCDATA(e){yield*this.match(e,[[dt,J.TEXT,!1]],"expected ]]>")}*tokenizeScript(e){yield*this.match(e,[[ht,J.TAG,t.TokenType.TAG_OPEN],[mt,J.SCRIPT,t.TokenType.SCRIPT]],"expected <\/script>")}*tokenizeStyle(e){yield*this.match(e,[[ft,J.TAG,t.TokenType.TAG_OPEN],[pt,J.STYLE,t.TokenType.STYLE]],"expected </style>")}}const Tt=/(\s+)/;function Et(e){return e.type===t.TokenType.ATTR_VALUE}const kt={pattern:"[a-z0-9-:]+",ignoreForeign:!0};var xt;!function(e){e.SINGLE_QUOTE="'",e.DOUBLE_QUOTE='"',e.AUTO_QUOTE="auto"}(xt||(xt={}));const $t={style:"auto",unquoted:!1};const At={style:"omit"};function qt(e,t){const r=e.key;switch(t.toLowerCase()){case"omit":return`Attribute "${r}" should omit value`;case"empty":return`Attribute "${r}" value should be empty string`;case"name":return`Attribute "${r}" should be set to ${r}="${r}"`}return""}const Ct={style:"omit"};function Nt(e,t){var r;return Boolean(null===(r=t[e.key])||void 0===r?void 0:r.omit)}function St(e){return!e.isDynamic&&(null===e.value||""===e.value)}function It(e,t){const r=e.key;switch(t.toLowerCase()){case"omit":return`Attribute "${r}" should omit value`;case"empty":return`Attribute "${r}" value should be empty string`}return""}function Ot(e){switch(e){case"kebabcase":return/^[a-z0-9-]+$/;case"camelcase":return/^[a-z][a-zA-Z0-9]+$/;case"underscore":return/^[a-z0-9_]+$/;default:return new RegExp(e)}}function Lt(e){const t=Ot(e).toString();switch(e){case"kebabcase":case"camelcase":case"underscore":return`${t} (${e})`;default:return t}}const Rt={pattern:"kebabcase"};const Dt={include:null,exclude:null};const Pt={style:"uppercase"};const Mt={style:"lowercase"};const jt={pattern:"^[a-z][a-z0-9\\-._]*-[a-z0-9\\-._]*$",whitelist:[],blacklist:[]};const Ft=Symbol(_t.name);var zt;function _t(e){if(e.cacheExists(Ft))return e.cacheGet(Ft);const t=Bt(e);return t.some((e=>e.isDynamic))?e.cacheSet(Ft,zt.DYNAMIC_TEXT):t.some((e=>null!==e.textContent.match(/\S/)))?e.cacheSet(Ft,zt.STATIC_TEXT):e.cacheSet(Ft,zt.EMPTY_TEXT)}function Bt(e){let t=[];for(const r of e.childNodes)switch(r.nodeType){case K.TEXT_NODE:t.push(r);break;case K.ELEMENT_NODE:t=t.concat(Bt(r))}return t}!function(e){e[e.EMPTY_TEXT=0]="EMPTY_TEXT",e[e.DYNAMIC_TEXT=1]="DYNAMIC_TEXT",e[e.STATIC_TEXT=2]="STATIC_TEXT"}(zt||(zt={}));const Ut=["h1","h2","h3","h4","h5","h6"].join(",");const Gt={allowMultipleH1:!1,minInitialRank:"h1",sectioningRoots:["dialog",'[role="dialog"]']};function Vt(e){const t=e.target;return Boolean(t.meta&&t.meta.heading)}const Xt={pattern:"kebabcase"};const Ht=new Map([["accept",["file"]],["alt",["image"]],["autocomplete",["hidden","text","search","url","tel","email","password","date","month","week","time","datetime-local","number","range","color"]],["capture",["file"]],["checked",["checkbox","radio"]],["dirname",["text","search"]],["formaction",["submit","image"]],["formenctype",["submit","image"]],["formmethod",["submit","image"]],["formnovalidate",["submit","image"]],["formtarget",["submit","image"]],["height",["image"]],["list",["text","search","url","tel","email","date","month","week","time","datetime-local","number","range","color"]],["max",["date","month","week","time","datetime-local","number","range"]],["maxlength",["text","search","url","tel","email","password"]],["min",["date","month","week","time","datetime-local","number","range"]],["minlength",["text","search","url","tel","email","password"]],["multiple",["email","file"]],["pattern",["text","search","url","tel","email","password"]],["placeholder",["text","search","url","tel","email","password","number"]],["readonly",["text","search","url","tel","email","password","date","month","week","time","datetime-local","number"]],["required",["text","search","url","tel","email","password","date","month","week","time","datetime-local","number","checkbox","radio","file"]],["size",["text","search","url","tel","email","password"]],["src",["image"]],["step",["date","month","week","time","datetime-local","number","range"]],["width",["image"]]]);function Yt(e){const{target:t}=e;return t.is("input")}const Wt=Symbol(Zt.name),Jt=Symbol(er.name),Qt=Symbol(tr.name);function Kt(e){return!Zt(e)&&!tr(e)}function Zt(e){if(e.cacheExists(Wt))return Boolean(e.cacheGet(Wt));let t=e;do{const e=t.getAttribute("aria-hidden");if(e&&"true"===e.value)return t.cacheSet(Wt,!0);if(!t.parent)break;t=t.parent}while(!t.isRootElement());return e.cacheSet(Wt,!1)}function er(e){if(e.cacheExists(Jt))return Boolean(e.cacheGet(Jt));let t=e;do{const e=t.getAttribute("hidden");if(null!==e&&e.isStatic)return t.cacheSet(Jt,!0);if(!t.parent)break;t=t.parent}while(!t.isRootElement());return e.cacheSet(Jt,!1)}function tr(e){if(e.cacheExists(Qt))return Boolean(e.cacheGet(Qt));let t=e;do{const e=t.getAttribute("role");if(e&&"presentation"===e.value)return t.cacheSet(Qt,!0);if(!t.parent)break;t=t.parent}while(!t.isRootElement());return e.cacheSet(Qt,!1)}function rr(e){return!(er(e)||Zt(e))}const nr={maxlength:70};const sr={include:null,exclude:null};function ir(e){const t=e.getAttribute("id");return!!t&&(!!t.value&&!t.isDynamic)}const or={include:null,exclude:null,allowedProperties:["display"]};const ar=[{property:"aria-activedescendant",isList:!1},{property:"aria-controls",isList:!0},{property:"aria-describedby",isList:!0},{property:"aria-details",isList:!1},{property:"aria-errormessage",isList:!1},{property:"aria-flowto",isList:!0},{property:"aria-labelledby",isList:!0},{property:"aria-owns",isList:!0}];function lr(e,t){return 0===e.querySelectorAll(`[id="${t}"]`).length}const cr={relaxed:!1},ur=/([<>]|&(?![a-zA-Z0-9#]+;))/g,dr=/([<>"'=`]|&(?![a-zA-Z0-9#]+;))/g,mr=/^(<%.*?%>|<\?.*?\?>|<\$.*?\$>)$/s,hr=new Map([['"',"&quot;"],["&","&amp;"],["'","&apos;"],["<","&lt;"],["=","&equals;"],[">","&gt;"],["`","&grave;"]]);const pr={article:["article"],header:["banner"],button:["button"],td:["cell"],input:["checkbox","radio","input"],aside:["complementary"],footer:["contentinfo"],figure:["figure"],form:["form"],h1:["heading"],h2:["heading"],h3:["heading"],h4:["heading"],h5:["heading"],h6:["heading"],a:["link"],ul:["list"],select:["listbox"],li:["listitem"],main:["main"],nav:["navigation"],progress:["progressbar"],section:["region"],table:["table"],textarea:["textbox"]};const fr=/^(.+):.+$/,gr={ignoreForeign:!0,ignoreXML:!0};const yr=["button","submit","reset","image"],br={button:'<button type="button">',submit:'<button type="submit">',reset:'<button type="reset">',image:'<button type="button">'},vr={include:null,exclude:null};const wr={mapping:{article:"article",banner:"header",button:"button",cell:"td",checkbox:"input",complementary:"aside",contentinfo:"footer",figure:"figure",form:"form",heading:"hN",input:"input",link:"a",list:"ul",listbox:"select",listitem:"li",main:"main",navigation:"nav",progressbar:"progress",radio:"input",region:"section",table:"table",textbox:"textarea"},include:null,exclude:null};const Tr={target:"all"},Er=new RegExp("^(\\w+://|//)"),kr={link:"href",script:"src"};const xr=["","application/ecmascript","application/javascript","text/ecmascript","text/javascript"];function $r(e){const t=e.getAttribute("alt");return null!==t&&null!==t.value&&(t.isDynamic||""!==t.value.toString())}function Ar(e){const t=e.getAttribute("aria-label");return null!==t&&null!==t.value&&(t.isDynamic||""!==t.value.toString())}function qr(e,t){const r=e.getAttribute(t);return Boolean(r&&r.valueMatches(/.+/,!0))}function Cr(e){return!!function(e){return Boolean(e&&e.nodeType===K.TEXT_NODE)}(e)&&(e.isDynamic||""!==e.textContent.trim())}function Nr(e){if(!Kt(e))return!1;return!!e.childNodes.some((e=>Cr(e)))||(!!qr(e,"aria-label")||(!!qr(e,"aria-labelledby")||(!(!e.is("img")||!qr(e,"alt"))||(!!function(e){if(!e.is("input"))return!1;if(e.hasAttribute("value"))return!1;const t=e.getAttribute("type");return Boolean(t&&t.valueMatches(/submit|reset/,!1))}(e)||e.childElements.some((e=>Nr(e)))))))}class Sr extends Me{documentation(e){const t={description:"The textual content for this element is not valid.",url:je("@/rules/text-content.ts")};if(null==e?void 0:e.textContent)switch(e.textContent){case N.NONE:t.description=`The \`<${e.tagName}>\` element must not have textual content.`;break;case N.REQUIRED:t.description=`The \`<${e.tagName}>\` element must have textual content.`;break;case N.ACCESSIBLE:t.description=`The \`<${e.tagName}>\` element must have accessible text.`}return t}static filter(e){const{target:t}=e;if(!t.meta)return!1;const{textContent:r}=t.meta;return!(!r||r===N.DEFAULT)}setup(){this.on("element:ready",Sr.filter,(e=>{const t=e.target,{textContent:r}=t.meta;switch(r){case N.NONE:this.validateNone(t);break;case N.REQUIRED:this.validateRequired(t);break;case N.ACCESSIBLE:this.validateAccessible(t)}}))}validateNone(e){_t(e)!==zt.EMPTY_TEXT&&this.reportError(e,e.meta,`${e.annotatedName} must not have text content`)}validateRequired(e){_t(e)===zt.EMPTY_TEXT&&this.reportError(e,e.meta,`${e.annotatedName} must have text content`)}validateAccessible(e){Kt(e)&&(Nr(e)||this.reportError(e,e.meta,`${e.annotatedName} must have accessible text`))}reportError(e,t,r){this.report(e,r,null,{tagName:e.tagName,textContent:t.textContent})}}var Ir=["&aacute;","&abreve;","&ac;","&acd;","&ace;","&acirc;","&acute;","&acy;","&aelig;","&af;","&afr;","&agrave;","&alefsym;","&aleph;","&alpha;","&amacr;","&amalg;","&amp;","&and;","&andand;","&andd;","&andslope;","&andv;","&ang;","&ange;","&angle;","&angmsd;","&angmsdaa;","&angmsdab;","&angmsdac;","&angmsdad;","&angmsdae;","&angmsdaf;","&angmsdag;","&angmsdah;","&angrt;","&angrtvb;","&angrtvbd;","&angsph;","&angst;","&angzarr;","&aogon;","&aopf;","&ap;","&apacir;","&ape;","&apid;","&apos;","&applyfunction;","&approx;","&approxeq;","&aring;","&ascr;","&assign;","&ast;","&asymp;","&asympeq;","&atilde;","&auml;","&awconint;","&awint;","&backcong;","&backepsilon;","&backprime;","&backsim;","&backsimeq;","&backslash;","&barv;","&barvee;","&barwed;","&barwedge;","&bbrk;","&bbrktbrk;","&bcong;","&bcy;","&bdquo;","&becaus;","&because;","&bemptyv;","&bepsi;","&bernou;","&bernoullis;","&beta;","&beth;","&between;","&bfr;","&bigcap;","&bigcirc;","&bigcup;","&bigodot;","&bigoplus;","&bigotimes;","&bigsqcup;","&bigstar;","&bigtriangledown;","&bigtriangleup;","&biguplus;","&bigvee;","&bigwedge;","&bkarow;","&blacklozenge;","&blacksquare;","&blacktriangle;","&blacktriangledown;","&blacktriangleleft;","&blacktriangleright;","&blank;","&blk12;","&blk14;","&blk34;","&block;","&bne;","&bnequiv;","&bnot;","&bopf;","&bot;","&bottom;","&bowtie;","&boxbox;","&boxdl;","&boxdr;","&boxh;","&boxhd;","&boxhu;","&boxminus;","&boxplus;","&boxtimes;","&boxul;","&boxur;","&boxv;","&boxvh;","&boxvl;","&boxvr;","&bprime;","&breve;","&brvbar;","&bscr;","&bsemi;","&bsim;","&bsime;","&bsol;","&bsolb;","&bsolhsub;","&bull;","&bullet;","&bump;","&bumpe;","&bumpeq;","&cacute;","&cap;","&capand;","&capbrcup;","&capcap;","&capcup;","&capdot;","&capitaldifferentiald;","&caps;","&caret;","&caron;","&cayleys;","&ccaps;","&ccaron;","&ccedil;","&ccirc;","&cconint;","&ccups;","&ccupssm;","&cdot;","&cedil;","&cedilla;","&cemptyv;","&cent;","&centerdot;","&cfr;","&chcy;","&check;","&checkmark;","&chi;","&cir;","&circ;","&circeq;","&circlearrowleft;","&circlearrowright;","&circledast;","&circledcirc;","&circleddash;","&circledot;","&circledr;","&circleds;","&circleminus;","&circleplus;","&circletimes;","&cire;","&cirfnint;","&cirmid;","&cirscir;","&clockwisecontourintegral;","&closecurlydoublequote;","&closecurlyquote;","&clubs;","&clubsuit;","&colon;","&colone;","&coloneq;","&comma;","&commat;","&comp;","&compfn;","&complement;","&complexes;","&cong;","&congdot;","&congruent;","&conint;","&contourintegral;","&copf;","&coprod;","&coproduct;","&copy;","&copysr;","&counterclockwisecontourintegral;","&crarr;","&cross;","&cscr;","&csub;","&csube;","&csup;","&csupe;","&ctdot;","&cudarrl;","&cudarrr;","&cuepr;","&cuesc;","&cularr;","&cularrp;","&cup;","&cupbrcap;","&cupcap;","&cupcup;","&cupdot;","&cupor;","&cups;","&curarr;","&curarrm;","&curlyeqprec;","&curlyeqsucc;","&curlyvee;","&curlywedge;","&curren;","&curvearrowleft;","&curvearrowright;","&cuvee;","&cuwed;","&cwconint;","&cwint;","&cylcty;","&dagger;","&daleth;","&darr;","&dash;","&dashv;","&dbkarow;","&dblac;","&dcaron;","&dcy;","&dd;","&ddagger;","&ddarr;","&ddotrahd;","&ddotseq;","&deg;","&del;","&delta;","&demptyv;","&dfisht;","&dfr;","&dhar;","&dharl;","&dharr;","&diacriticalacute;","&diacriticaldot;","&diacriticaldoubleacute;","&diacriticalgrave;","&diacriticaltilde;","&diam;","&diamond;","&diamondsuit;","&diams;","&die;","&differentiald;","&digamma;","&disin;","&div;","&divide;","&divideontimes;","&divonx;","&djcy;","&dlcorn;","&dlcrop;","&dollar;","&dopf;","&dot;","&dotdot;","&doteq;","&doteqdot;","&dotequal;","&dotminus;","&dotplus;","&dotsquare;","&doublebarwedge;","&doublecontourintegral;","&doubledot;","&doubledownarrow;","&doubleleftarrow;","&doubleleftrightarrow;","&doublelefttee;","&doublelongleftarrow;","&doublelongleftrightarrow;","&doublelongrightarrow;","&doublerightarrow;","&doublerighttee;","&doubleuparrow;","&doubleupdownarrow;","&doubleverticalbar;","&downarrow;","&downarrowbar;","&downarrowuparrow;","&downbreve;","&downdownarrows;","&downharpoonleft;","&downharpoonright;","&downleftrightvector;","&downleftteevector;","&downleftvector;","&downleftvectorbar;","&downrightteevector;","&downrightvector;","&downrightvectorbar;","&downtee;","&downteearrow;","&drbkarow;","&drcorn;","&drcrop;","&dscr;","&dscy;","&dsol;","&dstrok;","&dtdot;","&dtri;","&dtrif;","&duarr;","&duhar;","&dwangle;","&dzcy;","&dzigrarr;","&eacute;","&easter;","&ecaron;","&ecir;","&ecirc;","&ecolon;","&ecy;","&eddot;","&edot;","&ee;","&efdot;","&efr;","&eg;","&egrave;","&egs;","&egsdot;","&el;","&element;","&elinters;","&ell;","&els;","&elsdot;","&emacr;","&empty;","&emptyset;","&emptysmallsquare;","&emptyv;","&emptyverysmallsquare;","&emsp13;","&emsp14;","&emsp;","&eng;","&ensp;","&eogon;","&eopf;","&epar;","&eparsl;","&eplus;","&epsi;","&epsilon;","&epsiv;","&eqcirc;","&eqcolon;","&eqsim;","&eqslantgtr;","&eqslantless;","&equal;","&equals;","&equaltilde;","&equest;","&equilibrium;","&equiv;","&equivdd;","&eqvparsl;","&erarr;","&erdot;","&escr;","&esdot;","&esim;","&eta;","&eth;","&euml;","&euro;","&excl;","&exist;","&exists;","&expectation;","&exponentiale;","&fallingdotseq;","&fcy;","&female;","&ffilig;","&fflig;","&ffllig;","&ffr;","&filig;","&filledsmallsquare;","&filledverysmallsquare;","&fjlig;","&flat;","&fllig;","&fltns;","&fnof;","&fopf;","&forall;","&fork;","&forkv;","&fouriertrf;","&fpartint;","&frac12;","&frac13;","&frac14;","&frac15;","&frac16;","&frac18;","&frac23;","&frac25;","&frac34;","&frac35;","&frac38;","&frac45;","&frac56;","&frac58;","&frac78;","&frasl;","&frown;","&fscr;","&gacute;","&gamma;","&gammad;","&gap;","&gbreve;","&gcedil;","&gcirc;","&gcy;","&gdot;","&ge;","&gel;","&geq;","&geqq;","&geqslant;","&ges;","&gescc;","&gesdot;","&gesdoto;","&gesdotol;","&gesl;","&gesles;","&gfr;","&gg;","&ggg;","&gimel;","&gjcy;","&gl;","&gla;","&gle;","&glj;","&gnap;","&gnapprox;","&gne;","&gneq;","&gneqq;","&gnsim;","&gopf;","&grave;","&greaterequal;","&greaterequalless;","&greaterfullequal;","&greatergreater;","&greaterless;","&greaterslantequal;","&greatertilde;","&gscr;","&gsim;","&gsime;","&gsiml;","&gt;","&gtcc;","&gtcir;","&gtdot;","&gtlpar;","&gtquest;","&gtrapprox;","&gtrarr;","&gtrdot;","&gtreqless;","&gtreqqless;","&gtrless;","&gtrsim;","&gvertneqq;","&gvne;","&hacek;","&hairsp;","&half;","&hamilt;","&hardcy;","&harr;","&harrcir;","&harrw;","&hat;","&hbar;","&hcirc;","&hearts;","&heartsuit;","&hellip;","&hercon;","&hfr;","&hilbertspace;","&hksearow;","&hkswarow;","&hoarr;","&homtht;","&hookleftarrow;","&hookrightarrow;","&hopf;","&horbar;","&horizontalline;","&hscr;","&hslash;","&hstrok;","&humpdownhump;","&humpequal;","&hybull;","&hyphen;","&iacute;","&ic;","&icirc;","&icy;","&idot;","&iecy;","&iexcl;","&iff;","&ifr;","&igrave;","&ii;","&iiiint;","&iiint;","&iinfin;","&iiota;","&ijlig;","&im;","&imacr;","&image;","&imaginaryi;","&imagline;","&imagpart;","&imath;","&imof;","&imped;","&implies;","&in;","&incare;","&infin;","&infintie;","&inodot;","&int;","&intcal;","&integers;","&integral;","&intercal;","&intersection;","&intlarhk;","&intprod;","&invisiblecomma;","&invisibletimes;","&iocy;","&iogon;","&iopf;","&iota;","&iprod;","&iquest;","&iscr;","&isin;","&isindot;","&isine;","&isins;","&isinsv;","&isinv;","&it;","&itilde;","&iukcy;","&iuml;","&jcirc;","&jcy;","&jfr;","&jmath;","&jopf;","&jscr;","&jsercy;","&jukcy;","&kappa;","&kappav;","&kcedil;","&kcy;","&kfr;","&kgreen;","&khcy;","&kjcy;","&kopf;","&kscr;","&laarr;","&lacute;","&laemptyv;","&lagran;","&lambda;","&lang;","&langd;","&langle;","&lap;","&laplacetrf;","&laquo;","&larr;","&larrb;","&larrbfs;","&larrfs;","&larrhk;","&larrlp;","&larrpl;","&larrsim;","&larrtl;","&lat;","&latail;","&late;","&lates;","&lbarr;","&lbbrk;","&lbrace;","&lbrack;","&lbrke;","&lbrksld;","&lbrkslu;","&lcaron;","&lcedil;","&lceil;","&lcub;","&lcy;","&ldca;","&ldquo;","&ldquor;","&ldrdhar;","&ldrushar;","&ldsh;","&le;","&leftanglebracket;","&leftarrow;","&leftarrowbar;","&leftarrowrightarrow;","&leftarrowtail;","&leftceiling;","&leftdoublebracket;","&leftdownteevector;","&leftdownvector;","&leftdownvectorbar;","&leftfloor;","&leftharpoondown;","&leftharpoonup;","&leftleftarrows;","&leftrightarrow;","&leftrightarrows;","&leftrightharpoons;","&leftrightsquigarrow;","&leftrightvector;","&lefttee;","&leftteearrow;","&leftteevector;","&leftthreetimes;","&lefttriangle;","&lefttrianglebar;","&lefttriangleequal;","&leftupdownvector;","&leftupteevector;","&leftupvector;","&leftupvectorbar;","&leftvector;","&leftvectorbar;","&leg;","&leq;","&leqq;","&leqslant;","&les;","&lescc;","&lesdot;","&lesdoto;","&lesdotor;","&lesg;","&lesges;","&lessapprox;","&lessdot;","&lesseqgtr;","&lesseqqgtr;","&lessequalgreater;","&lessfullequal;","&lessgreater;","&lessgtr;","&lessless;","&lesssim;","&lessslantequal;","&lesstilde;","&lfisht;","&lfloor;","&lfr;","&lg;","&lge;","&lhar;","&lhard;","&lharu;","&lharul;","&lhblk;","&ljcy;","&ll;","&llarr;","&llcorner;","&lleftarrow;","&llhard;","&lltri;","&lmidot;","&lmoust;","&lmoustache;","&lnap;","&lnapprox;","&lne;","&lneq;","&lneqq;","&lnsim;","&loang;","&loarr;","&lobrk;","&longleftarrow;","&longleftrightarrow;","&longmapsto;","&longrightarrow;","&looparrowleft;","&looparrowright;","&lopar;","&lopf;","&loplus;","&lotimes;","&lowast;","&lowbar;","&lowerleftarrow;","&lowerrightarrow;","&loz;","&lozenge;","&lozf;","&lpar;","&lparlt;","&lrarr;","&lrcorner;","&lrhar;","&lrhard;","&lrm;","&lrtri;","&lsaquo;","&lscr;","&lsh;","&lsim;","&lsime;","&lsimg;","&lsqb;","&lsquo;","&lsquor;","&lstrok;","&lt;","&ltcc;","&ltcir;","&ltdot;","&lthree;","&ltimes;","&ltlarr;","&ltquest;","&ltri;","&ltrie;","&ltrif;","&ltrpar;","&lurdshar;","&luruhar;","&lvertneqq;","&lvne;","&macr;","&male;","&malt;","&maltese;","&map;","&mapsto;","&mapstodown;","&mapstoleft;","&mapstoup;","&marker;","&mcomma;","&mcy;","&mdash;","&mddot;","&measuredangle;","&mediumspace;","&mellintrf;","&mfr;","&mho;","&micro;","&mid;","&midast;","&midcir;","&middot;","&minus;","&minusb;","&minusd;","&minusdu;","&minusplus;","&mlcp;","&mldr;","&mnplus;","&models;","&mopf;","&mp;","&mscr;","&mstpos;","&mu;","&multimap;","&mumap;","&nabla;","&nacute;","&nang;","&nap;","&nape;","&napid;","&napos;","&napprox;","&natur;","&natural;","&naturals;","&nbsp;","&nbump;","&nbumpe;","&ncap;","&ncaron;","&ncedil;","&ncong;","&ncongdot;","&ncup;","&ncy;","&ndash;","&ne;","&nearhk;","&nearr;","&nearrow;","&nedot;","&negativemediumspace;","&negativethickspace;","&negativethinspace;","&negativeverythinspace;","&nequiv;","&nesear;","&nesim;","&nestedgreatergreater;","&nestedlessless;","&newline;","&nexist;","&nexists;","&nfr;","&nge;","&ngeq;","&ngeqq;","&ngeqslant;","&nges;","&ngg;","&ngsim;","&ngt;","&ngtr;","&ngtv;","&nharr;","&nhpar;","&ni;","&nis;","&nisd;","&niv;","&njcy;","&nlarr;","&nldr;","&nle;","&nleftarrow;","&nleftrightarrow;","&nleq;","&nleqq;","&nleqslant;","&nles;","&nless;","&nll;","&nlsim;","&nlt;","&nltri;","&nltrie;","&nltv;","&nmid;","&nobreak;","&nonbreakingspace;","&nopf;","&not;","&notcongruent;","&notcupcap;","&notdoubleverticalbar;","&notelement;","&notequal;","&notequaltilde;","&notexists;","&notgreater;","&notgreaterequal;","&notgreaterfullequal;","&notgreatergreater;","&notgreaterless;","&notgreaterslantequal;","&notgreatertilde;","&nothumpdownhump;","&nothumpequal;","&notin;","&notindot;","&notine;","&notinva;","&notinvb;","&notinvc;","&notlefttriangle;","&notlefttrianglebar;","&notlefttriangleequal;","&notless;","&notlessequal;","&notlessgreater;","&notlessless;","&notlessslantequal;","&notlesstilde;","&notnestedgreatergreater;","&notnestedlessless;","&notni;","&notniva;","&notnivb;","&notnivc;","&notprecedes;","&notprecedesequal;","&notprecedesslantequal;","&notreverseelement;","&notrighttriangle;","&notrighttrianglebar;","&notrighttriangleequal;","&notsquaresubset;","&notsquaresubsetequal;","&notsquaresuperset;","&notsquaresupersetequal;","&notsubset;","&notsubsetequal;","&notsucceeds;","&notsucceedsequal;","&notsucceedsslantequal;","&notsucceedstilde;","&notsuperset;","&notsupersetequal;","&nottilde;","&nottildeequal;","&nottildefullequal;","&nottildetilde;","&notverticalbar;","&npar;","&nparallel;","&nparsl;","&npart;","&npolint;","&npr;","&nprcue;","&npre;","&nprec;","&npreceq;","&nrarr;","&nrarrc;","&nrarrw;","&nrightarrow;","&nrtri;","&nrtrie;","&nsc;","&nsccue;","&nsce;","&nscr;","&nshortmid;","&nshortparallel;","&nsim;","&nsime;","&nsimeq;","&nsmid;","&nspar;","&nsqsube;","&nsqsupe;","&nsub;","&nsube;","&nsubset;","&nsubseteq;","&nsubseteqq;","&nsucc;","&nsucceq;","&nsup;","&nsupe;","&nsupset;","&nsupseteq;","&nsupseteqq;","&ntgl;","&ntilde;","&ntlg;","&ntriangleleft;","&ntrianglelefteq;","&ntriangleright;","&ntrianglerighteq;","&nu;","&num;","&numero;","&numsp;","&nvap;","&nvdash;","&nvge;","&nvgt;","&nvharr;","&nvinfin;","&nvlarr;","&nvle;","&nvlt;","&nvltrie;","&nvrarr;","&nvrtrie;","&nvsim;","&nwarhk;","&nwarr;","&nwarrow;","&nwnear;","&oacute;","&oast;","&ocir;","&ocirc;","&ocy;","&odash;","&odblac;","&odiv;","&odot;","&odsold;","&oelig;","&ofcir;","&ofr;","&ogon;","&ograve;","&ogt;","&ohbar;","&ohm;","&oint;","&olarr;","&olcir;","&olcross;","&oline;","&olt;","&omacr;","&omega;","&omicron;","&omid;","&ominus;","&oopf;","&opar;","&opencurlydoublequote;","&opencurlyquote;","&operp;","&oplus;","&or;","&orarr;","&ord;","&order;","&orderof;","&ordf;","&ordm;","&origof;","&oror;","&orslope;","&orv;","&os;","&oscr;","&oslash;","&osol;","&otilde;","&otimes;","&otimesas;","&ouml;","&ovbar;","&overbar;","&overbrace;","&overbracket;","&overparenthesis;","&par;","&para;","&parallel;","&parsim;","&parsl;","&part;","&partiald;","&pcy;","&percnt;","&period;","&permil;","&perp;","&pertenk;","&pfr;","&phi;","&phiv;","&phmmat;","&phone;","&pi;","&pitchfork;","&piv;","&planck;","&planckh;","&plankv;","&plus;","&plusacir;","&plusb;","&pluscir;","&plusdo;","&plusdu;","&pluse;","&plusminus;","&plusmn;","&plussim;","&plustwo;","&pm;","&poincareplane;","&pointint;","&popf;","&pound;","&pr;","&prap;","&prcue;","&pre;","&prec;","&precapprox;","&preccurlyeq;","&precedes;","&precedesequal;","&precedesslantequal;","&precedestilde;","&preceq;","&precnapprox;","&precneqq;","&precnsim;","&precsim;","&prime;","&primes;","&prnap;","&prne;","&prnsim;","&prod;","&product;","&profalar;","&profline;","&profsurf;","&prop;","&proportion;","&proportional;","&propto;","&prsim;","&prurel;","&pscr;","&psi;","&puncsp;","&qfr;","&qint;","&qopf;","&qprime;","&qscr;","&quaternions;","&quatint;","&quest;","&questeq;","&quot;","&raarr;","&race;","&racute;","&radic;","&raemptyv;","&rang;","&rangd;","&range;","&rangle;","&raquo;","&rarr;","&rarrap;","&rarrb;","&rarrbfs;","&rarrc;","&rarrfs;","&rarrhk;","&rarrlp;","&rarrpl;","&rarrsim;","&rarrtl;","&rarrw;","&ratail;","&ratio;","&rationals;","&rbarr;","&rbbrk;","&rbrace;","&rbrack;","&rbrke;","&rbrksld;","&rbrkslu;","&rcaron;","&rcedil;","&rceil;","&rcub;","&rcy;","&rdca;","&rdldhar;","&rdquo;","&rdquor;","&rdsh;","&re;","&real;","&realine;","&realpart;","&reals;","&rect;","&reg;","&reverseelement;","&reverseequilibrium;","&reverseupequilibrium;","&rfisht;","&rfloor;","&rfr;","&rhar;","&rhard;","&rharu;","&rharul;","&rho;","&rhov;","&rightanglebracket;","&rightarrow;","&rightarrowbar;","&rightarrowleftarrow;","&rightarrowtail;","&rightceiling;","&rightdoublebracket;","&rightdownteevector;","&rightdownvector;","&rightdownvectorbar;","&rightfloor;","&rightharpoondown;","&rightharpoonup;","&rightleftarrows;","&rightleftharpoons;","&rightrightarrows;","&rightsquigarrow;","&righttee;","&rightteearrow;","&rightteevector;","&rightthreetimes;","&righttriangle;","&righttrianglebar;","&righttriangleequal;","&rightupdownvector;","&rightupteevector;","&rightupvector;","&rightupvectorbar;","&rightvector;","&rightvectorbar;","&ring;","&risingdotseq;","&rlarr;","&rlhar;","&rlm;","&rmoust;","&rmoustache;","&rnmid;","&roang;","&roarr;","&robrk;","&ropar;","&ropf;","&roplus;","&rotimes;","&roundimplies;","&rpar;","&rpargt;","&rppolint;","&rrarr;","&rrightarrow;","&rsaquo;","&rscr;","&rsh;","&rsqb;","&rsquo;","&rsquor;","&rthree;","&rtimes;","&rtri;","&rtrie;","&rtrif;","&rtriltri;","&ruledelayed;","&ruluhar;","&rx;","&sacute;","&sbquo;","&sc;","&scap;","&scaron;","&sccue;","&sce;","&scedil;","&scirc;","&scnap;","&scne;","&scnsim;","&scpolint;","&scsim;","&scy;","&sdot;","&sdotb;","&sdote;","&searhk;","&searr;","&searrow;","&sect;","&semi;","&seswar;","&setminus;","&setmn;","&sext;","&sfr;","&sfrown;","&sharp;","&shchcy;","&shcy;","&shortdownarrow;","&shortleftarrow;","&shortmid;","&shortparallel;","&shortrightarrow;","&shortuparrow;","&shy;","&sigma;","&sigmaf;","&sigmav;","&sim;","&simdot;","&sime;","&simeq;","&simg;","&simge;","&siml;","&simle;","&simne;","&simplus;","&simrarr;","&slarr;","&smallcircle;","&smallsetminus;","&smashp;","&smeparsl;","&smid;","&smile;","&smt;","&smte;","&smtes;","&softcy;","&sol;","&solb;","&solbar;","&sopf;","&spades;","&spadesuit;","&spar;","&sqcap;","&sqcaps;","&sqcup;","&sqcups;","&sqrt;","&sqsub;","&sqsube;","&sqsubset;","&sqsubseteq;","&sqsup;","&sqsupe;","&sqsupset;","&sqsupseteq;","&squ;","&square;","&squareintersection;","&squaresubset;","&squaresubsetequal;","&squaresuperset;","&squaresupersetequal;","&squareunion;","&squarf;","&squf;","&srarr;","&sscr;","&ssetmn;","&ssmile;","&sstarf;","&star;","&starf;","&straightepsilon;","&straightphi;","&strns;","&sub;","&subdot;","&sube;","&subedot;","&submult;","&subne;","&subplus;","&subrarr;","&subset;","&subseteq;","&subseteqq;","&subsetequal;","&subsetneq;","&subsetneqq;","&subsim;","&subsub;","&subsup;","&succ;","&succapprox;","&succcurlyeq;","&succeeds;","&succeedsequal;","&succeedsslantequal;","&succeedstilde;","&succeq;","&succnapprox;","&succneqq;","&succnsim;","&succsim;","&suchthat;","&sum;","&sung;","&sup1;","&sup2;","&sup3;","&sup;","&supdot;","&supdsub;","&supe;","&supedot;","&superset;","&supersetequal;","&suphsol;","&suphsub;","&suplarr;","&supmult;","&supne;","&supplus;","&supset;","&supseteq;","&supseteqq;","&supsetneq;","&supsetneqq;","&supsim;","&supsub;","&supsup;","&swarhk;","&swarr;","&swarrow;","&swnwar;","&szlig;","&tab;","&target;","&tau;","&tbrk;","&tcaron;","&tcedil;","&tcy;","&tdot;","&telrec;","&tfr;","&there4;","&therefore;","&theta;","&thetasym;","&thetav;","&thickapprox;","&thicksim;","&thickspace;","&thinsp;","&thinspace;","&thkap;","&thksim;","&thorn;","&tilde;","&tildeequal;","&tildefullequal;","&tildetilde;","&times;","&timesb;","&timesbar;","&timesd;","&tint;","&toea;","&top;","&topbot;","&topcir;","&topf;","&topfork;","&tosa;","&tprime;","&trade;","&triangle;","&triangledown;","&triangleleft;","&trianglelefteq;","&triangleq;","&triangleright;","&trianglerighteq;","&tridot;","&trie;","&triminus;","&tripledot;","&triplus;","&trisb;","&tritime;","&trpezium;","&tscr;","&tscy;","&tshcy;","&tstrok;","&twixt;","&twoheadleftarrow;","&twoheadrightarrow;","&uacute;","&uarr;","&uarrocir;","&ubrcy;","&ubreve;","&ucirc;","&ucy;","&udarr;","&udblac;","&udhar;","&ufisht;","&ufr;","&ugrave;","&uhar;","&uharl;","&uharr;","&uhblk;","&ulcorn;","&ulcorner;","&ulcrop;","&ultri;","&umacr;","&uml;","&underbar;","&underbrace;","&underbracket;","&underparenthesis;","&union;","&unionplus;","&uogon;","&uopf;","&uparrow;","&uparrowbar;","&uparrowdownarrow;","&updownarrow;","&upequilibrium;","&upharpoonleft;","&upharpoonright;","&uplus;","&upperleftarrow;","&upperrightarrow;","&upsi;","&upsih;","&upsilon;","&uptee;","&upteearrow;","&upuparrows;","&urcorn;","&urcorner;","&urcrop;","&uring;","&urtri;","&uscr;","&utdot;","&utilde;","&utri;","&utrif;","&uuarr;","&uuml;","&uwangle;","&vangrt;","&varepsilon;","&varkappa;","&varnothing;","&varphi;","&varpi;","&varpropto;","&varr;","&varrho;","&varsigma;","&varsubsetneq;","&varsubsetneqq;","&varsupsetneq;","&varsupsetneqq;","&vartheta;","&vartriangleleft;","&vartriangleright;","&vbar;","&vbarv;","&vcy;","&vdash;","&vdashl;","&vee;","&veebar;","&veeeq;","&vellip;","&verbar;","&vert;","&verticalbar;","&verticalline;","&verticalseparator;","&verticaltilde;","&verythinspace;","&vfr;","&vltri;","&vnsub;","&vnsup;","&vopf;","&vprop;","&vrtri;","&vscr;","&vsubne;","&vsupne;","&vvdash;","&vzigzag;","&wcirc;","&wedbar;","&wedge;","&wedgeq;","&weierp;","&wfr;","&wopf;","&wp;","&wr;","&wreath;","&wscr;","&xcap;","&xcirc;","&xcup;","&xdtri;","&xfr;","&xharr;","&xi;","&xlarr;","&xmap;","&xnis;","&xodot;","&xopf;","&xoplus;","&xotime;","&xrarr;","&xscr;","&xsqcup;","&xuplus;","&xutri;","&xvee;","&xwedge;","&yacute;","&yacy;","&ycirc;","&ycy;","&yen;","&yfr;","&yicy;","&yopf;","&yscr;","&yucy;","&yuml;","&zacute;","&zcaron;","&zcy;","&zdot;","&zeetrf;","&zerowidthspace;","&zeta;","&zfr;","&zhcy;","&zigrarr;","&zopf;","&zscr;","&zwj;","&zwnj;"];const Or=/&([a-z0-9]+|#x?[0-9a-f]+);/gi;var Lr;!function(e){e[e.Any=0]="Any",e[e.AlwaysOmit=1]="AlwaysOmit",e[e.AlwaysSelfclose=2]="AlwaysSelfclose"}(Lr||(Lr={}));const Rr={style:"omit"};var Dr;!function(e){e[e.AlwaysOmit=1]="AlwaysOmit",e[e.AlwaysSelfclose=2]="AlwaysSelfclose"}(Dr||(Dr={}));const Pr={style:"omit"};function Mr(e){const t=e.getAttribute("type");return Boolean(t&&t.valueMatches(/submit|image/))}function jr(e){return e.querySelectorAll("button,input").filter(Mr).filter((e=>!e.hasAttribute("form"))).length>0}function Fr(e,t){const{id:r}=t;if(!r)return!1;const n=e.querySelectorAll("button[form],input[form]").filter(Mr).filter((e=>function(e,t){const r=t.getAttribute("form");return Boolean(r&&r.valueMatches(e,!0))}(r,e)));return n.length>0}const zr={allowEmpty:!0,alias:[]};const _r={"wcag/h30":class extends Me{documentation(){return{description:"WCAG 2.1 requires each `<a>` anchor link to have a text describing the purpose of the link using either plain text or an `<img>` with the `alt` attribute set.",url:je("@/rules/wcag/h30.ts")}}setup(){this.on("dom:ready",(e=>{const t=e.document.getElementsByTagName("a");for(const r of t){if(!Kt(r))continue;if(_t(r)!==zt.EMPTY_TEXT)continue;if(r.querySelectorAll("img").some((e=>$r(e))))continue;const e=r.querySelectorAll("[aria-label]");Ar(r)||e.some((e=>Ar(e)))||this.report(r,"Anchor link must have a text describing its purpose")}}))}},"wcag/h32":class extends Me{documentation(){return{description:"WCAG 2.1 requires each `<form>` element to have at least one submit button.",url:je("@/rules/wcag/h32.ts")}}setup(){const e=this.getTagsWithProperty("form").join(",");this.on("dom:ready",(t=>{const{document:r}=t,n=r.querySelectorAll(e);for(const e of n)jr(e)||Fr(r,e)||this.report(e,`<${e.tagName}> element must have a submit button`)}))}},"wcag/h36":class extends Me{documentation(){return{description:'WCAG 2.1 requires all images used as submit buttons to have a textual description using the alt attribute. The alt text cannot be empty (`alt=""`).',url:je("@/rules/wcag/h36.ts")}}setup(){this.on("tag:end",(e=>{const t=e.previous;"input"===t.tagName&&"image"===t.getAttributeValue("type")&&($r(t)||this.report(t,"image used as submit button must have alt text"))}))}},"wcag/h37":class extends Me{constructor(e){super({...zr,...e}),Array.isArray(this.options.alias)||(this.options.alias=[this.options.alias])}static schema(){return{alias:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}]},allowEmpty:{type:"boolean"}}}documentation(){return{description:"Both HTML5 and WCAG 2.0 requires images to have a alternative text for each image.",url:je("@/rules/wcag/h37.ts")}}setup(){this.on("tag:end",(e=>{const t=e.previous;if(!t||"img"!==t.tagName)return;if(!Kt(t))return;const r=t.getAttributeValue("alt");if(!(r||""===r&&this.options.allowEmpty)){for(const e of this.options.alias)if(t.getAttribute(e))return;this.report(t,'<img> is missing required "alt" attribute',t.location)}}))}},"wcag/h67":class extends Me{documentation(){return{description:"A decorative image cannot have a title attribute. Either remove `title` or add a descriptive `alt` text.",url:je("@/rules/wcag/h67.ts")}}setup(){this.on("tag:end",(e=>{const t=e.target;if(!t||"img"!==t.tagName)return;const r=t.getAttribute("title");if(!r||""===r.value)return;const n=t.getAttributeValue("alt");n&&""!==n||this.report(t,"<img> with empty alt text cannot have title attribute",r.keyLocation)}))}},"wcag/h71":class extends Me{documentation(){return{description:"H71: Providing a description for groups of form controls using fieldset and legend elements",url:je("@/rules/wcag/h71.ts")}}setup(){this.on("dom:ready",(e=>{const{document:t}=e,r=t.querySelectorAll(this.selector);for(const n of r)this.validate(n)}))}validate(e){0===e.querySelectorAll("> legend").length&&this.reportNode(e)}reportNode(e){super.report(e,`${e.annotatedName} must have a <legend> as the first child`)}get selector(){return this.getTagsDerivedFrom("fieldset").join(",")}}},Br={"allowed-links":class extends Me{constructor(e){super({...Fe,...e}),this.allowExternal=Be(this.options.allowExternal),this.allowRelative=Be(this.options.allowRelative),this.allowAbsolute=Be(this.options.allowAbsolute)}static schema(){const e={anyOf:[{type:"boolean"},{type:"object",properties:{include:{type:"array",items:{type:"string"}},exclude:{type:"array",items:{type:"string"}}}}]};return{allowExternal:{...e},allowRelative:{...e},allowAbsolute:{...e},allowBase:{type:"boolean"}}}documentation(e){return{description:_e[e]||"This link type is not allowed by current configuration",url:je("@/rules/allowed-links.ts")}}setup(){this.on("attr",(e=>{if(!e.value||!this.isRelevant(e))return;const t=e.value.toString(),r=this.getStyle(t);switch(r){case"anchor":break;case"absolute":this.handleAbsolute(t,e,r);break;case"external":this.handleExternal(t,e,r);break;case"relative-base":this.handleRelativeBase(t,e,r);break;case"relative-path":this.handleRelativePath(t,e,r)}}))}isRelevant(e){const{target:t,key:r,value:n}=e;if(n instanceof H)return!1;const s=ze[t.tagName];return Boolean(s&&s===r)}getStyle(e){if(e.match(/^([a-z]+:)?\/\//g))return"external";switch(e[0]){case"/":return"absolute";case".":return"relative-path";case"#":return"anchor";default:return"relative-base"}}handleAbsolute(e,t,r){const{allowAbsolute:n}=this;!0!==n&&(!1===n?this.report(t.target,"Link destination must not be absolute url",t.valueLocation,r):Ue(e,n)||this.report(t.target,"Absolute link to this destination is not allowed by current configuration",t.valueLocation,r))}handleExternal(e,t,r){const{allowExternal:n}=this;!0!==n&&(!1===n?this.report(t.target,"Link destination must not be external url",t.valueLocation,r):Ue(e,n)||this.report(t.target,"External link to this destination is not allowed by current configuration",t.valueLocation,r))}handleRelativePath(e,t,r){const{allowRelative:n}=this;return!0!==n&&(!1===n?(this.report(t.target,"Link destination must not be relative url",t.valueLocation,r),!0):!Ue(e,n)&&(this.report(t.target,"Relative link to this destination is not allowed by current configuration",t.valueLocation,r),!0))}handleRelativeBase(e,t,r){const{allowBase:n}=this.options;this.handleRelativePath(e,t,r)||n||this.report(t.target,"Relative links must be relative to current folder",t.valueLocation,r)}},"aria-hidden-body":class extends Me{documentation(){return{description:"`aria-hidden` must not be used on the `<body>` element as it makes the page inaccessible to assistive technology such as screenreaders",url:je("@/rules/aria-hidden-body.ts")}}setup(){this.on("tag:ready",this.isRelevant,(e=>{const{target:t}=e,r=t.getAttribute("aria-hidden");r&&r.valueMatches("true",!0)&&this.report(t,"aria-hidden must not be used on <body>",r.keyLocation)}))}isRelevant(e){return e.target.is("body")}},"aria-label-misuse":class extends Me{documentation(){return{description:`\`aria-label\` can only be used on:\n\n${["Interactive elements","Labelable elements","Landmark elements","Elements with roles inheriting from widget","`<area>`","`<form>` and `<fieldset>`","`<iframe>`","`<img>` and `<figure>`","`<summary>`","`<table>`, `<td>` and `<th>`"].map((e=>`- ${e}\n`)).join("")}`,url:je("@/rules/aria-label-misuse.ts")}}setup(){this.on("dom:ready",(e=>{const{document:t}=e;for(const r of t.querySelectorAll("[aria-label]"))this.validateElement(r)}))}validateElement(e){const t=e.getAttribute("aria-label");if(!t||!t.value||t.valueMatches("",!1))return;const r=e.meta;r&&(Ge.includes(e.tagName)||e.hasAttribute("role")||e.hasAttribute("tabindex")||r.interactive||r.labelable||this.report(e,'"aria-label" cannot be used on this element',t.keyLocation))}},"attr-case":class extends Me{constructor(e){super({...He,...e}),this.style=new Xe(this.options.style,"attr-case")}static schema(){const e=["lowercase","uppercase","pascalcase","camelcase"];return{ignoreForeign:{type:"boolean"},style:{anyOf:[{enum:e,type:"string"},{items:{enum:e,type:"string"},type:"array"}]}}}documentation(){return{description:`Attribute name must be ${this.options.style}.`,url:je("@/rules/attr-case.ts")}}setup(){this.on("attr",(e=>{if(this.isIgnored(e.target))return;if(e.originalAttribute)return;const t=e.key.replace(/[^a-z]+/gi,"");this.style.match(t)||this.report(e.target,`Attribute "${e.key}" should be ${this.style.name}`,e.keyLocation)}))}isIgnored(e){return!!this.options.ignoreForeign&&Boolean(e.meta&&e.meta.foreign)}},"attr-delimiter":class extends Me{documentation(){return{description:"Attribute value should be separated by ",url:je("@/rules/attr-delimiter.ts")}}setup(){this.on("token",Et,(e=>{const t=e.data[1];if(Tt.exec(t)){const r=W(e.location,0,t.length);this.report(null,"Attribute value must not be delimited by whitespace",r)}}))}},"attr-pattern":class extends Me{constructor(e){var t;super({...kt,...e}),this.pattern=(t=this.options.pattern,Array.isArray(t)?new RegExp(`^(${t.join("|")})$`,"i"):new RegExp(`^${t}$`,"i"))}static schema(){return{pattern:{oneOf:[{type:"array",items:{type:"string"},minItems:1},{type:"string"}]},ignoreForeign:{type:"boolean"}}}documentation(e){let t;return t=e?function(e,t){return Array.isArray(t)?[`Attribute "${e}" should match one of the configured regular expressions:`,"",...t.map((e=>`- \`/${e}/\``))].join("\n"):`Attribute "${e}" should match the regular expression \`/${t}/\``}(e.attr,e.pattern):"Attribute should match configured pattern",{description:t,url:je("@/rules/attr-pattern.ts")}}setup(){this.on("attr",(e=>{if(this.isIgnored(e.target))return;if(e.originalAttribute)return;if(this.pattern.test(e.key))return;const t=function(e,t){if(Array.isArray(t))return`Attribute "${e}" should match one of [${t.map((e=>`/${e}/`)).join(", ")}]`;return`Attribute "${e}" should match /${t}/`}(e.key,this.options.pattern);this.report(e.target,t,e.keyLocation)}))}isIgnored(e){return!!this.options.ignoreForeign&&Boolean(e.meta&&e.meta.foreign)}},"attr-quotes":class extends Me{constructor(e){super({...$t,...e}),this.style=function(e){switch(e.toLowerCase()){case"auto":return xt.AUTO_QUOTE;case"double":return xt.DOUBLE_QUOTE;case"single":return xt.SINGLE_QUOTE;default:throw new Ve(`Invalid style "${e}" for "attr-quotes" rule`)}}(this.options.style)}static schema(){return{style:{enum:["auto","double","single"],type:"string"},unquoted:{type:"boolean"}}}documentation(){return"auto"===this.options.style?{description:"Attribute values are required to be quoted with doublequotes unless the attribute value itself contains doublequotes in which case singlequotes should be used.",url:je("@/rules/attr-quotes.ts")}:{description:`Attribute values are required to be quoted with ${this.options.style}quotes.`,url:je("@/rules/attr-quotes.ts")}}setup(){this.on("attr",(e=>{if(null===e.value)return;if(!e.quote)return void(!1===this.options.unquoted&&this.report(e.target,`Attribute "${e.key}" using unquoted value`));const t=this.resolveQuotemark(e.value.toString(),this.style);e.quote!==t&&this.report(e.target,`Attribute "${e.key}" used ${e.quote} instead of expected ${t}`)}))}resolveQuotemark(e,t){return t===xt.AUTO_QUOTE?e.includes('"')?"'":'"':t}},"attr-spacing":class extends Me{documentation(){return{description:"No space between attributes. At least one whitespace character (commonly space) must be used to separate attributes.",url:je("@/rules/attr-spacing.ts")}}setup(){let e;this.on("token",(r=>{r.type===t.TokenType.ATTR_NAME&&e!==t.TokenType.WHITESPACE&&this.report(null,"No space between attributes",r.location),e=r.type}))}},"attribute-allowed-values":class extends Me{documentation(e){const t={description:"Attribute has invalid value.",url:je("@/rules/attribute-allowed-values.ts")};if(!e)return t;const{allowed:r,attribute:n,element:s,value:i}=e;if(r.enum){const e=r.enum.map((e=>"string"==typeof e?`- \`"${e}"\``:`- \`${e.toString()}\``));t.description=[`The \`<${s}>\` element does not allow the attribute \`${n}\` to have the value \`"${i}"\`.`,"","It must match one of the following:","",...e].join("\n")}else r.boolean&&(t.description=`The \`<${e.element}>\` attribute \`${e.attribute}\` must be a boolean attribute, e.g. \`<${e.element} ${e.attribute}>\``);return t}setup(){this.on("dom:ready",(e=>{e.document.visitDepthFirst((e=>{const t=e.meta;if(t&&t.attributes)for(const r of e.attributes){if(Te.validateAttribute(r,t.attributes))continue;const n=r.value?r.value.toString():"",s={element:e.tagName,attribute:r.key,value:n,allowed:t.attributes[r.key]},i=this.getMessage(r),o=this.getLocation(r);this.report(e,i,o,s)}}))}))}getMessage(e){const{key:t,value:r}=e;return null!==r?`Attribute "${t}" has invalid value "${r.toString()}"`:`Attribute "${t}" is missing value`}getLocation(e){return null!==e.value?e.valueLocation:e.keyLocation}},"attribute-boolean-style":class extends Me{constructor(e){super({...At,...e}),this.hasInvalidStyle=function(e){switch(e.toLowerCase()){case"omit":return e=>null!==e.value;case"empty":return e=>""!==e.value;case"name":return e=>e.value!==e.key;default:throw new Error(`Invalid style "${e}" for "attribute-boolean-style" rule`)}}(this.options.style)}static schema(){return{style:{enum:["empty","name","omit"],type:"string"}}}documentation(){return{description:"Require a specific style when writing boolean attributes.",url:je("@/rules/attribute-boolean-style.ts")}}setup(){this.on("dom:ready",(e=>{e.document.visitDepthFirst((e=>{const t=e.meta;if(t&&t.attributes)for(const r of e.attributes)this.isBoolean(r,t.attributes)&&(r.originalAttribute||this.hasInvalidStyle(r)&&this.report(e,qt(r,this.options.style),r.keyLocation))}))}))}isBoolean(e,t){var r;return Boolean(null===(r=t[e.key])||void 0===r?void 0:r.boolean)}},"attribute-empty-style":class extends Me{constructor(e){super({...Ct,...e}),this.hasInvalidStyle=function(e){switch(e.toLowerCase()){case"omit":return e=>null!==e.value;case"empty":return e=>""!==e.value;default:throw new Error(`Invalid style "${e}" for "attribute-empty-style" rule`)}}(this.options.style)}static schema(){return{style:{enum:["empty","omit"],type:"string"}}}documentation(){return{description:"Require a specific style for attributes with empty values.",url:je("@/rules/attribute-empty-style.ts")}}setup(){this.on("dom:ready",(e=>{e.document.visitDepthFirst((e=>{const t=e.meta;if(t&&t.attributes)for(const r of e.attributes)Nt(r,t.attributes)&&St(r)&&this.hasInvalidStyle(r)&&this.report(e,It(r,this.options.style),r.keyLocation)}))}))}},"class-pattern":class extends Me{constructor(e){super({...Rt,...e}),this.pattern=Ot(this.options.pattern)}static schema(){return{pattern:{type:"string"}}}documentation(){return{description:`For consistency all classes are required to match the pattern ${Lt(this.options.pattern)}.`,url:je("@/rules/class-pattern.ts")}}setup(){this.on("attr",(e=>{if("class"!==e.key.toLowerCase())return;const t=new ne(e.value,e.valueLocation);t.forEach(((r,n)=>{if(!r.match(this.pattern)){const s=t.location(n);this.report(e.target,`Class "${r}" does not match required pattern "${this.pattern}"`,s)}}))}))}},"close-attr":class extends Me{documentation(){return{description:"HTML disallows end tags to have attributes.",url:je("@/rules/close-attr.ts")}}setup(){this.on("tag:end",(e=>{if(!e.target)return;if(e.previous===e.target)return;const t=e.target;if(Object.keys(t.attributes).length>0){const e=t.attributes[0];this.report(null,"Close tags cannot have attributes",e.keyLocation)}}))}},"close-order":class extends Me{documentation(){return{description:"HTML requires elements to be closed in the same order as they were opened.",url:je("@/rules/close-order.ts")}}setup(){this.on("tag:end",(e=>{const r=e.target,n=e.previous;if(r){if(!r.voidElement&&n.closed!==t.NodeClosed.ImplicitClosed)if(n&&!n.isRootElement())r.tagName!==n.tagName&&this.report(null,`Mismatched close-tag, expected '</${n.tagName}>' but found '</${r.tagName}>'.`,r.location);else{const e={filename:r.location.filename,line:r.location.line,column:r.location.column,offset:r.location.offset,size:r.tagName.length+1};this.report(null,"Unexpected close-tag, expected opening tag.",e)}}else this.report(null,`Missing close-tag, expected '</${n.tagName}>' but document ended before it was found.`,e.location)}))}},deprecated:class extends Me{constructor(e){super({...Dt,...e})}static schema(){return{exclude:{anyOf:[{items:{type:"string"},type:"array"},{type:"null"}]},include:{anyOf:[{items:{type:"string"},type:"array"},{type:"null"}]}}}documentation(e){const t={description:"This element is deprecated and should not be used in new code.",url:je("@/rules/deprecated.ts")};if(e){const r=[];if(e.source){const t=`The \`<$tagname>\` element is deprecated ${function(e){const t=e.match(/html(\d)(\d)?/);if(t){const[,...e]=t;return`in HTML ${e.filter(Boolean).join(".")}`}switch(e){case"whatwg":return"in HTML Living Standard";case"non-standard":return"and non-standard";default:return`by ${e}`}}(e.source)} and should not be used in new code.`;r.push(t)}else{const e="The `<$tagname>` element is deprecated and should not be used in new code.";r.push(e)}e.documentation&&r.push(e.documentation),t.description=r.map((t=>t.replace(/\$tagname/g,e.tagName))).join("\n\n")}return t}setup(){this.on("tag:start",(e=>{const t=e.target;if(null===t.meta)return;const r=t.meta.deprecated;if(!r)return;if(this.isKeywordIgnored(t.tagName))return;const n=W(e.location,1);"string"==typeof r?this.reportString(r,t,n):"boolean"==typeof r?this.reportBoolean(t,n):this.reportObject(r,t,n)}))}reportString(e,t,r){const n={tagName:t.tagName},s=`<${t.tagName}> is deprecated: ${e}`;this.report(t,s,r,n)}reportBoolean(e,t){const r={tagName:e.tagName},n=`<${e.tagName}> is deprecated`;this.report(e,n,t,r)}reportObject(e,t,r){const n={...e,tagName:t.tagName},s=e.message?`: ${e.message}`:"",i=`<${t.tagName}> is deprecated${s}`;this.report(t,i,r,n)}},"deprecated-rule":class extends Me{documentation(e){return{description:`${e?`The rule "${e}"`:"This rule"} is deprecated and should not be used any longer, consult documentation for further information.`,url:je("@/rules/deprecated-rule.ts")}}setup(){this.on("config:ready",(e=>{for(const r of this.getDeprecatedRules(e))r.getSeverity()>t.Severity.DISABLED&&this.report(null,`Usage of deprecated rule "${r.name}"`,null,r.name)}))}getDeprecatedRules(e){return Object.values(e.rules).filter((e=>e.deprecated))}},"doctype-html":class extends Me{documentation(){return{description:['HTML5 documents should use the "html" doctype (short `form`, not legacy string):',"","```html","<!DOCTYPE html>","```"].join("\n"),url:je("@/rules/doctype-html.ts")}}setup(){this.on("doctype",(e=>{"html"!==e.value.toLowerCase()&&this.report(null,'doctype should be "html"',e.valueLocation)}))}},"doctype-style":class extends Me{constructor(e){super({...Pt,...e})}static schema(){return{style:{enum:["lowercase","uppercase"],type:"string"}}}documentation(e){const t={description:"While DOCTYPE is case-insensitive in the standard the current configuration requires a specific style.",url:je("@/rules/doctype-style.ts")};return e&&(t.description=`While DOCTYPE is case-insensitive in the standard the current configuration requires it to be ${e.style}`),t}setup(){this.on("doctype",(e=>{"uppercase"===this.options.style&&"DOCTYPE"!==e.tag&&this.report(null,"DOCTYPE should be uppercase",e.location,this.options),"lowercase"===this.options.style&&"doctype"!==e.tag&&this.report(null,"DOCTYPE should be lowercase",e.location,this.options)}))}},"element-case":class extends Me{constructor(e){super({...Mt,...e}),this.style=new Xe(this.options.style,"element-case")}static schema(){const e=["lowercase","uppercase","pascalcase","camelcase"];return{style:{anyOf:[{enum:e,type:"string"},{items:{enum:e,type:"string"},type:"array"}]}}}documentation(){return{description:`Element tagname must be ${this.options.style}.`,url:je("@/rules/element-case.ts")}}setup(){this.on("tag:start",(e=>{const{target:t,location:r}=e;this.validateCase(t,r)})),this.on("tag:end",(e=>{const{target:t,previous:r}=e;this.validateMatchingCase(r,t)}))}validateCase(e,t){const r=e.tagName.replace(/[^a-z]+/gi,"");if(!this.style.match(r)){const r=W(t,1);this.report(e,`Element "${e.tagName}" should be ${this.style.name}`,r)}}validateMatchingCase(e,t){e&&t&&e.tagName&&t.tagName&&e.tagName.toLowerCase()===t.tagName.toLowerCase()&&e.tagName!==t.tagName&&this.report(e,"Start and end tag must not differ in casing",t.location)}},"element-name":class extends Me{constructor(e){super({...jt,...e}),this.pattern=new RegExp(this.options.pattern)}static schema(){return{blacklist:{items:{type:"string"},type:"array"},pattern:{type:"string"},whitelist:{items:{type:"string"},type:"array"}}}documentation(e){return{description:this.documentationMessages(e).join("\n"),url:je("@/rules/element-name.ts")}}documentationMessages(e){return e?e.blacklist.includes(e.tagName)?[`<${e.tagName}> is blacklisted by the project configuration.`,"","The following names are blacklisted:",...e.blacklist.map((e=>`- ${e}`))]:e.pattern!==jt.pattern?[`<${e.tagName}> is not a valid element name. This project is configured to only allow names matching the following regular expression:`,"",`- \`${e.pattern}\``]:[`<${e.tagName}> is not a valid element name. If this is a custom element HTML requires the name to follow these rules:`,"","- The name must begin with `a-z`","- The name must include a hyphen `-`","- It may include alphanumerical characters `a-z0-9` or hyphens `-`, dots `.` or underscores `_`."]:["This is not a valid element name."]}setup(){const e=/^(.+):.+$/;this.on("tag:start",(t=>{const r=t.target,n=r.tagName,s=W(t.location,1),i={tagName:n,pattern:this.options.pattern,blacklist:this.options.blacklist};this.options.blacklist.includes(n)&&this.report(r,`<${n}> element is blacklisted`,s,i),r.meta||n.match(e)||this.options.whitelist.includes(n)||n.match(this.pattern)||this.report(r,`<${n}> is not a valid element name`,s,i)}))}},"element-permitted-content":class extends Me{documentation(){return{description:"Some elements has restrictions on what content is allowed. This can include both direct children or descendant elements.",url:je("@/rules/element-permitted-content.ts")}}setup(){this.on("dom:ready",(e=>{e.document.visitDepthFirst((e=>{const t=e.parent;t&&!t.isRootElement()&&[()=>this.validatePermittedContent(e,t),()=>this.validatePermittedDescendant(e,t),()=>this.validatePermittedAncestors(e)].some((e=>e()))}))}))}validatePermittedContent(e,t){var r;if(!t.meta)return!1;const n=null!==(r=t.meta.permittedContent)&&void 0!==r?r:null;return this.validatePermittedContentImpl(e,t,n)}validatePermittedContentImpl(e,t,r){if(!Te.validatePermitted(e,r))return this.report(e,`Element <${e.tagName}> is not permitted as content in ${t.annotatedName}`),!0;if(e.meta&&e.meta.transparent){return(n=e,"boolean"==typeof(s=e.meta.transparent)?n.childElements:n.childElements.filter((e=>s.some((t=>Te.validatePermittedCategory(e,t,!1)))))).map((e=>this.validatePermittedContentImpl(e,t,r))).some(Boolean)}var n,s;return!1}validatePermittedDescendant(e,t){var r;for(let n=t;n&&!n.isRootElement();n=null!==(r=null==n?void 0:n.parent)&&void 0!==r?r:null){const t=n.meta;if(!t)continue;const r=t.permittedDescendants;if(r&&!Te.validatePermitted(e,r))return this.report(e,`Element <${e.tagName}> is not permitted as descendant of ${n.annotatedName}`),!0}return!1}validatePermittedAncestors(e){if(!e.meta)return!1;const t=e.meta.requiredAncestors;return!!t&&(!Te.validateAncestors(e,t)&&(this.report(e,`Element <${e.tagName}> requires an "${t[0]}" ancestor`),!0))}},"element-permitted-occurrences":class extends Me{documentation(){return{description:"Some elements may only be used a fixed amount of times in given context.",url:je("@/rules/element-permitted-occurrences.ts")}}setup(){this.on("dom:ready",(e=>{e.document.visitDepthFirst((e=>{const t=e.parent;if(!t||!t.meta)return;const r=t.meta.permittedContent;if(!r)return;const n=t.childElements.filter((t=>t.tagName===e.tagName));e.unique===n[0].unique||t.meta&&!Te.validateOccurrences(e,r,n.length)&&this.report(e,`Element <${e.tagName}> can only appear once under ${t.annotatedName}`)}))}))}},"element-permitted-order":class extends Me{documentation(){return{description:"Some elements has a specific order the children must use.",url:je("@/rules/element-permitted-order.ts")}}setup(){this.on("dom:ready",(e=>{e.document.visitDepthFirst((e=>{if(!e.meta)return;const t=e.meta.permittedOrder;t&&Te.validateOrder(e.childElements,t,((e,t)=>{this.report(e,`Element <${e.tagName}> must be used before <${t.tagName}> in this context`)}))}))}))}},"element-required-attributes":class extends Me{documentation(e){const t={description:"Element is missing a required attribute",url:je("@/rules/element-required-attributes.ts")};return e&&(t.description=`The <${e.element}> element is required to have a "${e.attribute}" attribute.`),t}setup(){this.on("tag:end",(e=>{const t=e.previous,r=t.meta;if(r&&r.attributes)for(const[n,s]of Object.entries(r.attributes)){if(!s.required)continue;if(t.hasAttribute(n))continue;const e={element:t.tagName,attribute:n};this.report(t,`${t.annotatedName} is missing required "${n}" attribute`,t.location,e)}}))}},"element-required-content":class extends Me{documentation(e){if(e){const{element:t,missing:r}=e;return{description:`The \`${t}\` element requires a \`${r}\` to be present as content.`,url:je("@/rules/element-required-content.ts")}}return{description:"Some elements has requirements on content that must be present.",url:je("@/rules/element-required-content.ts")}}setup(){this.on("dom:ready",(e=>{e.document.visitDepthFirst((e=>{if(!e.meta)return;const t=e.meta.requiredContent;if(t)for(const r of Te.validateRequiredContent(e,t)){const t={element:e.annotatedName,missing:`<${r}>`},n=`${e.annotatedName} element must have <${r}> as content`;this.report(e,n,null,t)}}))}))}},"empty-heading":class extends Me{documentation(){return{description:"Assistive technology such as screen readers require textual content in headings. Whitespace only is considered empty.",url:je("@/rules/empty-heading.ts")}}setup(){this.on("dom:ready",(({document:e})=>{const t=e.querySelectorAll(Ut);for(const r of t)switch(_t(r)){case zt.DYNAMIC_TEXT:case zt.STATIC_TEXT:break;case zt.EMPTY_TEXT:this.report(r,`<${r.tagName}> cannot be empty, must have text content`)}}))}},"empty-title":class extends Me{documentation(){return{description:["The `<title>` element cannot be empty, it must have textual content.","","It is used to describe the document and is shown in the browser tab and titlebar.","WCAG and SEO requires a descriptive title and preferably unique within the site.","","Whitespace is ignored."].join("\n"),url:je("@/rules/empty-title.ts")}}setup(){this.on("tag:end",(e=>{const t=e.previous;if("title"===t.tagName)switch(_t(t)){case zt.DYNAMIC_TEXT:case zt.STATIC_TEXT:break;case zt.EMPTY_TEXT:{const e=`<${t.tagName}> cannot be empty, must have text content`;this.report(t,e,t.location)}}}))}},"heading-level":class extends Me{constructor(e){super({...Gt,...e}),this.stack=[],this.minInitialRank=function(e){if(!1===e||"any"===e)return 6;const t=e.match(/^h(\d)$/);return t?parseInt(t[1],10):1}(this.options.minInitialRank),this.sectionRoots=this.options.sectioningRoots.map((e=>new he(e))),this.stack.push({node:null,current:0,h1Count:0})}static schema(){return{allowMultipleH1:{type:"boolean"},minInitialRank:{enum:["h1","h2","h3","h4","h5","h6","any",!1]},sectioningRoots:{items:{type:"string"},type:"array"}}}documentation(){const e=[],t=this.minInitialRank>1?"should":"must";return e.push(`Headings ${t} start at <h1> and can only increase one level at a time.`),e.push("The headings should form a table of contents and make sense on its own."),this.options.allowMultipleH1||(e.push(""),e.push("Under the current configuration only a single <h1> can be present at a time in the document.")),{description:e.join("\n"),url:je("@/rules/heading-level.ts")}}setup(){this.on("tag:start",Vt,(e=>this.onTagStart(e))),this.on("tag:ready",(e=>this.onTagReady(e))),this.on("tag:close",(e=>this.onTagClose(e)))}onTagStart(e){const t=function(e){const t=e.tagName.match(/^[hH](\d)$/);return t?parseInt(t[1],10):null}(e.target);if(!t)return;const r=this.getCurrentRoot();if(!this.options.allowMultipleH1&&1===t){if(r.h1Count>=1){const t=W(e.location,1);return void this.report(e.target,"Multiple <h1> are not allowed",t)}r.h1Count++}t<=r.current||this.checkLevelIncrementation(r,e,t),r.current=t}checkLevelIncrementation(e,t,r){const n=e.current+1;if(r===n)return;if(1===this.stack.length&&1===n&&r<=this.minInitialRank)return;const s=W(t.location,1);if(e.current>0){const e=`Heading level can only increase by one, expected <h${n}> but got <h${r}>`;this.report(t.target,e,s)}else this.checkInitialLevel(t,s,r,n)}checkInitialLevel(e,t,r,n){if(1===this.stack.length){const s=this.minInitialRank>1?`Initial heading level must be <h${this.minInitialRank}> or higher rank but got <h${r}>`:`Initial heading level must be <h${n}> but got <h${r}>`;this.report(e.target,s,t)}else{const s=this.getPrevRoot().current+1;if(r>s)if(n===s){const s=`Initial heading level for sectioning root must be <h${n}> but got <h${r}>`;this.report(e.target,s,t)}else{const i=`Initial heading level for sectioning root must be between <h${n}> and <h${s}> but got <h${r}>`;this.report(e.target,i,t)}}}onTagReady(e){const{target:t}=e;this.isSectioningRoot(t)&&this.stack.push({node:t.unique,current:0,h1Count:0})}onTagClose(e){const{previous:t}=e,r=this.getCurrentRoot();t.unique===r.node&&this.stack.pop()}getPrevRoot(){return this.stack[this.stack.length-2]}getCurrentRoot(){return this.stack[this.stack.length-1]}isSectioningRoot(e){const t={scope:e};return this.sectionRoots.some((r=>r.match(e,t)))}},"id-pattern":class extends Me{constructor(e){super({...Xt,...e}),this.pattern=Ot(this.options.pattern)}static schema(){return{pattern:{type:"string"}}}documentation(){return{description:`For consistency all IDs are required to match the pattern ${Lt(this.options.pattern)}.`,url:je("@/rules/id-pattern.ts")}}setup(){this.on("attr",(e=>{"id"===e.key.toLowerCase()&&(e.value instanceof H||e.value&&e.value.match(this.pattern)||this.report(e.target,`ID "${e.value}" does not match required pattern "${this.pattern}"`,e.valueLocation))}))}},"input-attributes":class extends Me{documentation(e){var t,r;if(e){const{attribute:n,type:s}=e;return{description:[`Attribute \`${n}\` is not allowed on \`<input type="${s}">\`\n`,`\`${n}\` can only be used when \`type\` is:`,...null!==(r=null===(t=Ht.get(n))||void 0===t?void 0:t.map((e=>`- \`${e}\``)))&&void 0!==r?r:[]].join("\n"),url:je("@/rules/input-attributes.ts")}}return{description:"This attribute cannot be used with this input type.",url:je("@/rules/input-attributes.ts")}}setup(){this.on("tag:ready",Yt,(e=>{const{target:t}=e,r=t.getAttribute("type");if(!r||r.isDynamic||!r.value)return;const n=r.value.toString();for(const s of t.attributes){const e=Ht.get(s.key);if(!e)continue;if(e.includes(n))continue;const r={attribute:s.key,type:n},i=`Attribute "${s.key}" is not allowed on <input type="${n}">`;this.report(t,i,s.keyLocation,r)}}))}},"input-missing-label":class extends Me{documentation(){return{description:"Labels are associated with the input element and is required for a17y.",url:je("@/rules/input-missing-label.ts")}}setup(){this.on("dom:ready",(e=>{const t=e.document;for(const r of t.querySelectorAll("input, textarea, select"))this.validateInput(t,r)}))}validateInput(e,t){if(er(t)||Zt(t))return;if(t.is("input")){const e=t.getAttributeValue("type");if(e&&"hidden"===e.toLowerCase())return}let r=[];(r=function(e,t){return t?e.querySelectorAll(`label[for="${t}"]`):[]}(e,t.id)).length>0||(r=function(e){let t=e.parent;for(;t;){if(t.is("label"))return[t];t=t.parent}return[]}(t)).length>0?this.validateLabel(t,r):this.report(t,`<${t.tagName}> element does not have a <label>`)}validateLabel(e,t){0===t.filter(rr).length&&this.report(e,`<${e.tagName}> element has label but <label> element is hidden`)}},"long-title":class extends Me{constructor(e){super({...nr,...e}),this.maxlength=this.options.maxlength}static schema(){return{maxlength:{type:"number"}}}documentation(){return{description:"Search engines truncates titles with long text, possibly down-ranking the page in the process.",url:je("@/rules/long-title.ts")}}setup(){this.on("tag:end",(e=>{const t=e.previous;if("title"!==t.tagName)return;t.textContent.length>this.maxlength&&this.report(t,`title text cannot be longer than ${this.maxlength} characters`)}))}},"meta-refresh":class extends Me{documentation(){return{description:"Meta refresh directive must use the `0;url=...` format. Non-zero values for time interval is disallowed as people with assistive technology might be unable to read and understand the page content before automatically reloading. For the same reason skipping the url is disallowed as it would put the browser in an infinite loop reloading the same page over and over again.",url:je("@/rules/meta-refresh.ts")}}setup(){this.on("element:ready",(({target:e})=>{if(!e.is("meta"))return;if("refresh"!==e.getAttributeValue("http-equiv"))return;const t=e.getAttribute("content");if(!t||!t.value||t.isDynamic)return;const r=t.valueLocation,n=function(e){const t=e.match(/^(\d+)(?:\s*;\s*url=(.*))?/);return t?{delay:parseInt(t[1],10),url:t[2]}:null}(t.value.toString());n?(n.url||this.report(e,"Don't use meta refresh to reload the page",r),0!==n.delay&&this.report(e,"Meta refresh must use 0 second delay",r)):this.report(e,"Malformed meta refresh directive",r)}))}},"missing-doctype":class extends Me{documentation(){return{description:"Requires that the document contains a doctype.",url:je("@/rules/missing-doctype.ts")}}setup(){this.on("dom:ready",(e=>{const t=e.document;t.doctype||this.report(t.root,"Document is missing doctype")}))}},"multiple-labeled-controls":class extends Me{constructor(){super(...arguments),this.labelable=""}documentation(){return{description:"A `<label>` element can only be associated with one control at a time.",url:je("@/rules/multiple-labeled-controls.ts")}}setup(){this.labelable=this.getTagsWithProperty("labelable").join(","),this.on("element:ready",(e=>{const{target:t}=e;if("label"!==t.tagName)return;this.getNumLabledControls(t)<=1||this.report(t,"<label> is associated with multiple controls",t.location)}))}getNumLabledControls(e){const t=e.querySelectorAll(this.labelable).map((e=>e.id)),r=e.getAttribute("for");if(!r||r.isDynamic||!r.value)return t.length;return t.includes(r.value.toString())?t.length:t.length+1}},"no-autoplay":class extends Me{constructor(e){super({...sr,...e})}documentation(e){return{description:[`The autoplay attribute is not allowed${e?` on <${e.tagName}>`:""}.`,"Autoplaying content can be disruptive for users and has accessibilty concerns.","Prefer to let the user control playback."].join("\n"),url:je("@/rules/no-autoplay.ts")}}static schema(){return{exclude:{anyOf:[{items:{type:"string"},type:"array"},{type:"null"}]},include:{anyOf:[{items:{type:"string"},type:"array"},{type:"null"}]}}}setup(){this.on("attr",(e=>{if("autoplay"!==e.key.toLowerCase())return;if(e.value&&e.value instanceof H)return;const t=e.target.tagName;if(this.isKeywordIgnored(t))return;const r={tagName:t},n=e.location;this.report(e.target,`The autoplay attribute is not allowed on <${t}>`,n,r)}))}},"no-conditional-comment":class extends Me{documentation(){return{description:"Microsoft Internet Explorer previously supported using special HTML comments (conditional comments) for targeting specific versions of IE but since IE 10 it is deprecated and not supported in standards mode.",url:je("@/rules/no-conditional-comment.ts")}}setup(){this.on("conditional",(e=>{this.report(e.parent,"Use of conditional comments are deprecated",e.location)}))}},"no-deprecated-attr":class extends Me{documentation(){return{description:"HTML5 deprecated many old attributes.",url:je("@/rules/no-deprecated-attr.ts")}}setup(){this.on("attr",(e=>{const t=e.target,r=t.meta,n=e.key.toLowerCase();if(null===r)return;const s=r.attributes&&r.attributes[n];if(!s)return;s.deprecated&&this.report(t,`Attribute "${e.key}" is deprecated on <${t.tagName}> element`,e.keyLocation)}))}},"no-dup-attr":class extends Me{documentation(){return{description:"HTML disallows two or more attributes with the same (case-insensitive) name.",url:je("@/rules/no-dup-attr.ts")}}setup(){let e={};this.on("tag:start",(()=>{e={}})),this.on("attr",(t=>{if(t.originalAttribute)return;const r=t.key.toLowerCase();r in e&&this.report(t.target,`Attribute "${r}" duplicated`,t.keyLocation),e[t.key]=!0}))}},"no-dup-class":class extends Me{documentation(){return{description:"Prevents unnecessary duplication of class names.",url:je("@/rules/no-dup-class.ts")}}setup(){this.on("attr",(e=>{if("class"!==e.key.toLowerCase())return;const t=new ne(e.value,e.valueLocation),r=new Set;t.forEach(((n,s)=>{if(r.has(n)){const r=t.location(s);this.report(e.target,`Class "${n}" duplicated`,r)}r.add(n)}))}))}},"no-dup-id":class extends Me{documentation(){return{description:"The ID of an element must be unique.",url:je("@/rules/no-dup-id.ts")}}setup(){this.on("dom:ready",(e=>{const{document:t}=e,r=new Set,n=t.querySelectorAll("[id]").filter(ir);for(const s of n){const e=s.getAttribute("id");if(!e||!e.value)continue;const t=e.value.toString();r.has(t)&&this.report(s,`Duplicate ID "${t}"`,e.valueLocation),r.add(t)}}))}},"no-implicit-close":class extends Me{documentation(){return{description:"Some elements in HTML has optional end tags. When an optional tag is omitted a browser must handle it as if the end tag was present.\n\nOmitted end tags can be ambigious for humans to read and many editors have trouble formatting the markup.",url:je("@/rules/no-implicit-close.ts")}}setup(){this.on("tag:end",(e=>{const r=e.previous,n=e.target;if(!n)return;if(r.closed!==t.NodeClosed.ImplicitClosed)return;const s=r.parent&&r.parent.tagName===n.tagName,i=r.tagName===n.tagName;s?this.report(r,`Element <${r.tagName}> is implicitly closed by parent </${n.tagName}>`,r.location):i?this.report(r,`Element <${r.tagName}> is implicitly closed by sibling`,r.location):this.report(r,`Element <${r.tagName}> is implicitly closed by adjacent <${n.tagName}>`,r.location)}))}},"no-inline-style":class extends Me{constructor(e){super({...or,...e})}static schema(){return{exclude:{anyOf:[{items:{type:"string"},type:"array"},{type:"null"}]},include:{anyOf:[{items:{type:"string"},type:"array"},{type:"null"}]},allowedProperties:{items:{type:"string"},type:"array"}}}documentation(){const e=["Inline style is not allowed.\n","Inline style is a sign of unstructured CSS. Use class or ID with a separate stylesheet.\n"];return this.options.allowedProperties.length>0&&(e.push("Under the current configuration the following CSS properties are allowed:\n"),e.push(this.options.allowedProperties.map((e=>`- \`${e}\``)).join("\n"))),{description:e.join("\n"),url:je("@/rules/no-inline-style.ts")}}setup(){this.on("attr",(e=>this.isRelevant(e)),(e=>{const{value:t}=e;this.allPropertiesAllowed(t)||this.report(e.target,"Inline style is not allowed")}))}isRelevant(e){if("style"!==e.key)return!1;const{include:t,exclude:r}=this.options,n=e.originalAttribute||e.key;return!(t&&!t.includes(n))&&(!r||!r.includes(n))}allPropertiesAllowed(e){if("string"!=typeof e)return!1;const t=this.options.allowedProperties;if(0===t.length)return!1;const r=function(e){return e.trim().split(";").filter(Boolean).map((e=>{const[t,r]=e.split(":",2);return{property:t.trim(),value:r?r.trim():void 0}}))}(e);return r.length>0&&r.every((e=>t.includes(e.property)))}},"no-missing-references":class extends Me{documentation(e){return e?{description:`The element ID "${e.value}" referenced by the ${e.key} attribute must point to an existing element.`,url:je("@/rules/no-missing-references.ts")}:{description:"The element ID referenced by the attribute must point to an existing element.",url:je("@/rules/no-missing-references.ts")}}setup(){this.on("dom:ready",(e=>{const t=e.document;for(const r of t.querySelectorAll("label[for]")){const e=r.getAttribute("for");this.validateReference(t,r,e,!1)}for(const r of t.querySelectorAll("input[list]")){const e=r.getAttribute("list");this.validateReference(t,r,e,!1)}for(const{property:r,isList:n}of ar)for(const e of t.querySelectorAll(`[${r}]`)){const s=e.getAttribute(r);this.validateReference(t,e,s,n)}}))}validateReference(e,t,r,n){if(!r)return;const s=r.value;s instanceof H||null===s||""===s||(n?this.validateList(e,t,r,s):this.validateSingle(e,t,r,s))}validateSingle(e,t,r,n){if(lr(e,n)){const e={key:r.key,value:n};this.report(t,`Element references missing id "${n}"`,r.valueLocation,e)}}validateList(e,t,r,n){const s=new ne(n,r.valueLocation);for(const i of s.iterator()){const n=i.item;if(lr(e,n)){const e={key:r.key,value:n};this.report(t,`Element references missing id "${n}"`,i.location,e)}}}},"no-multiple-main":class extends Me{documentation(){return{description:["Only a single visible `<main>` element can be present at in a document at a time.","","Multiple `<main>` can be present in the DOM as long the others are hidden using the HTML5 `hidden` attribute."].join("\n"),url:je("@/rules/no-multiple-main.ts")}}setup(){this.on("dom:ready",(e=>{const{document:t}=e,r=t.querySelectorAll("main").filter((e=>!e.hasAttribute("hidden")));r.shift();for(const n of r)this.report(n,"Multiple <main> elements present in document")}))}},"no-raw-characters":class extends Me{constructor(e){super({...cr,...e}),this.relaxed=this.options.relaxed}static schema(){return{relaxed:{type:"boolean"}}}documentation(){return{description:"Some characters such as `<`, `>` and `&` hold special meaning in HTML and must be escaped using a character reference (html entity).",url:je("@/rules/no-raw-characters.ts")}}setup(){this.on("element:ready",(e=>{const t=e.target;for(const r of t.childNodes)r.nodeType===K.TEXT_NODE&&(r.textContent.match(mr)||this.findRawChars(t,r.textContent,r.location,ur))})),this.on("attr",(e=>{e.value&&(e.quote||this.findRawChars(e.target,e.value.toString(),e.valueLocation,dr))}))}findRawChars(e,t,r,n){let s;do{if(s=n.exec(t),s){const t=s[0];if(this.relaxed&&"&"===t)continue;const n=hr.get(t),i=W(r,s.index,s.index+1);this.report(e,`Raw "${t}" must be encoded as "${n}"`,i)}}while(s)}},"no-redundant-for":class extends Me{documentation(){return{description:"When the `<label>` element wraps the labelable control the `for` attribute is redundant and better left out.",url:je("@/rules/no-redundant-for.ts")}}setup(){this.on("element:ready",(e=>{const{target:t}=e;if("label"!==t.tagName)return;const r=t.getAttribute("for");if(!r||r.isDynamic)return;const n=r.value;if(!n)return;const s=ae(n);t.querySelector(`[id="${s}"]`)&&this.report(t,'Redundant "for" attribute',r.keyLocation)}))}},"no-redundant-role":class extends Me{documentation(e){const t={description:"Using this role is redundant as it is already implied by the element.",url:je("@/rules/no-redundant-role.ts")};return e&&(t.description=`Using the "${e.role}" role is redundant as it is already implied by the <${e.tagname}> element.`),t}setup(){this.on("attr",(e=>{const{target:t}=e;if("role"!==e.key.toLowerCase())return;if(!e.value||e.value instanceof H)return;const r=pr[t.tagName];if(!r)return;if(!r.includes(e.value))return;const n={tagname:t.tagName,role:e.value};this.report(e.target,`Redundant role "${e.value}" on <${t.tagName}>`,e.valueLocation,n)}))}},"no-self-closing":class extends Me{constructor(e){super({...gr,...e})}static schema(){return{ignoreForeign:{type:"boolean"},ignoreXML:{type:"boolean"}}}documentation(e){return{description:`Self-closing elements are disallowed. Use regular end tag <${e=e||"element"}></${e}> instead of self-closing <${e}/>.`,url:je("@/rules/no-self-closing.ts")}}setup(){this.on("tag:end",(e=>{const t=e.previous;(function(e,t){if(e.tagName&&e.tagName.match(fr))return!t.ignoreXML;if(!e.meta)return!0;if(e.meta.void)return!1;if(e.meta.foreign)return!t.ignoreForeign;return!0})(t,this.options)&&this.validateElement(t)}))}validateElement(e){e.closed===t.NodeClosed.VoidSelfClosed&&this.report(e,`<${e.tagName}> must not be self-closed`,null,e.tagName)}},"no-style-tag":class extends Me{documentation(){return{description:"Prefer to use external stylesheets with the `<link>` tag instead of inlining the styling.",url:je("@/rules/no-style-tag.ts")}}setup(){this.on("tag:start",(e=>{const t=e.target;"style"===t.tagName&&this.report(t,"Use external stylesheet with <link> instead of <style> tag")}))}},"no-trailing-whitespace":class extends Me{documentation(){return{description:"Lines with trailing whitespace cause unnessecary diff when using version control and usually serve no special purpose in HTML.",url:je("@/rules/no-trailing-whitespace.ts")}}setup(){this.on("whitespace",(e=>{e.text.match(/^[ \t]+\r?\n$/)&&this.report(null,"Trailing whitespace",e.location)}))}},"no-unknown-elements":class extends Me{documentation(e){return{description:`An unknown element${e?` <${e}>`:""} was used. If this is a Custom Element you need to supply element metadata for it.`,url:je("@/rules/no-unknown-elements.ts")}}setup(){this.on("tag:start",(e=>{const t=e.target;t.meta||this.report(t,`Unknown element <${t.tagName}>`,null,t.tagName)}))}},"no-utf8-bom":class extends Me{documentation(){return{description:"This file is saved with the UTF-8 byte order mark (BOM) present. It is neither required or recommended to use.\n\nInstead the document should be served with the `Content-Type: application/javascript; charset=utf-8` header.",url:je("@/rules/no-utf8-bom.ts")}}setup(){const e=this.on("token",(r=>{r.type===t.TokenType.UNICODE_BOM&&this.report(null,"File should be saved without UTF-8 BOM",r.location),this.setEnabled(!1),e()}))}},"prefer-button":class extends Me{constructor(e){super({...vr,...e})}static schema(){return{exclude:{anyOf:[{items:{type:"string"},type:"array"},{type:"null"}]},include:{anyOf:[{items:{type:"string"},type:"array"},{type:"null"}]}}}documentation(e){const t={description:"Prefer to use the generic `<button>` element instead of `<input>`.",url:je("@/rules/prefer-button.ts")};if(e){const r=`<input type="${e.type}">`,n=br[e.type]||"<button>";t.description=`Prefer to use \`${n}\` instead of \`"${r}\`.`}return t}setup(){this.on("attr",(e=>{const t=e.target;if("input"!==t.tagName.toLowerCase())return;if("type"!==e.key.toLowerCase())return;if(!e.value||e.value instanceof H)return;const r=e.value.toLowerCase();if(this.isKeywordIgnored(r))return;if(!yr.includes(r))return;const n={type:r},s=`Prefer to use <button> instead of <input type="${r}"> when adding buttons`;this.report(t,s,e.valueLocation,n)}))}},"prefer-native-element":class extends Me{constructor(e){super({...wr,...e})}static schema(){return{exclude:{anyOf:[{items:{type:"string"},type:"array"},{type:"null"}]},include:{anyOf:[{items:{type:"string"},type:"array"},{type:"null"}]},mapping:{type:"object"}}}documentation(e){const t={description:"Instead of using WAI-ARIA roles prefer to use the native HTML elements.",url:je("@/rules/prefer-native-element.ts")};return e&&(t.description=`Instead of using the WAI-ARIA role "${e.role}" prefer to use the native <${e.replacement}> element.`),t}setup(){const{mapping:e}=this.options;this.on("attr",(t=>{if("role"!==t.key.toLowerCase())return;if(!t.value||t.value instanceof H)return;const r=t.value.toLowerCase();if(this.isIgnored(r))return;const n=e[r];if(t.target.is(n))return;const s={role:r,replacement:n},i=this.getLocation(t);this.report(t.target,`Prefer to use the native <${n}> element`,i,s)}))}isIgnored(e){const{mapping:t}=this.options;return!t[e]||this.isKeywordIgnored(e)}getLocation(e){const t=e.location,r=e.valueLocation,n=e.quote?1:0,s=r.offset+r.size-t.offset+n;return{filename:t.filename,line:t.line,column:t.column,offset:t.offset,size:s}}},"prefer-tbody":class extends Me{documentation(){return{description:"While `<tbody>` is optional is relays semantic information about its contents. Where applicable it should also be combined with `<thead>` and `<tfoot>`.",url:je("@/rules/prefer-tbody.ts")}}setup(){this.on("dom:ready",(e=>{const t=e.document;for(const r of t.querySelectorAll("table")){if(r.querySelector("> tbody"))continue;const e=r.querySelectorAll("> tr");e.length>=1&&this.report(e[0],"Prefer to wrap <tr> elements in <tbody>")}}))}},"require-sri":class extends Me{constructor(e){super({...Tr,...e}),this.target=this.options.target}static schema(){return{target:{enum:["all","crossorigin"],type:"string"}}}documentation(){return{description:"Subresource Integrity (SRI) `integrity` attribute is required to prevent manipulation from Content Delivery Networks or other third-party hosting.",url:je("@/rules/require-sri.ts")}}setup(){this.on("tag:end",(e=>{const t=e.previous;this.supportSri(t)&&this.needSri(t)&&(t.hasAttribute("integrity")||this.report(t,`SRI "integrity" attribute is required on <${t.tagName}> element`,t.location))}))}supportSri(e){return Object.keys(kr).includes(e.tagName)}needSri(e){if("all"===this.target)return!0;const t=this.elementSourceAttr(e);if(!t||null===t.value||t.isDynamic)return!1;const r=t.value.toString();return Er.test(r)}elementSourceAttr(e){const t=kr[e.tagName];return e.getAttribute(t)}},"script-element":class extends Me{documentation(){return{description:"The end tag for `<script>` is a hard requirement and must never be omitted even when using the `src` attribute.",url:je("@/rules/script-element.ts")}}setup(){this.on("tag:end",(e=>{const r=e.target;r&&"script"===r.tagName&&r.closed!==t.NodeClosed.EndTag&&this.report(r,`End tag for <${r.tagName}> must not be omitted`)}))}},"script-type":class extends Me{documentation(){return{description:"While valid the HTML5 standard encourages authors to omit the type element for JavaScript resources.",url:je("@/rules/script-type.ts")}}setup(){this.on("tag:end",(e=>{const t=e.previous;if(!t||"script"!==t.tagName)return;const r=t.getAttribute("type");if(!r||r.isDynamic)return;const n=r.value?r.value.toString():"";this.isJavascript(n)&&this.report(t,'"type" attribute is unnecessary for javascript resources',r.keyLocation)}))}isJavascript(e){const t=e.replace(/;.*/,"");return xr.includes(t)}},"svg-focusable":class extends Me{documentation(){return{description:"Inline SVG elements in IE are focusable by default which may cause issues with tab-ordering. The `focusable` attribute should explicitly be set to avoid unintended behaviour.",url:je("@/rules/svg-focusable.ts")}}setup(){this.on("element:ready",(e=>{e.target.is("svg")&&this.validate(e.target)}))}validate(e){e.hasAttribute("focusable")||this.report(e,`<${e.tagName}> is missing required "focusable" attribute`)}},"text-content":Sr,"unrecognized-char-ref":class extends Me{documentation(e){return{description:`HTML defines a set of valid character references but ${e||"this"} is not a valid one.`,url:je("@/rules/unrecognized-char-ref.ts")}}setup(){this.on("element:ready",(e=>{const t=e.target;for(const r of t.childNodes)r.nodeType===K.TEXT_NODE&&this.findCharacterReferences(r.textContent,r.location)})),this.on("attr",(e=>{e.value&&this.findCharacterReferences(e.value.toString(),e.valueLocation)}))}findCharacterReferences(e,t){let r;do{if(r=Or.exec(e),r){const e=r[0];if(e.startsWith("&#"))continue;if(Ir.includes(e))continue;const n=W(t,r.index,r.index+e.length);this.report(null,`Unrecognized character reference "${e}"`,n,e)}}while(r)}},void:class extends Me{constructor(e){super({...Rr,...e}),this.style=function(e){switch(e){case"any":return Lr.Any;case"omit":return Lr.AlwaysOmit;case"selfclose":case"selfclosing":return Lr.AlwaysSelfclose;default:throw new Error(`Invalid style "${e}" for "void" rule`)}}(this.options.style)}get deprecated(){return!0}static schema(){return{style:{enum:["any","omit","selfclose","selfclosing"],type:"string"}}}documentation(){return{description:"HTML void elements cannot have any content and must not have an end tag.",url:je("@/rules/void.ts")}}setup(){this.on("tag:end",(e=>{const t=e.target,r=e.previous;t&&t.meta&&this.validateCurrent(t),r&&r.meta&&this.validateActive(r,r.meta)}))}validateCurrent(e){e.voidElement&&e.closed===t.NodeClosed.EndTag&&this.report(null,`End tag for <${e.tagName}> must be omitted`,e.location)}validateActive(e,r){if(r.foreign)return;const n=e.closed===t.NodeClosed.VoidOmitted||e.closed===t.NodeClosed.VoidSelfClosed;e.voidElement&&(this.style===Lr.AlwaysOmit&&e.closed===t.NodeClosed.VoidSelfClosed&&this.report(e,`Expected omitted end tag <${e.tagName}> instead of self-closing element <${e.tagName}/>`),this.style===Lr.AlwaysSelfclose&&e.closed===t.NodeClosed.VoidOmitted&&this.report(e,`Expected self-closing element <${e.tagName}/> instead of omitted end-tag <${e.tagName}>`)),n&&!1===e.voidElement&&this.report(e,`End tag for <${e.tagName}> must not be omitted`)}},"void-content":class extends Me{documentation(e){const t={description:"HTML void elements cannot have any content and must not have content or end tag.",url:je("@/rules/void-content.ts")};return e&&(t.description=`<${e}> is a void element and must not have content or end tag.`),t}setup(){this.on("tag:end",(e=>{const r=e.target;r&&r.voidElement&&r.closed===t.NodeClosed.EndTag&&this.report(null,`End tag for <${r.tagName}> must be omitted`,r.location,r.tagName)}))}},"void-style":class extends Me{constructor(e){super({...Pr,...e}),this.style=function(e){switch(e){case"omit":return Dr.AlwaysOmit;case"selfclose":case"selfclosing":return Dr.AlwaysSelfclose;default:throw new Error(`Invalid style "${e}" for "void-style" rule`)}}(this.options.style)}static schema(){return{style:{enum:["omit","selfclose","selfclosing"],type:"string"}}}documentation(e){const t={description:"The current configuration requires a specific style for ending void elements.",url:je("@/rules/void-style.ts")};if(e){const[r,n]=function(e){switch(e){case Dr.AlwaysOmit:return["omit end tag",""];case Dr.AlwaysSelfclose:return["be self-closed","/"];default:throw new Error("Unknown style")}}(e.style);t.description=`The current configuration requires void elements to ${r}, use <${e.tagName}${n}> instead.`}return t}setup(){this.on("tag:end",(e=>{const t=e.previous;t&&t.meta&&this.validateActive(t)}))}validateActive(e){e.voidElement&&(this.shouldBeOmitted(e)&&this.report(e,`Expected omitted end tag <${e.tagName}> instead of self-closing element <${e.tagName}/>`),this.shouldBeSelfClosed(e)&&this.report(e,`Expected self-closing element <${e.tagName}/> instead of omitted end-tag <${e.tagName}>`))}report(e,t){const r={style:this.style,tagName:e.tagName};super.report(e,t,null,r)}shouldBeOmitted(e){return this.style===Dr.AlwaysOmit&&e.closed===t.NodeClosed.VoidSelfClosed}shouldBeSelfClosed(e){return this.style===Dr.AlwaysSelfclose&&e.closed===t.NodeClosed.VoidOmitted}},..._r};var Ur={};const Gr={rules:{"input-missing-label":"error","heading-level":"error","missing-doctype":"error","no-missing-references":"error","require-sri":"error"}},Vr={rules:{"aria-hidden-body":"error","aria-label-misuse":"error","attr-case":"error","attr-delimiter":"error","attr-quotes":"error","attr-spacing":"error","attribute-allowed-values":"error","attribute-boolean-style":"error","attribute-empty-style":"error","close-attr":"error","close-order":"error",deprecated:"error","deprecated-rule":"warn","doctype-html":"error","doctype-style":"error","element-case":"error","element-name":"error","element-permitted-content":"error","element-permitted-occurrences":"error","element-permitted-order":"error","element-required-attributes":"error","element-required-content":"error","empty-heading":"error","empty-title":"error","input-attributes":"error","long-title":"error","meta-refresh":"error","multiple-labeled-controls":"error","no-autoplay":["error",{include:["audio","video"]}],"no-conditional-comment":"error","no-deprecated-attr":"error","no-dup-attr":"error","no-dup-class":"error","no-dup-id":"error","no-implicit-close":"error","no-inline-style":"error","no-multiple-main":"error","no-raw-characters":"error","no-redundant-for":"error","no-redundant-role":"error","no-self-closing":"error","no-trailing-whitespace":"error","no-utf8-bom":"error","prefer-button":"error","prefer-native-element":"error","prefer-tbody":"error","script-element":"error","script-type":"error","svg-focusable":"error","text-content":"error","unrecognized-char-ref":"error",void:"off","void-content":"error","void-style":"error","wcag/h30":"error","wcag/h32":"error","wcag/h36":"error","wcag/h37":"error","wcag/h67":"error","wcag/h71":"error"}},Xr={"html-validate:a17y":{rules:{"aria-hidden-body":"error","aria-label-misuse":"error","deprecated-rule":"warn","empty-heading":"error","empty-title":"error","meta-refresh":"error","multiple-labeled-controls":"error","no-autoplay":["error",{include:["audio","video"]}],"no-dup-id":"error","no-redundant-for":"error","no-redundant-role":"error","prefer-native-element":"error","svg-focusable":"error","text-content":"error","wcag/h30":"error","wcag/h32":"error","wcag/h36":"error","wcag/h37":"error","wcag/h67":"error","wcag/h71":"error"}},"html-validate:document":Gr,"html-validate:recommended":Vr,"html-validate:standard":{rules:{"attr-spacing":"error","attribute-allowed-values":"error","close-attr":"error","close-order":"error",deprecated:"error","deprecated-rule":"warn","doctype-html":"error","element-name":"error","element-permitted-content":"error","element-permitted-occurrences":"error","element-permitted-order":"error","element-required-attributes":"error","element-required-content":"error","multiple-labeled-controls":"error","no-deprecated-attr":"error","no-dup-attr":"error","no-dup-id":"error","no-multiple-main":"error","no-raw-characters":["error",{relaxed:!0}],"script-element":"error","unrecognized-char-ref":"error","void-content":"error"}},"htmlvalidate:recommended":Vr,"htmlvalidate:document":Gr};class Hr{constructor({metaTable:e,plugins:t,rules:r,transformers:n}){this.metaTable=e,this.plugins=t,this.rules=r,this.transformers=n}getMetaTable(){return this.metaTable}getPlugins(){return this.plugins}getRules(){return this.rules}transformSource(e,t){const r=this.findTransformer(t||e.filename),n={hasChain:e=>!!this.findTransformer(e),chain:(e,t)=>this.transformSource(e,t)};if(!r)return[e];try{return Array.from(r.fn.call(n,e),(e=>(e.transformedBy=e.transformedBy||[],e.transformedBy.push(r.name),e)))}catch(s){throw new k(`When transforming "${e.filename}": ${s.message}`,s)}}transformFilename(e){const t="/dev/stdin"!==e?e:0,r=p.default.readFileSync(t,{encoding:"utf8"}),n={data:r,filename:e,line:1,column:1,offset:0,originalData:r};return this.transformSource(n)}canTransform(e){return!!this.findTransformer(e)}findTransformer(e){const t=this.transformers.find((t=>t.pattern.test(e)));return null!=t?t:null}}let Yr=null;const Wr=new g.default({strict:!0,strictTuples:!0,strictTypes:!0});Wr.addMetaSchema(E);const Jr=Wr.compile(Ee);function Qr(e,t){return t}function Kr(e,t){const r=y.default(e,{...t,rules:{}});t.rules&&(r.rules=y.default(r.rules,t.rules,{arrayMerge:Qr}));const n=e.root||t.root;return n&&(r.root=n),r}class Zr{constructor(e){var t;this.transformers=[];this.config=Kr({extends:[],plugins:[],rules:{},transform:{}},e||{}),this.metaTable=null,this.rootDir=this.findRootDir(),this.initialized=!1,this.plugins=this.loadPlugins(this.config.plugins||[]),this.configurations=this.loadConfigurations(this.plugins),this.extendMeta(this.plugins),this.config=this.extendConfig(null!==(t=this.config.extends)&&void 0!==t?t:[]),this.config.extends=[],e&&e.rules&&(this.config=Kr(this.config,{rules:e.rules}))}static empty(){return new Zr({extends:[],rules:{},plugins:[],transform:{}})}static fromObject(e,t=null){return Zr.validate(e,t),new Zr(e)}static fromFile(e){const t=function(e){let t;try{t=C(e)}catch(r){throw new Ve(`Failed to read configuration from "${e}"`,r)}for(const n of["extends","elements","plugins"])t[n]&&(t[n]=t[n].map((t=>Zr.expandRelative(t,b.default.dirname(e)))));return t}(e);return Zr.fromObject(t,e)}static validate(e,t=null){var r;if(!Jr(e))throw new $(t,"Invalid configuration",e,Ee,null!==(r=Jr.errors)&&void 0!==r?r:[]);if(e.rules){const r=Zr.getRulesObject(e.rules);for(const[n,[,s]]of r.entries()){const r=Br[n],i=`/rules/${n}/1`;Me.validateOptions(r,n,i,s,t,e)}}}static defaultConfig(){return new Zr(Ur)}init(){this.initialized||(this.transformers=this.precompileTransformers(this.config.transform||{}),this.initialized=!0)}isRootFound(){return Boolean(this.config.root)}merge(e){return new Zr(Kr(this.config,e.config))}extendConfig(e){if(0===e.length)return this.config;let t={};for(let r=0;r<e.length;r++){const n=e[r];let s;s=this.configurations.has(n)?this.configurations.get(n):Zr.fromFile(n).config,t=Kr(t,s)}return Kr(t,this.config)}getMetaTable(){if(this.metaTable)return this.metaTable;const e=new U,t=this.config.elements||["html5"];for(const r of this.getPlugins())r.elementSchema&&e.extendValidationSchema(r.elementSchema);for(const s of t){if("string"!=typeof s){e.loadFromObject(s);continue}let t;if(t=b.default.join(A,"elements",`${s}.json`),p.default.existsSync(t))e.loadFromFile(t);else if(t=s.replace("<rootDir>",this.rootDir),p.default.existsSync(t))e.loadFromFile(t);else try{e.loadFromObject(r(81066)(s))}catch(n){throw new Ve(`Failed to load elements from "${s}": ${n.message}`,n)}}return e.init(),this.metaTable=e}static expandRelative(e,t){return"."===e[0]?b.default.normalize(`${t}/${e}`):e}get(){const e={...this.config};return e.elements&&(e.elements=e.elements.map((e=>"string"==typeof e?e.replace(this.rootDir,"<rootDir>"):e))),delete e.extends,e}getRules(){var e;return Zr.getRulesObject(null!==(e=this.config.rules)&&void 0!==e?e:{})}static getRulesObject(e){const t=new Map;for(const[r,n]of Object.entries(e)){let e=n;Array.isArray(e)?1===e.length&&(e=[e[0],{}]):e=[e,{}];const s=Oe(e[0]);t.set(r,[s,e[1]])}return t}getPlugins(){return this.plugins}loadPlugins(e){return e.map((e=>{try{const t=r(81066)(e.replace("<rootDir>",this.rootDir));return t.name=t.name||e,t.originalName=e,t}catch(t){throw new Ve(`Failed to load plugin "${e}": ${t}`,t)}}))}loadConfigurations(e){const t=new Map;for(const[r,n]of Object.entries(Xr))Zr.validate(n,r),t.set(r,n);for(const r of e)for(const[e,n]of Object.entries(r.configs||{}))n&&(Zr.validate(n,e),t.set(`${r.name}:${e}`,n),r.name!==r.originalName&&t.set(`${r.originalName}:${e}`,n));return t}extendMeta(e){for(const t of e){if(!t.elementSchema)continue;const{properties:e}=t.elementSchema;if(e)for(const[t,r]of Object.entries(e)){const e=t;r.copyable&&!I.includes(e)&&I.push(e)}}}resolve(){return new Hr(this.resolveData())}resolveData(){return{metaTable:this.getMetaTable(),plugins:this.getPlugins(),rules:this.getRules(),transformers:this.transformers}}precompileTransformers(e){return Object.entries(e).map((([e,t])=>{try{const r=this.getTransformFunction(t),n=r.api||0;if(n!==Ne.VERSION)throw new Ve(`Transformer uses API version ${n} but only version ${Ne.VERSION} is supported`);return{pattern:new RegExp(e),name:t,fn:r}}catch(r){throw new Ve(r instanceof Ve?`Failed to load transformer "${t}": ${r.message}`:`Failed to load transformer "${t}"`,r)}}))}getTransformFunction(e){const t=e.match(/(.*):(.*)/);if(t){const[,r,n]=t;return this.getNamedTransformerFromPlugin(e,r,n)}const r=this.plugins.find((t=>t.name===e));return r?this.getUnnamedTransformerFromPlugin(e,r):this.getTransformerFromModule(e)}getNamedTransformerFromPlugin(e,t,r){const n=this.plugins.find((e=>e.name===t));if(!n)throw new Ve(`No plugin named "${t}" has been loaded`);if(!n.transformer)throw new Ve("Plugin does not expose any transformer");if("function"==typeof n.transformer)throw new Ve(`Transformer "${e}" refers to named transformer but plugin exposes only unnamed, use "${t}" instead.`);const s=n.transformer[r];if(!s)throw new Ve(`Plugin "${t}" does not expose a transformer named "${r}".`);return s}getUnnamedTransformerFromPlugin(e,t){if(!t.transformer)throw new Ve("Plugin does not expose any transformer");if("function"!=typeof t.transformer){if(t.transformer.default)return t.transformer.default;throw new Ve(`Transformer "${e}" refers to unnamed transformer but plugin exposes only named.`)}return t.transformer}getTransformerFromModule(e){const t=e.replace("<rootDir>",this.rootDir),n=r(81066)(t);if("function"!=typeof n){if(n.transformer)throw new Ve("Module is not a valid transformer. This looks like a plugin, did you forget to load the plugin first?");throw new Ve("Module is not a valid transformer.")}return n}get rootDirCache(){return Yr}set rootDirCache(e){Yr=e}findRootDir(){const e=this.rootDirCache;if(null!==e)return e;let t=n.cwd();for(;;){const e=b.default.join(t,"package.json");if(p.default.existsSync(e))return this.rootDirCache=t;const r=t;if(t=b.default.dirname(t),t===r)break}return this.rootDirCache=n.cwd()}}class en{constructor(e,t=Zr){const r=t.empty();this.configFactory=t,this.globalConfig=r.merge(e?this.loadFromObject(e):this.defaultConfig())}empty(){return this.configFactory.empty()}loadFromObject(e,t){return this.configFactory.fromObject(e,t)}loadFromFile(e){return this.configFactory.fromFile(e)}}class tn{constructor(){this.listeners={}}on(e,t){const r=e.split(",").map((e=>e.trim()));for(const n of r)this.listeners[n]=this.listeners[n]||[],this.listeners[n].push(t);return()=>{for(const e of r)this.listeners[e]=this.listeners[e].filter((e=>e!==t))}}once(e,t){const r=this.on(e,((e,n)=>{t(e,n),r()}));return r}trigger(e,t){var r,n;[...null!==(r=this.listeners[e])&&void 0!==r?r:[],...null!==(n=this.listeners["*"])&&void 0!==n?n:[]].forEach((r=>{r.call(null,e,t)}))}}const rn=/<!(?:--)?\[(.*?)\](?:--)?>/g;class nn extends Error{constructor(e,t){super(t),this.location=e}}class sn{constructor(e){this.event=new tn,this.dom=null,this.metaTable=e.getMetaTable()}parseHtml(e){var r,n,s,i;"string"==typeof e&&(e={data:e,filename:"inline",line:1,column:1,offset:0}),this.dom=new ve({filename:null!==(r=e.filename)&&void 0!==r?r:"",offset:null!==(n=e.offset)&&void 0!==n?n:0,line:null!==(s=e.line)&&void 0!==s?s:1,column:null!==(i=e.column)&&void 0!==i?i:1,size:0}),this.trigger("dom:load",{source:e,location:null});const o=(new wt).tokenize(e);let a=this.next(o);for(;!a.done;){const r=a.value;switch(r.type){case t.TokenType.UNICODE_BOM:break;case t.TokenType.TAG_OPEN:this.consumeTag(e,r,o);break;case t.TokenType.WHITESPACE:this.trigger("whitespace",{text:r.data[0],location:r.location}),this.appendText(r.data[0],r.location);break;case t.TokenType.DIRECTIVE:this.consumeDirective(r);break;case t.TokenType.CONDITIONAL:this.consumeConditional(r);break;case t.TokenType.COMMENT:this.consumeComment(r);break;case t.TokenType.DOCTYPE_OPEN:this.consumeDoctype(r,o);break;case t.TokenType.TEXT:case t.TokenType.TEMPLATING:this.appendText(r.data[0],r.location);break;case t.TokenType.EOF:this.closeTree(e,r.location)}a=this.next(o)}return this.dom.resolveMeta(this.metaTable),this.trigger("dom:ready",{document:this.dom,source:e,location:null}),this.dom.root}closeOptional(e){const t=this.dom.getActive();if(!t.meta||!t.meta.implicitClosed)return!1;const r=e.data[2],n=!e.data[1],s=t.meta.implicitClosed;return n?s.includes(r):!t.is(r)&&Boolean(t.parent&&t.parent.is(r)&&s.includes(t.tagName))}consumeTag(e,r,n){const s=Array.from(this.consumeUntil(n,t.TokenType.TAG_CLOSE,r.location)),i=s.slice(-1)[0],o=this.closeOptional(r),a=o?this.dom.getActive().parent:this.dom.getActive(),l=be.fromTokens(r,i,a,this.metaTable),c=!r.data[1],u=!c||l.closed!==t.NodeClosed.Open,d=l.meta&&l.meta.foreign;if(o){const n=this.dom.getActive();n.closed=t.NodeClosed.ImplicitClosed,this.closeElement(e,l,n,r.location),this.dom.popActive()}c&&(this.dom.pushActive(l),this.trigger("tag:start",{target:l,location:r.location}));for(let m=0;m<s.length;m++){const r=s[m];switch(r.type){case t.TokenType.WHITESPACE:break;case t.TokenType.ATTR_NAME:this.consumeAttribute(e,l,r,s[m+1])}}if(c&&this.trigger("tag:ready",{target:l,location:i.location}),u){const r=this.dom.getActive();c||(l.closed=t.NodeClosed.EndTag),this.closeElement(e,l,r,i.location);!c&&l.voidElement||this.dom.popActive()}else d&&this.discardForeignBody(e,l.tagName,n,r.location)}closeElement(e,t,r,n){this.processElement(r,e);const s={target:t,previous:r,location:n};this.trigger("tag:end",s),r&&!r.isRootElement()&&this.trigger("element:ready",{target:r,location:r.location})}processElement(e,t){if(e.cacheEnable(),t.hooks&&t.hooks.processElement){const r=t.hooks.processElement,n=this.metaTable,s={getMetaFor(e){return n.getMetaFor(e)}};r.call(s,e)}}discardForeignBody(e,r,n,s){let i,o,a=1;do{const e=Array.from(this.consumeUntil(n,t.TokenType.TAG_OPEN,s)),[l]=e.slice(-1),[,c,u]=l.data;if(u!==r)continue;o=Array.from(this.consumeUntil(n,t.TokenType.TAG_CLOSE,l.location)).slice(-1)[0];const d="/>"===o.data[0];c?(i=l,a--):d||a++}while(a>0);if(!i||!o)return;const l=this.dom.getActive(),c=be.fromTokens(i,o,l,this.metaTable);this.closeElement(e,c,l,o.location),this.dom.popActive()}consumeAttribute(e,r,n,s){const i=this.getAttributeKeyLocation(n),o=this.getAttributeValueLocation(s),a=this.getAttributeLocation(n,s),l=function(e){return Boolean(e&&e.type===t.TokenType.ATTR_VALUE)}(s),c={key:n.data[1],value:null,quote:null};if(l){const[,,e,t]=s.data;c.value=e,c.quote=null!=t?t:null}let u,d=e=>[e];e.hooks&&e.hooks.processAttribute&&(d=e.hooks.processAttribute);const m=d.call({},c);u="function"!=typeof m[Symbol.iterator]?[c]:m;for(const t of u){const e={target:r,key:t.key,value:t.value,quote:t.quote,originalAttribute:t.originalAttribute,location:a,keyLocation:i,valueLocation:o};this.trigger("attr",e),r.setAttribute(t.key,t.value,i,o,t.originalAttribute)}}getAttributeKeyLocation(e){return e.location}getAttributeValueLocation(e){if(!e||e.type!==t.TokenType.ATTR_VALUE||""===e.data[2])return null;return e.data[3]?W(e.location,2,-1):W(e.location,1)}getAttributeLocation(e,r){var n;const s=e.location,i=r&&r.type===t.TokenType.ATTR_VALUE?r.location:void 0;return{filename:s.filename,line:s.line,column:s.column,size:s.size+(null!==(n=null==i?void 0:i.size)&&void 0!==n?n:0),offset:s.offset}}consumeDirective(e){const[t,,r,n,s]=e.data;if(""===s)throw new Error(`Missing end bracket "]" on directive "${t}"`);const i=n.match(/^(.*?)(?:\s*(?:--|:)\s*(.*))?$/);if(!i)throw new Error(`Failed to parse directive "${t}"`);const[,o,a]=i;this.trigger("directive",{action:r,data:o,comment:a||"",location:e.location})}consumeConditional(e){const t=this.dom.getActive();this.trigger("conditional",{condition:e.data[1],location:e.location,parent:t})}consumeComment(e){const t=e.data[0],r=this.dom.getActive();for(const n of function*(e,t){let r;for(;null!==(r=rn.exec(e));){const n=r[1],s=r.index,i=W(t,s,s+r[0].length,e);yield{expression:n,location:i}}}(t,e.location))this.trigger("conditional",{condition:n.expression,location:n.location,parent:r})}consumeDoctype(e,r){const n=Array.from(this.consumeUntil(r,t.TokenType.DOCTYPE_CLOSE,e.location)),s=n[0].data[0];this.dom.doctype=s,this.trigger("doctype",{tag:e.data[1],value:s,valueLocation:n[0].location,location:e.location})}*consumeUntil(e,r,n){let s=this.next(e);for(;!s.done;){const t=s.value;if(yield t,t.type===r)return;s=this.next(e)}throw new nn(n,`stream ended before ${t.TokenType[r]} token was found`)}next(e){const t=e.next();if(!t.done){const e=t.value;this.trigger("token",{location:e.location,type:e.type,data:Array.from(e.data)})}return t}on(e,t){return this.event.on(e,t)}once(e,t){return this.event.once(e,t)}defer(e){this.event.once("*",e)}trigger(e,t){if(void 0===t.location)throw new Error("Triggered event must contain location");this.event.trigger(e,t)}getEventHandler(){return this.event}appendText(e,t){this.dom.getActive().appendText(e,t)}closeTree(e,t){let r;for(;(r=this.dom.getActive())&&!r.isRootElement();)this.closeElement(e,null,r,t),this.dom.popActive()}}class on{constructor(){this.result={}}static merge(e){const t=e.every((e=>e.valid)),r={};e.forEach((e=>{e.results.forEach((e=>{const t=e.filePath;t in r?r[t].messages=[...r[t].messages,...e.messages]:r[t]={...e}}))}));const n=Object.values(r).map((e=>(e.errorCount=an(e.messages),e.warningCount=ln(e.messages),e)));return{valid:t,results:n,errorCount:cn(n),warningCount:un(n)}}add(e,t,r,n,s,i){var o;s.filename in this.result||(this.result[s.filename]=[]),this.result[s.filename].push({ruleId:e.name,ruleUrl:null===(o=e.documentation(i))||void 0===o?void 0:o.url,severity:r,message:t,offset:s.offset,line:s.line,column:s.column,size:s.size||0,selector:n?n.generateSelector():null,context:i})}addManual(e,t){e in this.result||(this.result[e]=[]),this.result[e].push(t)}save(e){const t={valid:this.isValid(),results:Object.keys(this.result).map((t=>{const r=Array.from(this.result[t]).sort(dn),n=(e||[]).find((e=>{var r;return t===(null!==(r=e.filename)&&void 0!==r?r:"")}));return{filePath:t,messages:r,errorCount:an(r),warningCount:ln(r),source:n?n.originalData||n.data:null}})),errorCount:0,warningCount:0};return t.errorCount=cn(t.results),t.warningCount=un(t.results),t}isValid(){return 0===Object.values(this.result).reduce(((e,t)=>e+an(t)),0)}}function an(e){return e.filter((e=>e.severity===t.Severity.ERROR)).length}function ln(e){return e.filter((e=>e.severity===t.Severity.WARN)).length}function cn(e){return e.reduce(((e,t)=>e+t.errorCount),0)}function un(e){return e.reduce(((e,t)=>e+t.warningCount),0)}function dn(e,t){return e.line<t.line?-1:e.line>t.line?1:e.column<t.column?-1:e.column>t.column?1:0}class mn{constructor(e,t){this.report=new on,this.config=e,this.ParserClass=t;const r=this.initPlugins(this.config);this.availableRules={...Br,...r.availableRules}}lint(e){for(const r of e){const e=this.instantiateParser(),{rules:n}=this.setupPlugins(r,this.config,e),s={filename:r.filename,line:1,column:1,offset:0,size:1},i={location:s,config:this.config,rules:n};e.trigger("config:ready",i);const{hooks:o,...a}=r,l={location:s,source:a};e.trigger("source:ready",l),e.on("directive",((t,r)=>{this.processDirective(r,e,n)}));try{e.parseHtml(r)}catch(t){if(!(t instanceof vt||t instanceof nn))throw t;this.reportError("parser-error",t.message,t.location)}}return this.report.save(e)}dumpEvents(e){const t=this.instantiateParser(),r=[];return t.on("*",((e,t)=>{"token"!==e&&r.push({event:e,data:t})})),e.forEach((e=>t.parseHtml(e))),r}dumpTokens(e){var r;const n=new wt,s=[];for(const i of e)for(const e of n.tokenize(i)){const n=null!==(r=e.data[0])&&void 0!==r?r:"";s.push({token:t.TokenType[e.type],data:n,location:`${e.location.filename}:${e.location.line}:${e.location.column}`})}return s}dumpTree(e){const t=this.instantiateParser().parseHtml(e[0]),r=[];return function e(t,n,s){if(t.parent){const e="  ".repeat(n-1),i=t.childElements.length>0?"┬":"─",o=s<t.parent.childElements.length-1?"├":"└";r.push(`${e}${o}─${i} ${t.tagName}${function(e){let t="";return e.hasAttribute("id")&&(t+=`#${e.id}`),e.hasAttribute("class")&&(t+=`.${e.classList.join(".")}`),t}(t)}`)}else r.push("(root)");t.childElements.forEach(((t,r)=>e(t,n+1,r)))}(t,0,0),r}getRuleDocumentation(e,t){const r=this.config.getRules();if(r.has(e)){const[,n]=r.get(e);return this.instantiateRule(e,n).documentation(t)}return null}instantiateParser(){return new this.ParserClass(this.config)}processDirective(e,t,r){const n=e.data.split(",").map((e=>e.trim())).map((e=>r[e])).filter((e=>e));switch(e.action){case"enable":this.processEnableDirective(n,t);break;case"disable":this.processDisableDirective(n,t);break;case"disable-block":this.processDisableBlockDirective(n,t);break;case"disable-next":this.processDisableNextDirective(n,t);break;default:this.reportError("parser-error",`Unknown directive "${e.action}"`,e.location)}}processEnableDirective(e,r){for(const n of e)n.setEnabled(!0),n.getSeverity()===t.Severity.DISABLED&&n.setServerity(t.Severity.ERROR);r.on("tag:start",((t,r)=>{r.target.enableRules(e.map((e=>e.name)))}))}processDisableDirective(e,t){for(const r of e)r.setEnabled(!1);t.on("tag:start",((t,r)=>{r.target.disableRules(e.map((e=>e.name)))}))}processDisableBlockDirective(e,t){let r=null;for(const i of e)i.setEnabled(!1);const n=t.on("tag:start",((t,n)=>{var s,i;null===r&&(r=null!==(i=null===(s=n.target.parent)||void 0===s?void 0:s.unique)&&void 0!==i?i:null),n.target.disableRules(e.map((e=>e.name)))})),s=t.on("tag:end",((t,i)=>{const o=null===r,a=r===i.previous.unique;if(o||a){s(),n();for(const t of e)t.setEnabled(!0)}}))}processDisableNextDirective(e,t){for(const n of e)n.setEnabled(!1);const r=t.on("tag:start",((t,r)=>{r.target.disableRules(e.map((e=>e.name)))}));t.once("tag:ready, tag:end, attr",(()=>{r(),t.defer((()=>{for(const t of e)t.setEnabled(!0)}))}))}initPlugins(e){for(const t of e.getPlugins())t.init&&t.init();return{availableRules:this.initRules(e)}}initRules(e){const t={};for(const r of e.getPlugins())for(const[e,n]of Object.entries(r.rules||{}))n&&(t[e]=n);return t}setupPlugins(e,t,r){const n=r.getEventHandler();for(const s of t.getPlugins())s.setup&&s.setup(e,n);return{rules:this.setupRules(t,r)}}setupRules(e,t){const r={};for(const[n,[s,i]]of e.getRules().entries())r[n]=this.loadRule(n,e,s,i,t,this.report);return r}loadRule(e,t,r,n,s,i){const o=t.getMetaTable(),a=this.instantiateRule(e,n);return a.name=e,a.init(s,i,r,o),a.setup&&a.setup(),a}instantiateRule(e,t){if(this.availableRules[e]){return new(0,this.availableRules[e])(t)}return this.missingRule(e)}missingRule(e){return new class extends Me{setup(){this.on("dom:load",(()=>{this.report(null,`Definition for rule '${e}' was not found`)}))}}}reportError(e,r,n){this.report.addManual(n.filename,{ruleId:e,severity:t.Severity.ERROR,message:r,offset:n.offset,line:n.line,column:n.column,size:n.size||0,selector:null})}}class hn extends en{getConfigFor(e,t){const r=this.loadFromObject(t||{});if(r.isRootFound())return r.init(),r;const n=this.globalConfig.merge(r);return n.init(),n}flushCache(){}defaultConfig(){return this.loadFromObject({extends:["html-validate:recommended"],elements:["html5"]})}}function pn(e){return!(!e||"string"==typeof e)&&Boolean(e.processAttribute||e.processElement)}function fn(e){return!(!e||"string"==typeof e)&&!(e.processAttribute||e.processElement)}const gn={silent:!1,version:Se,logger(e){console.error(w.default.red(e))}};const yn=new Set(Object.keys(Br));function bn(e){return["json","cjs","js"].map((t=>b.default.join(e,`.htmlvalidate.${t}`))).filter((e=>p.default.existsSync(e)))}const vn={">":"&gt;","<":"&lt;","'":"&apos;",'"':"&quot;","&":"&amp;"};function wn(e){return e.toString().replace(/[><'"&]/g,(e=>vn[e]))}function Tn(e){switch(e.severity){case 2:default:return"error";case 1:return"warning"}}const En={showLink:!0};function kn(e,t){return 1===t?e:`${e}s`}function xn(e){return{line:e.line,column:e.column}}function $n(e,t){let r=e.line,n=e.column;for(let s=0;s<e.size;s++)"\n"===t.charAt(e.offset+s)?(r++,n=0):n++;return{line:r,column:n}}function An(e,t,r){const s=2===e.severity?w.default.red("error"):w.default.yellow("warning"),i=`${w.default.bold(e.message.replace(/([^ ])\.$/,"$1"))}`,o=w.default.dim(`(${e.ruleId})`),a=function(e,t,r){let s=b.default.relative(n.cwd(),e);return t&&r&&(s+=`:${t}:${r}`),w.default.green(s)}(t.filePath,e.line,e.column),l=t.source,c=[[`${s}:`,`${i}`,o?`${o}`:"",l?`at ${a}:`:`at ${a}`].filter(String).join(" ")];return l&&c.push(d.codeFrameColumns(l,{start:xn(e),end:$n(e,l)},{highlightCode:!1})),r.showLink&&e.ruleUrl&&c.push(`${w.default.bold("Details:")} ${e.ruleUrl}`),c.join("\n")}const qn={checkstyle:function(e){let t="";return t+='<?xml version="1.0" encoding="utf-8"?>\n',t+='<checkstyle version="4.3">\n',e.forEach((e=>{const r=e.messages;t+=`  <file name="${wn(e.filePath)}">\n`,r.forEach((e=>{const r=wn(`htmlvalidate.rules.${e.ruleId}`);t+="    ",t+=[`<error line="${wn(e.line)}"`,`column="${wn(e.column)}"`,`severity="${wn(Tn(e))}"`,`message="${wn(e.message)} (${e.ruleId})"`,`source="${r}" />`].join(" "),t+="\n"})),t+="  </file>\n"})),t+="</checkstyle>\n",t},codeframe:function(e,t){const r={...En,...t};let n=0,s=0,i=e.filter((e=>e.messages.length>0)).reduce(((e,t)=>{const i=t.messages.map((e=>`${An(e,t,r)}\n\n`));return n+=t.errorCount,s+=t.warningCount,e.concat(i)}),[]).join("\n");return i+="\n",i+=function(e,t){const r=e>0?"red":"yellow",n=[];return e>0&&n.push(`${e} ${kn("error",e)}`),t>0&&n.push(`${t} ${kn("warning",t)}`),w.default[r]().bold(`${n.join(" and ")} found.`)}(n,s),i+="\n",n+s>0?i:""},json:function(e){return JSON.stringify(e)},stylish:function(e){const t=T.default(e.map((e=>({...e,fixableErrorCount:0,fixableWarningCount:0})))),r=function(e){const t=e.reduce(((e,t)=>[...e,...t.messages.map((e=>e.ruleUrl)).filter((e=>Boolean(e)))]),[]),r=Array.from(new Set(t));if(0===r.length)return"";const n=r.map((e=>`  ${e}\n`));return`\n${w.default.bold("More information")}:\n${n.join("")}\n`}(e);return`${t}${r}`},text:function(e){let t="",r=0;return e.forEach((e=>{const n=e.messages;0!==n.length&&(r+=n.length,t+=n.map((t=>{let r;r=2===t.severity?"error":"warning";return`${`${e.filePath}:${t.line}:${t.column}`}: ${r} [${t.ruleId}] ${t.message}\n`})).join(""))})),r>0?t:""}};t.Config=Zr,t.ConfigError=Ve,t.ConfigLoader=en,t.DynamicValue=H,t.EventHandler=tn,t.FileSystemConfigLoader=class extends en{constructor(e,t=Zr){super(e,t),this.cache=new Map}getConfigFor(e,t){const r=this.loadFromObject(t||{});if(r.isRootFound())return r.init(),r;if(this.globalConfig.isRootFound()){const e=this.globalConfig.merge(r);return e.init(),e}const n=this.fromFilename(e),s=n?n.merge(r):this.globalConfig.merge(r);return s.init(),s}flushCache(e){e?this.cache.delete(e):this.cache.clear()}fromFilename(e){var t;if("inline"===e)return null;if(this.cache.has(e))return null!==(t=this.cache.get(e))&&void 0!==t?t:null;let r=!1,n=b.default.resolve(b.default.dirname(e)),s=this.empty();for(;;){for(const t of bn(n)){r=!0,s=this.loadFromFile(t).merge(s)}if(s.isRootFound())break;const e=n;if(n=b.default.dirname(n),n===e)break}return r?(this.cache.set(e,s),s):(this.cache.set(e,null),null)}defaultConfig(){return this.configFactory.defaultConfig()}},t.HtmlElement=be,t.HtmlValidate=class{constructor(e){const[t,r]=e instanceof en?[e,void 0]:[void 0,e];this.configLoader=null!=t?t:new hn(r)}validateString(e,t,r,n){const s="string"==typeof t?t:"inline",i=fn(t)?t:fn(r)?r:void 0,o={data:e,filename:s,line:1,column:1,offset:0,hooks:pn(t)?t:pn(r)?r:n};return this.validateSource(o,i)}validateSource(e,t){const r=this.getConfigFor(e.filename,t).resolve(),n=r.transformSource(e);return new mn(r,sn).lint(n)}validateFile(e){const t=this.getConfigFor(e).resolve(),r=t.transformFilename(e);return new mn(t,sn).lint(r)}validateMultipleFiles(e){return on.merge(e.map((e=>this.validateFile(e))))}canValidate(e){if(".html"===b.default.extname(e).toLowerCase())return!0;return this.getConfigFor(e).resolve().canTransform(e)}dumpTokens(e){const t=this.getConfigFor(e).resolve(),r=t.transformFilename(e);return new mn(t,sn).dumpTokens(r)}dumpEvents(e){const t=this.getConfigFor(e).resolve(),r=t.transformFilename(e);return new mn(t,sn).dumpEvents(r)}dumpTree(e){const t=this.getConfigFor(e).resolve(),r=t.transformFilename(e);return new mn(t,sn).dumpTree(r)}dumpSource(e){return this.getConfigFor(e).resolve().transformFilename(e).reduce(((e,t)=>{if(e.push(`Source ${t.filename}@${t.line}:${t.column} (offset: ${t.offset})`),t.transformedBy&&(e.push("Transformed by:"),e=e.concat(t.transformedBy.reverse().map((e=>` - ${e}`)))),t.hooks&&Object.keys(t.hooks).length>0){e.push("Hooks");for(const[r,n]of Object.entries(t.hooks))n&&e.push(` - ${r}`)}return e.push("---"),(e=e.concat(t.data.split("\n"))).push("---"),e}),[])}getConfigurationSchema(){return Ee}getElementsSchema(e){return this.getConfigFor(null!=e?e:"inline").getMetaTable().getJSONSchema()}getRuleDocumentation(e,t=null,r=null){const n=t||this.getConfigFor("inline");return new mn(n.resolve(),sn).getRuleDocumentation(e,r)}getParserFor(e){const t=this.getConfigFor(e.filename);return new sn(t.resolve())}getConfigFor(e,t){return this.configLoader.getConfigFor(e,t)}flushConfigCache(e){this.configLoader.flushCache(e)}},t.MetaCopyableProperty=I,t.MetaTable=U,t.Parser=sn,t.Reporter=on,t.Rule=Me,t.SchemaValidationError=$,t.StaticConfigLoader=hn,t.TemplateExtractor=Ce,t.TextNode=fe,t.UserError=x,t.bugs="https://gitlab.com/html-validate/html-validate/issues/new",t.compatibilityCheck=function(e,t,r){const{silent:n,version:s,logger:i}={...gn,...r},o=v.default.satisfies(s,t);return o||n?o:(i(["-----------------------------------------------------------------------------------------------------",`${e} requires html-validate version "${t}" but current installed version is ${s}`,"This is not a supported configuration. Please install a supported version before reporting bugs.","-----------------------------------------------------------------------------------------------------"].join("\n")),!1)},t.getFormatter=function(e){var t;return null!==(t=qn[e])&&void 0!==t?t:null},t.legacyRequire=r(81066),t.name="html-validate",t.presets=Xr,t.ruleExists=function(e){return yn.has(e)},t.version=Se}}]);